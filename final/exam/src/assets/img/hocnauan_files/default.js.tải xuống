(()=>{var kc=Object.create;var it=Object.defineProperty,Ec=Object.defineProperties,Ts=Object.getOwnPropertyDescriptor,Ic=Object.getOwnPropertyDescriptors,Mc=Object.getOwnPropertyNames,pr=Object.getOwnPropertySymbols,Lc=Object.getPrototypeOf,si=Object.prototype.hasOwnProperty,Cs=Object.prototype.propertyIsEnumerable;var Os=(r,e,t)=>e in r?it(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,S=(r,e)=>{for(var t in e||(e={}))si.call(e,t)&&Os(r,t,e[t]);if(pr)for(var t of pr(e))Cs.call(e,t)&&Os(r,t,e[t]);return r},E=(r,e)=>Ec(r,Ic(e)),jc=r=>it(r,"__esModule",{value:!0}),s=(r,e)=>it(r,"name",{value:e,configurable:!0});var fr=(r,e)=>{var t={};for(var n in r)si.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&pr)for(var n of pr(r))e.indexOf(n)<0&&Cs.call(r,n)&&(t[n]=r[n]);return t};var L=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Fc=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Mc(e))!si.call(r,n)&&n!=="default"&&it(r,n,{get:()=>e[n],enumerable:!(t=Ts(e,n))||t.enumerable});return r},k=r=>Fc(jc(it(r!=null?kc(Lc(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r),Ve=(r,e,t,n)=>{for(var i=n>1?void 0:n?Ts(e,t):e,a=r.length-1,o;a>=0;a--)(o=r[a])&&(i=(n?o(e,t,i):o(i))||i);return n&&i&&it(e,t,i),i};var b=(r,e,t)=>new Promise((n,i)=>{var a=l=>{try{c(t.next(l))}catch(f){i(f)}},o=l=>{try{c(t.throw(l))}catch(f){i(f)}},c=l=>l.done?n(l.value):Promise.resolve(l.value).then(a,o);c((t=t.apply(r,e)).next())});var fe=L((yp,gr)=>{var Rs,ks,Es,Is,Ms,Ls,js,Fs,Hs,mr,ai,Ks,qs,st,_s,Us,$s,Ns,Bs,Gs,Vs,Ws,yr;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&undefined?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof gr=="object"&&typeof gr.exports=="object"?r(t(e,t(gr.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,o){return n[a]=i?i(a,o):o}}s(t,"createExporter")})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])};Rs=s(function(n,i){e(n,i);function a(){this.constructor=n}s(a,"__"),n.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)},"__extends"),ks=Object.assign||function(n){for(var i,a=1,o=arguments.length;a<o;a++){i=arguments[a];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(n[c]=i[c])}return n},Es=s(function(n,i){var a={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&i.indexOf(o)<0&&(a[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(n);c<o.length;c++)i.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(n,o[c])&&(a[o[c]]=n[o[c]]);return a},"__rest"),Is=s(function(n,i,a,o){var c=arguments.length,l=c<3?i:o===null?o=Object.getOwnPropertyDescriptor(i,a):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(n,i,a,o);else for(var x=n.length-1;x>=0;x--)(f=n[x])&&(l=(c<3?f(l):c>3?f(i,a,l):f(i,a))||l);return c>3&&l&&Object.defineProperty(i,a,l),l},"__decorate"),Ms=s(function(n,i){return function(a,o){i(a,o,n)}},"__param"),Ls=s(function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},"__metadata"),js=s(function(n,i,a,o){function c(l){return l instanceof a?l:new a(function(f){f(l)})}return s(c,"adopt"),new(a||(a=Promise))(function(l,f){function x(U){try{w(o.next(U))}catch(Le){f(Le)}}s(x,"fulfilled");function O(U){try{w(o.throw(U))}catch(Le){f(Le)}}s(O,"rejected");function w(U){U.done?l(U.value):c(U.value).then(x,O)}s(w,"step"),w((o=o.apply(n,i||[])).next())})},"__awaiter"),Fs=s(function(n,i){var a={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},o,c,l,f;return f={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function x(w){return function(U){return O([w,U])}}function O(w){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,c&&(l=w[0]&2?c.return:w[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,w[1])).done)return l;switch(c=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,c=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(l=a.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){a.label=w[1];break}if(w[0]===6&&a.label<l[1]){a.label=l[1],l=w;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(w);break}l[2]&&a.ops.pop(),a.trys.pop();continue}w=i.call(n,a)}catch(U){w=[6,U],c=0}finally{o=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},"__generator"),Hs=s(function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&yr(i,n,a)},"__exportStar"),yr=Object.create?function(n,i,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]},mr=s(function(n){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&n[i],o=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},"__values"),ai=s(function(n,i){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var o=a.call(n),c,l=[],f;try{for(;(i===void 0||i-- >0)&&!(c=o.next()).done;)l.push(c.value)}catch(x){f={error:x}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(f)throw f.error}}return l},"__read"),Ks=s(function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(ai(arguments[i]));return n},"__spread"),qs=s(function(){for(var n=0,i=0,a=arguments.length;i<a;i++)n+=arguments[i].length;for(var o=Array(n),c=0,i=0;i<a;i++)for(var l=arguments[i],f=0,x=l.length;f<x;f++,c++)o[c]=l[f];return o},"__spreadArrays"),st=s(function(n){return this instanceof st?(this.v=n,this):new st(n)},"__await"),_s=s(function(n,i,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=a.apply(n,i||[]),c,l=[];return c={},f("next"),f("throw"),f("return"),c[Symbol.asyncIterator]=function(){return this},c;function f($){o[$]&&(c[$]=function(nt){return new Promise(function(ii,Rc){l.push([$,nt,ii,Rc])>1||x($,nt)})})}function x($,nt){try{O(o[$](nt))}catch(ii){Le(l[0][3],ii)}}function O($){$.value instanceof st?Promise.resolve($.value.v).then(w,U):Le(l[0][2],$)}function w($){x("next",$)}function U($){x("throw",$)}function Le($,nt){$(nt),l.shift(),l.length&&x(l[0][0],l[0][1])}},"__asyncGenerator"),Us=s(function(n){var i,a;return i={},o("next"),o("throw",function(c){throw c}),o("return"),i[Symbol.iterator]=function(){return this},i;function o(c,l){i[c]=n[c]?function(f){return(a=!a)?{value:st(n[c](f)),done:c==="return"}:l?l(f):f}:l}},"__asyncDelegator"),$s=s(function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],a;return i?i.call(n):(n=typeof mr=="function"?mr(n):n[Symbol.iterator](),a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a);function o(l){a[l]=n[l]&&function(f){return new Promise(function(x,O){f=n[l](f),c(x,O,f.done,f.value)})}}function c(l,f,x,O){Promise.resolve(O).then(function(w){l({value:w,done:x})},f)}},"__asyncValues"),Ns=s(function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n},"__makeTemplateObject");var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};Bs=s(function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var a in n)a!=="default"&&Object.prototype.hasOwnProperty.call(n,a)&&yr(i,n,a);return t(i,n),i},"__importStar"),Gs=s(function(n){return n&&n.__esModule?n:{default:n}},"__importDefault"),Vs=s(function(n,i){if(!i.has(n))throw new TypeError("attempted to get private field on non-instance");return i.get(n)},"__classPrivateFieldGet"),Ws=s(function(n,i,a){if(!i.has(n))throw new TypeError("attempted to set private field on non-instance");return i.set(n,a),a},"__classPrivateFieldSet"),r("__extends",Rs),r("__assign",ks),r("__rest",Es),r("__decorate",Is),r("__param",Ms),r("__metadata",Ls),r("__awaiter",js),r("__generator",Fs),r("__exportStar",Hs),r("__createBinding",yr),r("__values",mr),r("__read",ai),r("__spread",Ks),r("__spreadArrays",qs),r("__await",st),r("__asyncGenerator",_s),r("__asyncDelegator",Us),r("__asyncValues",$s),r("__makeTemplateObject",Ns),r("__importStar",Bs),r("__importDefault",Gs),r("__classPrivateFieldGet",Vs),r("__classPrivateFieldSet",Ws)})});var oi=L(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.sum=ve.subtract=ve.add=ve.increment=void 0;function Hc(r){return r+1}s(Hc,"increment");ve.increment=Hc;function Kc(r,e){return e===void 0?t=>r+t:r+e}s(Kc,"add");ve.add=Kc;function qc(r,e){return e===void 0?t=>t-r:r-e}s(qc,"subtract");ve.subtract=qc;ve.sum=(r,e)=>r+e});var Lt=L(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.AsyncSequence=Y.Sequence=Y.sequence=Y.range=Y.repeat=Y.iterate=void 0;var ci=oi(),zs=le(),li=N();function*hr(r,e){for(;;)yield e,e=r(e)}s(hr,"iterate");Y.iterate=hr;function*_c(r){for(;;)yield r()}s(_c,"repeat");Y.repeat=_c;function*Uc(r,e,t=1){if(t===0)throw new Error("step can not be 0");if(e===void 0)yield*hr(ci.add(t),r);else{let n=Math.abs(t);e<r?yield*ui(hr(ci.subtract(n),r),zs.takeWhile(i=>i>=e)):yield*ui(hr(ci.add(n),r),zs.takeWhile(i=>i<=e))}}s(Uc,"range");Y.range=Uc;function ui(r,...e){return li.isIterable(r)?new Mt(r,e):li.isArrayLike(r)?new Mt(li.iterable(r),e):new br(r,e)}s(ui,"sequence");Y.sequence=ui;var Mt=class{constructor(e,t){this.source=e,this.transducers=t}[Symbol.iterator](){return this.transducers.reduce((e,t)=>t.sync(e),this.source)[Symbol.iterator]()}};s(Mt,"Sequence");Y.Sequence=Mt;var br=class{constructor(e,t){this.source=e,this.transducers=t}[Symbol.asyncIterator](){return this.transducers.reduce((e,t)=>t.async_(e),this.source)[Symbol.asyncIterator]()}};s(br,"AsyncSequence");Y.AsyncSequence=br});var N=L(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.AsyncIteratorHandler=A.single=A.by=A.toAsyncIterable=A.array=A.isArrayLike=A.asyncIterable=A.iterable=A.toIterable=A.isPromiseLike=A.isAsyncIterable=A.isIterable=A.value=A.key=A.comparators=A.descending=A.ascending=void 0;var je=fe(),vr=Lt();function wr(r,e){return r<e?-1:r>e?1:0}s(wr,"ascending");A.ascending=wr;function $c(r,e){return r<e?1:r>e?-1:0}s($c,"descending");A.descending=$c;function Nc(...r){return(e,t)=>{for(let n of r){let i=n(e,t);if(i!=0)return i}return 0}}s(Nc,"comparators");A.comparators=Nc;function Bc(r){return Object.assign(e=>e[r],{name:r})}s(Bc,"key");A.key=Bc;function Gc(r){return e=>e[r]}s(Gc,"value");A.value=Gc;function di(r){return typeof r=="object"&&Symbol.iterator in r}s(di,"isIterable");A.isIterable=di;function Vc(r){return typeof r=="object"&&Symbol.asyncIterator in r}s(Vc,"isAsyncIterable");A.isAsyncIterable=Vc;function Wc(r){return typeof r=="object"&&"then"in r}s(Wc,"isPromiseLike");A.isPromiseLike=Wc;function zc(...r){return r}s(zc,"toIterable");A.toIterable=zc;function*Jc(r){for(let e=0;e<r.length;e++)yield r[e]}s(Jc,"iterable");A.iterable=Jc;function Yc(r){return je.__asyncGenerator(this,arguments,s(function*(){for(let t of r)yield yield je.__await(t)},"asyncIterable_1"))}s(Yc,"asyncIterable");A.asyncIterable=Yc;function Js(r){return typeof r=="object"&&typeof r.length=="number"}s(Js,"isArrayLike");A.isArrayLike=Js;function Xc(r,...e){return di(r)||Js(r)?Zc(vr.sequence(r,...e)):Qc(vr.sequence(r,...e))}s(Xc,"array");A.array=Xc;function Zc(r){let e=[];for(let t of r)e.push(t);return e}s(Zc,"toArray");function Qc(r){var e,t,n,i;return je.__awaiter(this,void 0,void 0,function*(){let a=[];try{for(e=je.__asyncValues(r);t=yield e.next(),!t.done;){let o=t.value;a.push(o)}}catch(o){n={error:o}}finally{try{t&&!t.done&&(i=e.return)&&(yield i.call(e))}finally{if(n)throw n.error}}return a})}s(Qc,"toPromiseArray");function el(r){return je.__asyncGenerator(this,arguments,s(function*(){yield yield je.__await(r)},"toAsyncIterable_1"))}s(el,"toAsyncIterable");A.toAsyncIterable=el;function tl(r,e=wr){return typeof r=="function"?nl(r,e):rl(r,e)}s(tl,"by");A.by=tl;function rl(r,e=wr){return(t,n)=>e(t[r],n[r])}s(rl,"byKey");function nl(r,e=wr){return(t,n)=>e(r(t),r(n))}s(nl,"byFn");function il(r,...e){return di(r)?sl(vr.sequence(r,...e)):al(vr.sequence(r,...e))}s(il,"single");A.single=il;function sl(r){for(let e of r)return e;throw new Error("Expected a single value")}s(sl,"toSingle");function al(r){var e,t,n,i;return je.__awaiter(this,void 0,void 0,function*(){try{for(e=je.__asyncValues(r);t=yield e.next(),!t.done;)return t.value}catch(a){n={error:a}}finally{try{t&&!t.done&&(i=e.return)&&(yield i.call(e))}finally{if(n)throw n.error}}throw new Error("Expected a single value")})}s(al,"toSinglePromise");var pi=class{constructor(){this.handlers=[],this.state=[]}value(e){this.newState({value:e,done:!1})}error(e){this.newState(e)}close(){this.newState({value:void 0,done:!0})}[Symbol.asyncIterator](){return this}next(){return new Promise((e,t)=>{this.newHandler([e,t])})}newState(e){let t=this.handlers.shift();if(typeof t=="undefined")return this.state.push(e);let n=this.state.shift();if(typeof n=="undefined")return this.consume(e,t);this.consume(n,t),this.newState(e)}newHandler(e){let t=this.state.shift();if(typeof t=="undefined")return this.handlers.push(e);let n=this.handlers.shift();if(typeof n=="undefined")return this.consume(t,e);this.consume(t,n),this.newHandler(e)}consume(e,[t,n]){e instanceof Error?n(e):t(e)}};s(pi,"AsyncIteratorHandler");A.AsyncIteratorHandler=pi});var He=L(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.container=Fe.lazy=Fe.replace=void 0;function Ys(r,e,t){return Object.defineProperty(r,e,{value:t})}s(Ys,"replace");Fe.replace=Ys;function Xs(r,e,t){if(typeof t.get=="undefined")throw new Error("@lazy can only decorate getter methods");return Object.defineProperty(r,e,Object.assign(Object.assign({},t),{get(){return Ys(this,e,t.get.call(this))[e]}}))}s(Xs,"lazy");Fe.lazy=Xs;function ol(r){return Object.keys(r).reduce((e,t)=>Xs(e,t,{configurable:!0,get:()=>r[t](e)}),{})}s(ol,"container");Fe.container=ol});var yi=L(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.AVLTree=void 0;var Zs=fe(),xr=N(),Qs=He(),me=class{constructor(e){this.comparator=e}static empty(e=xr.ascending){return new fi(e)}static create(e,t,n=xr.ascending){let i=me.empty(n);return new re(n,e,t,i,i)}static of(e,t=xr.ascending){return me.preSorted(e.sort(xr.by(0)),t,me.empty(t))}static preSorted(e,t,n){let i=e.length;switch(i){case 0:return n;case 1:{let[[a,o]]=e;return new re(t,a,o,n,n)}default:{let a=Math.floor(i/2),o=me.preSorted(e.slice(0,a),t,n),c=me.preSorted(e.slice(a+1),t,n),[l,f]=e[a];return new re(t,l,f,o,c)}}}};s(me,"AVLTree");Sr.AVLTree=me;var fi=class extends me{constructor(e){super(e);this.isEmpty=!0,this.height=0,this.balance=0}insert(e,t){return new re(this.comparator,e,t,this,this)}contains(e){return!1}lookup(e){}delete(e){return{tree:this}}first(){}last(){}removeFirst(){return{tree:this}}removeLast(){return{tree:this}}toString(){return""}*keys(){}*values(){}*entries(){return[]}};s(fi,"Empty");var re=class extends me{constructor(e,t,n,i,a){super(e);this.key=t,this.value=n,this.left=i,this.right=a,this.isEmpty=!1}insert(e,t){let n=this.comparator(e,this.key);return n===0?new re(this.comparator,e,t,this.left,this.right):n<0?this.replaceLeft(this.left.insert(e,t)):this.replaceRight(this.right.insert(e,t))}contains(e){let t=this.comparator(e,this.key);return t===0?!0:t<0?this.left.contains(e):this.right.contains(e)}lookup(e){let t=this.comparator(e,this.key);return t===0?this.value:t<0?this.left.lookup(e):this.right.lookup(e)}delete(e){let t=this.comparator(e,this.key);if(t===0){if(this.left.isEmpty)return{tree:this.right,key:this.key,value:this.value};if(this.right.isEmpty)return{tree:this.left,key:this.key,value:this.value};let{tree:o,key:c,value:l}=this.left.removeLast();return{tree:mi(new re(this.comparator,c,l,o,this.right)),key:this.key,value:this.value}}if(t<0){let{tree:o,key:c,value:l}=this.left.delete(e);return{tree:this.replaceLeft(o),key:c,value:l}}let{tree:n,key:i,value:a}=this.right.delete(e);return{tree:this.replaceRight(n),key:i,value:a}}first(){return this.left.isEmpty?this.value:this.left.first()}last(){return this.right.isEmpty?this.value:this.right.last()}removeFirst(){if(this.left.isEmpty)return{tree:this.right,key:this.key,value:this.value};let{tree:e,key:t,value:n}=this.left.removeFirst();return{tree:this.replaceLeft(e),key:t,value:n}}removeLast(){if(this.right.isEmpty)return{tree:this.left,key:this.key,value:this.value};let{tree:e,key:t,value:n}=this.right.removeLast();return{tree:this.replaceRight(e),key:t,value:n}}replaceLeft(e){return mi(new re(this.comparator,this.key,this.value,e,this.right))}replaceRight(e){return mi(new re(this.comparator,this.key,this.value,this.left,e))}toString(){return`(${this.left} ${this.key}=${this.value} ${this.right})`}get balance(){return this.left.height-this.right.height}get height(){return Math.max(this.left.height,this.right.height)+1}*keys(){yield*this.left.keys(),yield this.key,yield*this.right.keys()}*values(){yield*this.left.values(),yield this.value,yield*this.right.values()}*entries(){yield*this.left.entries(),yield[this.key,this.value],yield*this.right.entries()}};s(re,"Node");Zs.__decorate([Qs.lazy],re.prototype,"balance",null);Zs.__decorate([Qs.lazy],re.prototype,"height",null);function mi(r){let e=r.balance;return e==-2?ll(r):e==2?cl(r):r}s(mi,"balance");function cl(r){let e=r.left.balance;return e==-1?ul(r):e==1?ea(r):r}s(cl,"balanceLeft");function ll(r){let e=r.right.balance;return e==1?dl(r):e==-1?ta(r):r}s(ll,"balanceRight");function ea(r){return na(r)}s(ea,"balanceLeftLeft");function ul(r){let e=ra(r.left);return ea(r.replaceLeft(e))}s(ul,"balanceLeftRight");function ta(r){return ra(r)}s(ta,"balanceRightRight");function dl(r){let e=na(r.right);return ta(r.replaceRight(e))}s(dl,"balanceRightLeft");function ra(r){let e=r.right,t=e.left,n=r.replaceRight(t);return e.replaceLeft(n)}s(ra,"rotateLeft");function na(r){let e=r.left,t=e.right,n=r.replaceLeft(t);return e.replaceRight(n)}s(na,"rotateRight")});var le=L(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});y.WindowedTransducer=y.windowed=y.unique=y.UniqueTransducer=y.dedupe=y.DedupTransducer=y.sort=y.SortTransducer=y.takeWhile=y.TakeWhileTransducer=y.dropWhile=y.DropWhileTransducer=y.drop=y.DropTransducer=y.take=y.TakeTransducer=y.reduce=y.scan=y.ScanTransducer=y.decompose=y.compose=y.CompositeTransducer=y.find=y.reject=y.filter=y.FilterTransducer=y.flatMap=y.FlatMapTransducer=y.zipWithIndex=y.zip=y.ZipTransducer=y.map=y.MapTransducer=y.last=y.LastTransducer=y.first=y.FirstTransducer=y.transducer=y.identity=y.IdentityTransducer=void 0;var m=fe(),We=N(),ia=yi(),pl=Lt(),Dr=class{async_(e){return e}sync(e){return e}};s(Dr,"IdentityTransducer");y.IdentityTransducer=Dr;function sa(){return new Dr}s(sa,"identity");y.identity=sa;y.transducer=sa;var Pr=class{async_(e){return m.__asyncGenerator(this,arguments,s(function*(){var n,i;try{for(var a=m.__asyncValues(e),o;o=yield m.__await(a.next()),!o.done;){let c=o.value;return yield m.__await(yield yield m.__await(c))}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&(yield m.__await(i.call(a)))}finally{if(n)throw n.error}}},"async_1"))}*sync(e){for(let t of e)return yield t}};s(Pr,"FirstTransducer");y.FirstTransducer=Pr;function aa(){return new Pr}s(aa,"first");y.first=aa;var Ar=class{async_(e){return m.__asyncGenerator(this,arguments,s(function*(){var n,i;let a;try{for(var o=m.__asyncValues(e),c;c=yield m.__await(o.next()),!c.done;)a=c.value}catch(l){n={error:l}}finally{try{c&&!c.done&&(i=o.return)&&(yield m.__await(i.call(o)))}finally{if(n)throw n.error}}a!==void 0&&(yield yield m.__await(a))},"async_2"))}*sync(e){let t;for(t of e);t!==void 0&&(yield t)}};s(Ar,"LastTransducer");y.LastTransducer=Ar;function oa(){return new Ar}s(oa,"last");y.last=oa;var Tr=class{constructor(e){this.mapper=e}async_(e){return m.__asyncGenerator(this,arguments,s(function*(){var n,i;try{for(var a=m.__asyncValues(e),o;o=yield m.__await(a.next()),!o.done;){let c=o.value;yield yield m.__await(this.mapper(c))}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&(yield m.__await(i.call(a)))}finally{if(n)throw n.error}}},"async_3"))}*sync(e){for(let t of e)yield this.mapper(t)}};s(Tr,"MapTransducer");y.MapTransducer=Tr;function fl(r){return new Tr(r)}s(fl,"map");y.map=fl;var jt=class{constructor(e){this.other=e}async_(e){return m.__asyncGenerator(this,arguments,s(function*(){if(!We.isAsyncIterable(this.other))throw new Error("Unsupported operation exception");let n=e[Symbol.asyncIterator](),i=this.other[Symbol.asyncIterator]();for(;;){let[a,o]=yield m.__await(Promise.all([n.next(),i.next()]));if(a.done||o.done)return yield m.__await(void 0);yield yield m.__await([a.value,o.value])}},"async_4"))}*sync(e){if(!We.isIterable(this.other))throw new Error("Unsupported operation exception");let t=e[Symbol.iterator](),n=this.other[Symbol.iterator]();for(;;){let i=t.next(),a=n.next();if(i.done||a.done)return;yield[i.value,a.value]}}};s(jt,"ZipTransducer");y.ZipTransducer=jt;function ml(r){return new jt(r)}s(ml,"zip");y.zip=ml;function yl(){return new jt(pl.range(0))}s(yl,"zipWithIndex");y.zipWithIndex=yl;var Cr=class{constructor(e){this.mapper=e}async_(e){return m.__asyncGenerator(this,arguments,s(function*(){var n,i;try{for(var a=m.__asyncValues(e),o;o=yield m.__await(a.next()),!o.done;){let c=o.value;yield m.__await(yield*m.__asyncDelegator(m.__asyncValues(this.mapper(c))))}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&(yield m.__await(i.call(a)))}finally{if(n)throw n.error}}},"async_5"))}*sync(e){for(let t of e)yield*this.mapper(t)}};s(Cr,"FlatMapTransducer");y.FlatMapTransducer=Cr;function gl(r){return new Cr(r)}s(gl,"flatMap");y.flatMap=gl;var Ft=class{constructor(e){this.predicate=e}async_(e){return m.__asyncGenerator(this,arguments,s(function*(){var n,i;try{for(var a=m.__asyncValues(e),o;o=yield m.__await(a.next()),!o.done;){let c=o.value;this.predicate(c)&&(yield yield m.__await(c))}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&(yield m.__await(i.call(a)))}finally{if(n)throw n.error}}},"async_6"))}*sync(e){for(let t of e)this.predicate(t)&&(yield t)}};s(Ft,"FilterTransducer");y.FilterTransducer=Ft;function ca(r){return new Ft(r)}s(ca,"filter");y.filter=ca;function hl(r){return new Ft(e=>!r(e))}s(hl,"reject");y.reject=hl;function bl(r){return gi(ca(r),aa())}s(bl,"find");y.find=bl;var Ht=class{constructor(e,t){this.a=e,this.b=t}async_(e){return this.b.async_(this.a.async_(e))}sync(e){return this.b.sync(this.a.sync(e))}};s(Ht,"CompositeTransducer");y.CompositeTransducer=Ht;function gi(r,e){return new Ht(r,e)}s(gi,"compose");y.compose=gi;function*hi(r){r instanceof Ht?(yield*hi(r.a),yield*hi(r.b)):yield r}s(hi,"decompose");y.decompose=hi;var Or=class{constructor(e,t){this.reducer=e,this.seed=t}async_(e){return m.__asyncGenerator(this,arguments,s(function*(){var n,i;let a=this.seed;yield yield m.__await(a);try{for(var o=m.__asyncValues(e),c;c=yield m.__await(o.next()),!c.done;){let l=c.value;yield yield m.__await(a=this.reducer(a,l))}}catch(l){n={error:l}}finally{try{c&&!c.done&&(i=o.return)&&(yield m.__await(i.call(o)))}finally{if(n)throw n.error}}},"async_7"))}*sync(e){let t=this.seed;yield t;for(let n of e)yield t=this.reducer(t,n)}};s(Or,"ScanTransducer");y.ScanTransducer=Or;function la(r,e){return new Or(r,e)}s(la,"scan");y.scan=la;function vl(r,e){return gi(la(r,e),oa())}s(vl,"reduce");y.reduce=vl;var Rr=class{constructor(e){if(this.count=e,typeof e=="undefined")throw new Error("Count can not be undefined")}async_(e){return m.__asyncGenerator(this,arguments,s(function*(){var n,i;if(this.count<1)return yield m.__await(void 0);try{for(var a=m.__asyncValues(e),o;o=yield m.__await(a.next()),!o.done;){let c=o.value;if(yield yield m.__await(c),--this.count<1)return yield m.__await(void 0)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&(yield m.__await(i.call(a)))}finally{if(n)throw n.error}}},"async_8"))}*sync(e){if(!(this.count<1)){for(let t of e)if(yield t,--this.count<1)return}}};s(Rr,"TakeTransducer");y.TakeTransducer=Rr;function wl(r){return new Rr(r)}s(wl,"take");y.take=wl;var kr=class{constructor(e){if(this.count=e,typeof e=="undefined")throw new Error("Count can not be undefined")}async_(e){return m.__asyncGenerator(this,arguments,s(function*(){var n,i;try{for(var a=m.__asyncValues(e),o;o=yield m.__await(a.next()),!o.done;){let c=o.value;--this.count<0&&(yield yield m.__await(c))}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&(yield m.__await(i.call(a)))}finally{if(n)throw n.error}}},"async_9"))}*sync(e){for(let t of e)--this.count<0&&(yield t)}};s(kr,"DropTransducer");y.DropTransducer=kr;function xl(r){return new kr(r)}s(xl,"drop");y.drop=xl;var Er=class{constructor(e){this.predicate=e}async_(e){return m.__asyncGenerator(this,arguments,s(function*(){var n,i;let a=!0;try{for(var o=m.__asyncValues(e),c;c=yield m.__await(o.next()),!c.done;){let l=c.value;a&&(a=this.predicate(l)),a||(yield yield m.__await(l))}}catch(l){n={error:l}}finally{try{c&&!c.done&&(i=o.return)&&(yield m.__await(i.call(o)))}finally{if(n)throw n.error}}},"async_10"))}*sync(e){let t=!0;for(let n of e)t&&(t=this.predicate(n)),t||(yield n)}};s(Er,"DropWhileTransducer");y.DropWhileTransducer=Er;function Sl(r){return new Er(r)}s(Sl,"dropWhile");y.dropWhile=Sl;var Ir=class{constructor(e){this.predicate=e}async_(e){return m.__asyncGenerator(this,arguments,s(function*(){var n,i;try{for(var a=m.__asyncValues(e),o;o=yield m.__await(a.next()),!o.done;){let c=o.value;if(this.predicate(c))yield yield m.__await(c);else return yield m.__await(void 0)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&(yield m.__await(i.call(a)))}finally{if(n)throw n.error}}},"async_11"))}*sync(e){for(let t of e)if(this.predicate(t))yield t;else return}};s(Ir,"TakeWhileTransducer");y.TakeWhileTransducer=Ir;function Dl(r){return new Ir(r)}s(Dl,"takeWhile");y.takeWhile=Dl;var Mr=class{constructor(e){this.comparator=e}async_(e){return m.__asyncGenerator(this,arguments,s(function*(){let n=yield m.__await(We.array(e));n.sort(this.comparator),yield m.__await(yield*m.__asyncDelegator(m.__asyncValues(n)))},"async_12"))}*sync(e){let t=We.array(e);t.sort(this.comparator),yield*t}};s(Mr,"SortTransducer");y.SortTransducer=Mr;function Pl(r=We.ascending){return new Mr(r)}s(Pl,"sort");y.sort=Pl;var Lr=class{constructor(e){this.comparator=e}async_(e){return m.__asyncGenerator(this,arguments,s(function*(){var n,i;let a;try{for(var o=m.__asyncValues(e),c;c=yield m.__await(o.next()),!c.done;){let l=c.value;typeof a=="undefined"?yield yield m.__await(l):this.comparator(l,a)!==0&&(yield yield m.__await(l)),a=l}}catch(l){n={error:l}}finally{try{c&&!c.done&&(i=o.return)&&(yield m.__await(i.call(o)))}finally{if(n)throw n.error}}},"async_13"))}*sync(e){let t;for(let n of e)typeof t=="undefined"?yield n:this.comparator(n,t)!==0&&(yield n),t=n}};s(Lr,"DedupTransducer");y.DedupTransducer=Lr;function Al(r=We.ascending){return new Lr(r)}s(Al,"dedupe");y.dedupe=Al;var jr=class{constructor(e){this.comparator=e}async_(e){return m.__asyncGenerator(this,arguments,s(function*(){var n,i;let a=ia.AVLTree.empty(this.comparator);try{for(var o=m.__asyncValues(e),c;c=yield m.__await(o.next()),!c.done;){let l=c.value;a.contains(l)||(a=a.insert(l,void 0),yield yield m.__await(l))}}catch(l){n={error:l}}finally{try{c&&!c.done&&(i=o.return)&&(yield m.__await(i.call(o)))}finally{if(n)throw n.error}}},"async_14"))}*sync(e){let t=ia.AVLTree.empty(this.comparator);for(let n of e)t.contains(n)||(t=t.insert(n,void 0),yield n)}};s(jr,"UniqueTransducer");y.UniqueTransducer=jr;function Tl(r=We.ascending){return new jr(r)}s(Tl,"unique");y.unique=Tl;function Cl(r,e=1,t=!1){return new Fr(r,e,t)}s(Cl,"windowed");y.windowed=Cl;var Fr=class{constructor(e,t,n){this.size=e,this.step=t,this.remainder=n}async_(e){return m.__asyncGenerator(this,arguments,s(function*(){var n,i;let a=[],o=0;try{for(var c=m.__asyncValues(e),l;l=yield m.__await(c.next()),!l.done;){let f=l.value;if(o>0){o--;continue}a.push(f),a.length===this.size&&(yield yield m.__await([...a]),a=a.slice(this.step),this.step>this.size&&(o=this.step-this.size))}}catch(f){n={error:f}}finally{try{l&&!l.done&&(i=c.return)&&(yield m.__await(i.call(c)))}finally{if(n)throw n.error}}this.remainder&&(yield yield m.__await([...a]))},"async_15"))}*sync(e){let t=[],n=0;for(let i of e){if(n>0){n--;continue}t.push(i),t.length===this.size&&(yield[...t],t=t.slice(this.step),this.step>this.size&&(n=this.step-this.size))}this.remainder&&(yield[...t])}};s(Fr,"WindowedTransducer");y.WindowedTransducer=Fr});var Oe=L(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.caching=at.cache=void 0;function Il(r,e,t){if(typeof t.value!="function")throw new Error("@cache can only decorate methods");let n=new WeakMap;function i(a){let o=n.get(a);if(o)return o;let c=new Map;return n.set(a,c),c}return s(i,"getCache"),Object.defineProperty(r,e,Object.assign(Object.assign({},t),{value:function(...a){let o=JSON.stringify(a),c=i(this),l=c.get(o);if(typeof l!="undefined"||c.has(o))return l;let f=t.value.call(this,...a);return c.set(o,f),f}}))}s(Il,"cache");at.cache=Il;function Ml(r){let e=new Map;return function(...t){let n=JSON.stringify(t),i=e.get(n);if(typeof i!="undefined"||e.has(n))return i;let a=r(...t);return e.set(n,a),a}}s(Ml,"caching");at.caching=Ml});var Ci=L(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.yearOf=H.dayOf=H.monthOf=H.Month=H.weekdayOf=H.Weekday=H.defaultOptions=H.date=void 0;function Wl(r,e,t){if(e&&(e<1||e>12))throw new Error(`Invalid month ${e}`);if(t&&(t<1||t>31))throw new Error(`Invalid day ${t}`);let n=new Date(Date.UTC(r,e?e-1:0,t||1));if(r!==ka(n))throw new Error(`Invalid year ${r}`);if(e&&e!==Oa(n))throw new Error(`Invalid month ${e}`);if(t&&t!==Ra(n))throw new Error(`Invalid day ${t}`);return n}s(Wl,"date");H.date=Wl;H.defaultOptions={year:"numeric",month:"numeric",day:"numeric",weekday:"long"};var Ca;(function(r){r[r.Monday=1]="Monday",r[r.Tuesday=2]="Tuesday",r[r.Wednesday=3]="Wednesday",r[r.Thursday=4]="Thursday",r[r.Friday=5]="Friday",r[r.Saturday=6]="Saturday",r[r.Sunday=7]="Sunday"})(Ca=H.Weekday||(H.Weekday={}));function zl(r){let e=r.getUTCDay();return e===0?Ca.Sunday:e}s(zl,"weekdayOf");H.weekdayOf=zl;var Jl;(function(r){r[r.January=1]="January",r[r.February=2]="February",r[r.March=3]="March",r[r.April=4]="April",r[r.May=5]="May",r[r.June=6]="June",r[r.July=7]="July",r[r.August=8]="August",r[r.September=9]="September",r[r.October=10]="October",r[r.November=11]="November",r[r.December=12]="December"})(Jl=H.Month||(H.Month={}));function Oa(r){return r.getUTCMonth()+1}s(Oa,"monthOf");H.monthOf=Oa;function Ra(r){return r.getUTCDate()}s(Ra,"dayOf");H.dayOf=Ra;function ka(r){return r.getUTCFullYear()}s(ka,"yearOf");H.yearOf=ka});var Ke=L(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.splitByRegex=j.characters=j.removeUnneededUnicodeCharacters=j.different=j.suffix=j.prefix=j.replace=j.isNonMatch=j.isNamedMatch=j.NamedRegExp=void 0;var Yl=/\(\?<([^>]+)>/g,qt=class{constructor(e,t){this.pattern=e,this.names=t}static create(e,t){let n=[],i=Ea(Yl,e,a=>(n.push(a[1]),"("));return new qt(new RegExp(i,t),n)}match(e){let t=e.match(this.pattern);return t?this.namedMatch(t):[]}namedMatch(e){return e.slice(1).map((n,i)=>({name:this.names[i],value:n}))}*exec(e){let t=new RegExp(this.pattern.source,"g");for(;;){let n=t.exec(e);if(!n)break;yield this.namedMatch(n)}}*iterate(e){let t=0,n=new RegExp(this.pattern.source,"g");for(;;){let a=n.exec(e);if(!a)break;let o=e.substring(t,a.index);o&&(yield o),yield this.namedMatch(a),t=n.lastIndex}let i=e.substring(t);i&&(yield i)}toString(){return`Pattern: ${this.pattern} Names: ${JSON.stringify(this.names)}`}toJSON(){return{pattern:this.pattern.source,names:this.names}}};s(qt,"NamedRegExp");j.NamedRegExp=qt;function Xl(r){return Array.isArray(r)}s(Xl,"isNamedMatch");j.isNamedMatch=Xl;function Zl(r){return typeof r=="string"}s(Zl,"isNonMatch");j.isNonMatch=Zl;function Ea(r,e,t,n=i=>i){let i=[],a=0,o;for(;(o=r.exec(e))!=null;)i.push(n(e.substring(a,o.index))),i.push(t(o)),a=r.lastIndex;return i.push(n(e.substring(a))),i.join("")}s(Ea,"replace");j.replace=Ea;function Oi(r,e){for(let t=0;t<r.length;t++){let n=r[t],i=e[t];if(n!=i)return t}return r.length}s(Oi,"prefix");j.prefix=Oi;function Ia(r,e){return Oi([...r].reverse(),[...e].reverse())}s(Ia,"suffix");j.suffix=Ia;function Ql(r){let e=r.map(La),[t,n]=e.reduce(([i,a],o,c)=>{let l=c<e.length-1?e[c+1]:e[0],f=Oi(o,l),x=Ia(o,l);return[f<i?f:i,x<a?x:a]},[Number.MAX_VALUE,Number.MAX_VALUE]);return e.map(i=>i.slice(t,n?-n:void 0).join(""))}s(Ql,"different");j.different=Ql;function Ma(r){let e=r.charCodeAt(0);return e!=8206&&e!=8207}s(Ma,"removeUnneededUnicodeCharacters");j.removeUnneededUnicodeCharacters=Ma;function La(r){return eu(r).filter(Ma)}s(La,"characters");j.characters=La;function eu(r){return typeof Symbol=="function"&&r[Symbol.iterator]?[...r]:ja(r)}s(eu,"split");var tu=/(?=(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/;function ja(r){return r.split(tu)}s(ja,"splitByRegex");j.splitByRegex=ja});var Ha=L(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.Row=z.PrefixTree=z.DEFAULT_COMPARATOR=z.pair=z.Trie=z.TrieFactory=void 0;var ct=fe(),lt=He(),ru=Ke(),_t=N(),nu=yi(),we=le(),ut=Lt(),Je=class{constructor(e=_t.ascending){this.comparator=e}get avlTree(){return nu.AVLTree.empty(this.comparator)}get empty(){return new qe(this,void 0,this.avlTree)}create(e,t=this.avlTree){return new qe(this,e,t)}construct(e,t){if(e.length===0)return this.create(t);let[n,...i]=e;return this.create(void 0,this.avlTree.insert(n,this.construct(i,t)))}};s(Je,"TrieFactory");ct.__decorate([lt.lazy],Je.prototype,"avlTree",null);ct.__decorate([lt.lazy],Je.prototype,"empty",null);z.TrieFactory=Je;var qe=class{constructor(e=new Je,t,n=e.avlTree){this.factory=e,this.value=t,this.children=n}contains(e){return!!this.lookup(e)}get isEmpty(){return!this.value&&this.children.isEmpty}lookup(e){if(e.length==0)return this.value;let[t,...n]=e,i=this.children.lookup(t);return i&&i.lookup(n)}match(e){if(e.length==0)return _t.single(this.children.values(),we.reduce((a,o)=>a.concat(o.match(e)),this.value?[this.value]:[]));let[t,...n]=e,i=this.children.lookup(t);return i?i.match(n):[]}insert(e,t){if(e.length===0)return this.factory.create(t,this.children);let[n,...i]=e,a=this.children.lookup(n);return a?a=a.insert(i,t):a=this.factory.construct(i,t),this.factory.create(this.value,this.children.insert(n,a))}delete(e){return this.insert(e,void 0)}entries(){function*e(n,[i,a]){n=[...n,i],a.value&&(yield Ri(n,a.value)),yield*t(a,n)}s(e,"recurse");function t(n,i){return ut.sequence(n.children.entries(),we.flatMap(a=>e(i,a)))}return s(t,"recurseChildren"),t(this,[])}keys(){return ut.sequence(this.entries(),we.map(([e])=>e))}values(){return ut.sequence(this.entries(),we.map(([,e])=>e))}get height(){return _t.single(this.children.values(),we.reduce((e,t)=>Math.max(e,t.height+1),0))}toString(){return(this.value?`(${this.value})`:"")+this.children}};s(qe,"Trie");ct.__decorate([lt.lazy],qe.prototype,"isEmpty",null);ct.__decorate([lt.lazy],qe.prototype,"height",null);z.Trie=qe;function Ri(r,e){return[r,e]}s(Ri,"pair");z.pair=Ri;var iu=new Intl.Collator(void 0,{usage:"sort",sensitivity:"base"}).compare;z.DEFAULT_COMPARATOR=iu;var _e=class{constructor(e=ru.characters,t=z.DEFAULT_COMPARATOR,n=new qe(new Je(t))){this.converter=e,this.comparator=t,this.trie=n}contains(e){return!!this.lookup(e)}get isEmpty(){return this.trie.isEmpty}match(e){return this.trie.match(this.converter(e))}lookup(e){return this.trie.lookup(this.converter(e))}insert(e,t=e){return new _e(this.converter,this.comparator,this.trie.insert(this.converter(e),t))}delete(e){return new _e(this.converter,this.comparator,this.trie.insert(this.converter(e),void 0))}entries(){return ut.sequence(this.trie.entries(),we.map(([e,t])=>Ri(e.join(""),t)))}keys(){return ut.sequence(this.entries(),we.map(([e])=>e))}values(){return ut.sequence(this.entries(),we.map(([,e])=>e))}get height(){return this.trie.height}search(e,t){let n=Ye.create(this.converter(e),this.comparator);return _t.single(this.trie.children.entries(),we.reduce((i,[a,o])=>i.concat(Fa(o,a,n,t)),[]))}};s(_e,"PrefixTree");ct.__decorate([lt.lazy],_e.prototype,"isEmpty",null);ct.__decorate([lt.lazy],_e.prototype,"height",null);z.PrefixTree=_e;function Fa(r,e,t,n){let i=t.next(e),a=[];return i.distance<=n&&r.value&&a.push({value:r.value,distance:i.distance}),i.minimal<=n?_t.single(r.children.entries(),we.reduce((o,[c,l])=>o.concat(Fa(l,c,i,n)),a)):a}s(Fa,"recurse");var Ye=class{constructor(e,t,n){this.keys=e,this.values=t,this.comparator=n}static create(e,t){let n=[];for(let i=0;i<=e.length;i++)n[i]=i;return new Ye(e,n,t)}next(e){let t=this.keys.reduce((n,i,a)=>(n[a+1]=this.comparator(i,e)===0?this.values[a]:1+Math.min(n[a],this.values[a],this.values[a+1]),n),[this.values[0]+1]);return new Ye(this.keys,t,this.comparator)}get distance(){return this.values[this.keys.length]}get minimal(){return Math.min(...this.values)}};s(Ye,"Row");z.Row=Ye});var pt=L(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.unique=dt.flatten=void 0;function su(r){return r.reduce((e,t)=>e.concat(t),[])}s(su,"flatten");dt.flatten=su;function Ka(r){return typeof r=="function"&&r.toString().includes("native code")}s(Ka,"isNativeFunction");var au=Ka(Set)&&new Set([1]).size===1;function ou(r){if(Ka(Array.from)&&au)return Array.from(new Set(r));let e=[];for(let t of r)e.indexOf(t)<0&&e.push(t);return e}s(ou,"unique");dt.unique=ou});var qa=L(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.PreferredCurrencies=void 0;var q=class{static dollarSymbol(e){return e&&q.dollarCountries[e]||"USD"}static poundSymbol(e){return e&&q.poundCountries[e]||"GBP"}static yenSymbol(e){return e&&q.yenCountries[e]||"JPY"}static kroneSymbol(e){return e&&q.kroneCountries[e]||"DKK"}static rupeeSymbol(e){return e&&q.rupeeCountries[e]||"INR"}static for(e){return[q.dollarSymbol(e),q.poundSymbol(e),q.yenSymbol(e),q.kroneSymbol(e),q.rupeeSymbol(e)]}};s(q,"PreferredCurrencies");Br.PreferredCurrencies=q;q.dollarCountries={AG:"XCD",AR:"ARS",AU:"AUD",BS:"BSD",BB:"BBD",BZ:"BZD",BM:"BMD",BN:"BND",CA:"CAD",CO:"COP",CL:"CLP",CU:"CUP",DM:"XCD",DO:"DOP",EC:"USD",FM:"USD",KY:"KYD",FJ:"FJD",GD:"XCD",GY:"GYD",HK:"HKD",JM:"JMD",KI:"AUD",KN:"XCD",LC:"XCD",LR:"LRD",MH:"USD",MX:"MXN",NA:"NAD",NZ:"NZD",SG:"SGD",SB:"SBD",SR:"SRD",SV:"USD",TL:"USD",TW:"TWD",TT:"TTD",TV:"AUD",US:"USD",UY:"UYU",VC:"XCD",ZW:"USD"};q.poundCountries={EG:"EGP",FK:"FKP",GB:"GBP",GI:"GIP",GG:"GBP",IM:"GBP",JE:"GBP",LB:"LBP",SH:"SHP",SS:"SSP",SD:"SDG",SY:"SYP"};q.yenCountries={CN:"CNY",JP:"JPY"};q.kroneCountries={DK:"DKK",FO:"DKK",GL:"DKK",IS:"ISK",NO:"NOK",SE:"SEK"};q.rupeeCountries={IN:"INR",ID:"IDR",MU:"MUR",NP:"NPR",PK:"PKR",LK:"LKR"}});var mt=L(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.get=ft.identity=void 0;function cu(){return r=>r}s(cu,"identity");ft.identity=cu;function lu(r,e=void 0){try{let t=r();return typeof t=="undefined"?e:t}catch(t){return e}}s(lu,"get");ft.get=lu});var Re=L(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.numberOf=g.inferDecimalSeparator=g.numberParser=g.NumberParser=g.decimalSeparator=g.isDecimalSeparator=g.separatorsOf=g.mapIgnoreError=g.numberPattern=g.Spaces=g.digits=g.numberFormatter=g.Numerals=g.atBoundaryOnly=g.cleanValue=g.extraDelimiters=g.boundaryDelimiters=g.CachingParser=g.all=g.AllParser=g.parsers=g.or=g.OrParser=g.infer=g.prefer=g.uniqueMatch=g.DatumLookup=g.FailParser=g.IdentityParser=g.mappingParser=g.MappingParser=g.preProcess=g.PreProcessor=g.namedRegexParser=g.NamedRegexParser=void 0;var _a=fe(),yt=Ke(),Ua=Ha(),Xe=pt(),Ut=N(),$t=le(),gt=Oe(),uu=qa(),$a=mt(),Gr=class{constructor(e){this.regex=e}parse(e){let t=this.regex.match(e);if(t.length===0)throw new Error(`Generated regex ${this.regex.pattern} did not match "${e}" `);return t}parseAll(e){return Ut.array(this.regex.exec(e))}};s(Gr,"NamedRegexParser");g.NamedRegexParser=Gr;function du(r){return new Gr(r)}s(du,"namedRegexParser");g.namedRegexParser=du;var Vr=class{constructor(e,t){this.delegate=e,this.mapper=t}parse(e){return this.delegate.parse(this.mapper(e))}parseAll(e){return this.delegate.parseAll(this.mapper(e))}};s(Vr,"PreProcessor");g.PreProcessor=Vr;function pu(r,e){return new Vr(r,e)}s(pu,"preProcess");g.preProcess=pu;var Wr=class{constructor(e,t){this.parser=e,this.mapper=t}parse(e){return this.mapper(this.parser.parse(e))}parseAll(e){return e?Ut.array(this.parser.parseAll(e),$t.flatMap(t=>{try{return[this.mapper(t)]}catch(n){return[]}})):[]}};s(Wr,"MappingParser");g.MappingParser=Wr;function fu(r,e){return new Wr(r,e)}s(fu,"mappingParser");g.mappingParser=fu;var ki=class{parse(e){return e}parseAll(e){return[e]}};s(ki,"IdentityParser");g.IdentityParser=ki;var Ei=class{parse(e){throw new Error}parseAll(e){return[]}};s(Ei,"FailParser");g.FailParser=Ei;var zr=class{constructor(e,t=Ua.DEFAULT_COMPARATOR){this.data=e,this.prefixTree=this.data.reduce((n,i)=>{let a=n.lookup(i.name)||[];return a.push(i),n.insert(i.name,a)},new Ua.PrefixTree(void 0,t))}parse(e,t=Na){let n=t(this.prefixTree,e);if(typeof n=="undefined")throw new Error(`${this.constructor.name} - Unable to parse: ${e}`);return n}get pattern(){return`[${this.characters.join("")}]{1,${this.max}}`}get max(){return this.data.reduce((e,t)=>{let n=yt.characters(t.name).length;return Math.max(e,n)},Number.MIN_VALUE)}get characters(){return Xe.unique(Xe.flatten(this.data.map(e=>e.name).map(yt.characters))).sort()}};s(zr,"DatumLookup");g.DatumLookup=zr;function Na(r,e){let t=Xe.flatten(r.match(e)),n=Xe.unique(t.map(i=>i.value));if(n.length==1)return n[0]}s(Na,"uniqueMatch");g.uniqueMatch=Na;function Ba(...r){if(r.filter(Boolean).length!==0)return(e,t)=>{let n=e.lookup(t)||[],i=Xe.unique(n.map(o=>o.value));if(i.length===0)return;if(i.length===1)return i[0];let[a]=i.filter(o=>r.indexOf(o)!==-1);return a}}s(Ba,"prefer");g.prefer=Ba;function mu(r){return r?r.split(/[-_]/).filter(Boolean):[]}s(mu,"localeParts");function yu(r){let[,e]=mu(r);return Ba(...uu.PreferredCurrencies.for(e))}s(yu,"infer");g.infer=yu;var Jr=class{constructor(e){this.parsers=e}parse(e){for(let t of this.parsers)try{let n=t.parse(e);if(n)return n}catch(n){}throw new Error(`Unable to parse value: ${e}`)}parseAll(e){for(let t of this.parsers){let n=t.parseAll(e);if(n.length>0)return n}return[]}};s(Jr,"OrParser");g.OrParser=Jr;function Ga(...r){return new Jr(r)}s(Ga,"or");g.or=Ga;function gu(...r){return Ga(...r)}s(gu,"parsers");g.parsers=gu;var Yr=class{constructor(e){this.parsers=e}parse(e){throw new Error("Not supported, please call AllParser.parseAll")}parseAll(e){return Xe.flatten(this.parsers.map(t=>t.parseAll(e)))}};s(Yr,"AllParser");g.AllParser=Yr;function hu(...r){return new Yr(r)}s(hu,"all");g.all=hu;var Nt=class{constructor(e){this.parser=e}parse(e){return this.parser.parse(e)}parseAll(e){return this.parser.parseAll(e)}};s(Nt,"CachingParser");_a.__decorate([gt.cache],Nt.prototype,"parse",null);_a.__decorate([gt.cache],Nt.prototype,"parseAll",null);g.CachingParser=Nt;g.boundaryDelimiters=",.";g.extraDelimiters=" -/";var bu=new RegExp(`[${g.boundaryDelimiters}]$`);function vu(r){return r.replace(bu,"")}s(vu,"cleanValue");g.cleanValue=vu;function wu(r){return`(?:^|\\s)${r}(?=[\\s${g.boundaryDelimiters}]|$)`}s(wu,"atBoundaryOnly");g.atBoundaryOnly=wu;var ue=class extends zr{constructor(e,t){super(e);this.locale=t}static get(e,t=[]){return ue.cache[e]=ue.cache[e]||ue.create(e,t)}static create(e,t=[]){return new ue([...ue.generateData(e),...t],e)}static generateData(e){let t=g.numberFormatter(e).format(1234567890).replace(/[,. '٬٫]/g,"");return Ut.array(yt.characters(t),$t.zip([1,2,3,4,5,6,7,8,9,0]),$t.map(([n,i])=>({name:n,value:i})))}parse(e){let t=Li(e);return isNaN(t)?super.parse(e):t}format(e){return g.numberFormatter(this.locale).format(e)}};s(ue,"Numerals");g.Numerals=ue;ue.cache={};g.numberFormatter=gt.caching(r=>new Intl.NumberFormat(r,{useGrouping:!1}));g.digits=gt.caching(r=>{let e=ue.get(r).characters.join("");return e==="0123456789"?"\\d":`\\d${e}`});var de=class{static handle(e){return de.codes.indexOf(e)!=-1?de.spaces:e}};s(de,"Spaces");g.Spaces=de;de.codes=[32,160,8239].map(r=>String.fromCharCode(r));de.spaces=de.codes.join("");de.pattern=new RegExp(`[${de.spaces}]`,"g");var Va=`\u066C\u066B,.'\u2019\u2018${de.spaces}`;g.numberPattern=gt.caching(r=>{let e=g.digits(r);return`-?(?:[${e}]+[${Va}])*[${e}]+`});function Wa(r){return $t.flatMap(e=>{try{return[r(e)]}catch(t){return[]}})}s(Wa,"mapIgnoreError");g.mapIgnoreError=Wa;var xu=yt.NamedRegExp.create(`(?<separator>[${Va}])`);function za(r){return Ut.array(xu.exec(r),$t.map(([e])=>e.value))}s(za,"separatorsOf");g.separatorsOf=za;function Ii(r){return r&&typeof r=="string"&&r==="."||r===","||r==="\u066B"}s(Ii,"isDecimalSeparator");g.isDecimalSeparator=Ii;function Ja(r){if(Ii(r))return r;throw new Error(`Invalid decimal separator${r}`)}s(Ja,"decimalSeparator");g.decimalSeparator=Ja;var Xr=class{constructor(e,t){this.decimalSeparator=e,this.locale=t,this.strictNumberPattern=new RegExp(`^${g.numberPattern(t)}$`),this.globalNumberPattern=yt.NamedRegExp.create(`(?<number>${g.numberPattern(t)})`,"g")}parse(e){if(!this.strictNumberPattern.test(e))throw new Error(`Unable to parse '${e}'`);return this.parseSingle(e)}parseAll(e){return Ut.array(this.globalNumberPattern.exec(e),Wa(([t])=>this.parseSingle(t.value.trim())))}parseSingle(e,t=this.decimalSeparator(e)){let n=za(e);if(n.length===0)return this.numberOf(e,t);let a=n[n.length-1]===t?n.slice(0,n.length-1):n;if(a.indexOf(t)!==-1)throw new Error(`Unable to parse '${e}'`);if(Xe.unique(a).length>1)throw new Error(`Unable to parse '${e}'`);return this.numberOf(e,t)}convert(e,t){let n=ue.get(this.locale);return yt.characters(e).map(i=>{if(i===t)return".";if(i==="-")return"-";let a=$a.get(()=>n.parse(i));return isNaN(a)?"":a.toString()}).join("")}numberOf(e,t){let n=this.convert(e,t),i=Li(n);if(isNaN(i))throw new Error(`Unable to parse '${e}'`);return i}};s(Xr,"NumberParser");g.NumberParser=Xr;function Mi(r,e="en"){return r?Ii(r)?new Xr(t=>r,e):Mi(g.inferDecimalSeparator(r),r):Mi(e)}s(Mi,"numberParser");g.numberParser=Mi;g.inferDecimalSeparator=gt.caching(r=>$a.get(()=>Ja(new Intl.NumberFormat(r).formatToParts(.1).find(e=>e.type==="decimal").value),"."));function Li(r){return!r||r.trim().length===0?NaN:Number(r)}s(Li,"numberOf");g.numberOf=Li});var Fi=L(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.DateParts=G.formatData=G.hasNativeToParts=G.SimpleFormat=G.format=G.ImprovedDateTimeFormat=G.Formatters=void 0;var ae=fe(),B=Ze(),xe=He(),Zr=Ke(),Su=le(),Du=N(),ji=Oe(),Ya=Re(),Se=class{static create(e,t=B.defaultOptions){return typeof t=="string"?new Bt(e,t):typeof t.format=="string"?new Bt(e,t.format):new ht(e,t)}static isNativelySupported(e,t=B.defaultOptions){let n=this.dateTimeFormat(e,t);return typeof n.formatToParts=="function"&&n.formatToParts(new Date).length>0}static dateTimeFormat(e,t){return new Intl.DateTimeFormat(e,Object.assign(Object.assign({},t),{timeZone:"UTC"}))}};s(Se,"Formatters");ae.__decorate([ji.cache],Se,"create",null);ae.__decorate([ji.cache],Se,"isNativelySupported",null);G.Formatters=Se;var ht=class{constructor(e,t,n=ht.create(e,t)){this.locale=e,this.options=t,this.delegate=n}static create(e,t){let n=Object.assign({},t),i=Object.keys(n).length,a=Se.dateTimeFormat(e,n);if(Object.keys(n).length!=i)throw new Error(`Unsupported DateTimeFormat options provided: ${JSON.stringify(t)}`);return a}format(e){return Zr.characters(this.delegate.format(e)).join("")}formatToParts(e=new Date){return Se.isNativelySupported(this.locale,this.options)?this.delegate.formatToParts(e):_.create(this.locale,this.options).toParts(typeof e=="number"?new Date(e):e)}resolvedOptions(){return this.delegate.resolvedOptions()}};s(ht,"ImprovedDateTimeFormat");G.ImprovedDateTimeFormat=ht;function Pu(r,e,t=B.defaultOptions){if(r==null)throw new Error("Date format requires a value");return Se.create(e,t).format(r)}s(Pu,"format");G.format=Pu;var Bt=class{constructor(e,t){this.locale=e,this.value=t,this.partsInOrder=B.partsFrom(t),this.options=B.optionsFrom(this.partsInOrder)}format(e){return this.formatToParts(e).map(t=>t.value).join("")}formatToParts(e=new Date){let t=typeof e=="number"?new Date(e):e,n=_.create(this.locale,this.options).toParts(t);return this.partsInOrder.map(i=>({type:i.type,value:this.valueFor(n,i.type,i.value)}))}valueFor(e,t,n){return t==="literal"?n:B.valueFromParts(e,t)}resolvedOptions(){return Object.assign(Object.assign({},this.options),{locale:this.locale})}};s(Bt,"SimpleFormat");G.SimpleFormat=Bt;G.hasNativeToParts=typeof Intl.DateTimeFormat.prototype.formatToParts=="function";function Au(r,e,t=B.defaultOptions,n=G.hasNativeToParts){let i=Se.create(e,t);return n?i.formatToParts(r):_.create(e,t).toParts(r)}s(Au,"formatData");G.formatData=Au;var _=class{constructor(e,t=B.defaultOptions,n=3333,i=11,a=20,o=B.Weekday.Friday,c=Ya.Numerals.get(e)){this.locale=e,this.options=t,this.yearValue=n,this.monthValue=i,this.dayValue=a,this.weekdayValue=o,this.numerals=c}static create(e,t=B.defaultOptions){return new _(e,t)}get formatter(){return Se.create(this.locale,this.options)}get formatted(){return this.formatter.format(B.date(this.yearValue,this.monthValue,this.dayValue))}get months(){return B.Months.create(this.locale,B.Months.dataFor(this.locale,this.options,!1))}get month(){return B.months(this.locale,this.options,!1)[this.monthValue-1]}get weekdays(){return new B.Weekdays(B.Weekdays.dataFor(this.locale,this.options,!1))}get weekday(){return B.weekdays(this.locale,this.options,!1)[this.weekdayValue-1]}get year(){return this.numerals.format(this.yearValue)}get day(){return this.numerals.format(this.dayValue)}get learningNamesPattern(){let e=s(i=>`(?<${i}>${this[i]})`,"template"),n=`(?:${Object.keys(this.options).map(i=>e(i)).join("|")})`;return Zr.NamedRegExp.create(n)}get actualNamesPattern(){let e=Ya.digits(this.locale),t=this.learningNamesPattern,n=Du.array(t.iterate(this.formatted),Su.map(a=>{if(Zr.isNamedMatch(a)){let[o]=a.filter(c=>Boolean(c.value)).map(c=>c.name);if(!o)throw new Error;if(o=="year")return`(?<year>[${e}]{4})`;if(o=="day")return`(?<day>[${e}]{1,2})`;if(o=="month")return`(?<month>(?:[${e}]{1,2}|${this.months.pattern}))`;if(o=="weekday")return`(?<weekday>${this.weekdays.pattern})`}else return`(?<literal>[${a}]+?)`})),i="^"+n.join("")+"$";return Zr.NamedRegExp.create(i)}toParts(e){let t=this.actualNamesPattern,n=this.formatter.format(e),i=t.match(n);if(i.length===0)throw new Error(`${t} did not match ${n}`);let a=i.map(o=>({type:this.getType(o.name,o.value),value:o.value}));return this.collapseLiterals(a)}collapseLiterals(e){for(let t=0;t<e.length;t++){let n=e[t];if(n.type==="literal"){let i=t+1;for(;;){let a=e[i];if(!(a&&a.type==="literal"))break;n.value=n.value+a.value,e.splice(i,1)}}}return e}getType(e,t){return e==="month"||e==="weekday"?this.parsable(this.months,t)?"month":this.parsable(this.weekdays,t)?"weekday":"literal":e}parsable(e,t){try{return Boolean(e.parse(t))}catch(n){return!1}}};s(_,"DateParts");ae.__decorate([xe.lazy],_.prototype,"formatter",null);ae.__decorate([xe.lazy],_.prototype,"formatted",null);ae.__decorate([xe.lazy],_.prototype,"months",null);ae.__decorate([xe.lazy],_.prototype,"month",null);ae.__decorate([xe.lazy],_.prototype,"weekdays",null);ae.__decorate([xe.lazy],_.prototype,"weekday",null);ae.__decorate([xe.lazy],_.prototype,"year",null);ae.__decorate([xe.lazy],_.prototype,"day",null);ae.__decorate([xe.lazy],_.prototype,"learningNamesPattern",null);ae.__decorate([xe.lazy],_.prototype,"actualNamesPattern",null);ae.__decorate([ji.cache],_,"create",null);G.DateParts=_});var qi=L(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.StoppedClock=bt.SystemClock=void 0;var Hi=class{now(){return new Date}};s(Hi,"SystemClock");bt.SystemClock=Hi;var Ki=class{constructor(e){this.value=e}now(){return this.value}};s(Ki,"StoppedClock");bt.StoppedClock=Ki});var zi=L(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.localeParser=v.simpleParser=v.parser=v.defaultParserOptions=v.formatBuilder=v.optionsFrom=v.partsFrom=v.formatRegex=v.formatFrom=v.Days=v.SmartDate=v.Pivot=v.InferYear=v.InferDirection=v.InferYearViaWeekday=v.compositeDateFactory=v.DefaultDateFactory=v.dateFrom=v.DateTimeFormatPartParser=v.DateParser=v.escapeCharacters=v.RegexBuilder=v.parse=void 0;var Qr=fe(),Tu=He(),Cu=pt(),en=Ke(),R=Ze(),Q=Re(),Xa=N(),_i=le(),Ui=Oe(),Ou=mt(),tn=qi(),Za=Lt();function Ru(r,e,t,n=R.hasNativeToParts){return no(e,t,n).parse(r)}s(Ru,"parse");v.parse=Ru;var ke=class{constructor(e,t=R.defaultOptions,n){this.locale=e,this.options=t,this.formatted=n}static create(e,t=R.defaultOptions,n=R.hasNativeToParts){return typeof t=="string"?Vi(e,t):typeof t.format=="string"?Vi(e,t.format,t.strict):new ke(e,t,R.formatData(new Date,e,t,n))}get pattern(){let e=this.formatted.map((t,n)=>{switch(t.type){case"year":return`(?<year>[${Q.digits(this.locale)}]{${this.lengthOf(t.value)}})`;case"month":return`(?<month>${this.monthsPattern()})`;case"day":return`(?<day>[${Q.digits(this.locale)}]{1,2})`;case"weekday":return`(?<weekday>${R.Weekdays.get(this.locale).pattern.toLocaleLowerCase(this.locale)})`;default:{let i=Cu.unique(en.characters(Qa(this.addExtraLiterals(t)))).join("").replace(" ","\\s"),o=n===this.formatted.length-1?"*":"+";return`[${i}]${o}?`}}}).join("");return Q.atBoundaryOnly(e)}lengthOf(e){return e.length===2||e==="2-digit"?2:4}addExtraLiterals(e){return this.options.strict?e.value:this.options.format?e.value+(this.options.separators||Q.boundaryDelimiters):e.value+(this.options.separators||Q.boundaryDelimiters+Q.extraDelimiters)}monthsPattern(){let e=`[${Q.digits(this.locale)}]{1,2}`,t=R.Months.get(this.locale).pattern.toLocaleLowerCase(this.locale);return this.options.month==="2-digit"||this.options.month==="numeric"?e:this.options.month==="short"||this.options.month==="long"?t:`(?:${e}|${t})`}};s(ke,"RegexBuilder");Qr.__decorate([Tu.lazy],ke.prototype,"pattern",null);Qr.__decorate([Ui.cache],ke,"create",null);v.RegexBuilder=ke;function Qa(r){return r.replace(/[\-]/g,"\\$&")}s(Qa,"escapeCharacters");v.escapeCharacters=Qa;var vt=class{static create(e,t=R.defaultOptions,n=R.hasNativeToParts){let i=ke.create(e,t,n).pattern;return Q.mappingParser(Gt.create(en.NamedRegExp.create(i),e),a=>eo(a,e,typeof t=="object"?t.factory:void 0))}};s(vt,"DateParser");Qr.__decorate([Ui.cache],vt,"create",null);v.DateParser=vt;var Gt=class{static create(e,t){return Q.preProcess(Q.mappingParser(Q.namedRegexParser(e),n=>this.convert(n,t)),n=>this.preProcess(n,t))}static convert(e,t){return e.map(n=>({type:n.name,value:n.value.toLocaleUpperCase(t)}))}static preProcess(e,t){return e.toLocaleLowerCase(t)}};s(Gt,"DateTimeFormatPartParser");Qr.__decorate([Ui.cache],Gt,"create",null);v.DateTimeFormatPartParser=Gt;function eo(r,e,t=new rn){let n=Q.numberParser(".",e),i=r.find(w=>w.type==="day");if(!i)throw new Error("No day found");let a=n.parse(i.value),o=r.find(w=>w.type==="month");if(!o)throw new Error("No month found");let c=R.Months.get(e).parse(o.value),l=r.find(w=>w.type==="year"),f=l?n.parse(l.value):void 0,x=r.find(w=>w.type==="weekday"),O=x?Ou.get(()=>R.Weekdays.get(e).parse(x.value)):void 0;return t.create({year:f,month:c,day:a,weekday:O})}s(eo,"dateFrom");v.dateFrom=eo;var rn=class{create({year:e,month:t,day:n}){if(typeof e=="undefined")throw new Error("No year found");return R.date(e,t,n)}};s(rn,"DefaultDateFactory");v.DefaultDateFactory=rn;var $i=class{constructor(e){this.factories=e}create(e){for(let t of this.factories)try{return t.create(e)}catch(n){}throw new Error(`Unable to create date for ${JSON.stringify(e)}`)}};s($i,"CompositeDateFactory");function ku(...r){return new $i(r)}s(ku,"compositeDateFactory");v.compositeDateFactory=ku;var Vt=class{constructor(e){this.clock=e}static create(e=new tn.SystemClock){return new Vt(e)}create({year:e,month:t,day:n,weekday:i}){if(e)return R.date(e,t,n);if(!i)throw new Error("No weekday provided");let a=this.candidates(t,n).find(o=>R.weekdayOf(o)===i);if(a)return a;throw new Error("No candidate date found that matches")}candidates(e,t){let n=Ee.startOf(this.clock.now());return Xa.array(Za.range(0,-6),_i.zip(Za.range(1,6)),_i.flatMap(i=>i),Q.mapIgnoreError(i=>R.date(R.yearOf(n)+i,e,t)))}};s(Vt,"InferYearViaWeekday");v.InferYearViaWeekday=Vt;var Wt;(function(r){r[r.Before=-1]="Before",r[r.After=1]="After"})(Wt=v.InferDirection||(v.InferDirection={}));var ye=class{constructor(e,t){this.direction=t,this.date=Ee.startOf(e)}static before(e){return new ye(e,Wt.Before)}static after(e){return new ye(e,Wt.After)}static sliding(e=new tn.SystemClock){let t=e.now();return ye.before(R.date(R.yearOf(t)+50,1,1))}create({year:e,month:t,day:n}){if(e&&e<10)throw new Error("Illegal year");if(e&&e>=100&&e<1e3)throw new Error("Illegal year");if(e&&e>=1e3)return R.date(e,t,n);let i=this.calculateYear(e),a=R.date(i,t,n);if(this.direction==Wt.Before&&a<this.date||this.direction==Wt.After&&a>this.date)return a;let o=this.calculateYearIncrement(e);return a.setUTCFullYear(a.getUTCFullYear()+o*this.direction),a}calculateYearIncrement(e){return typeof e=="undefined"?1:100}calculateYear(e){if(typeof e=="undefined")return this.date.getUTCFullYear();let t=Math.floor(this.date.getUTCFullYear()/100)*100;return e+t}};s(ye,"InferYear");v.InferYear=ye;var Ni=class{static on(e){return ye.before(R.date(e,1,1))}static sliding(e=new tn.SystemClock){return ye.sliding(e)}};s(Ni,"Pivot");v.Pivot=Ni;var Bi=class{constructor(e=new tn.SystemClock){this.clock=e}create(e){return typeof e.year=="undefined"?ye.after(this.clock.now()).create(e):ye.sliding(this.clock).create(e)}};s(Bi,"SmartDate");v.SmartDate=Bi;var Ee=class{static startOf(e){return R.date(R.yearOf(e),R.monthOf(e),R.dayOf(e))}static add(e,t){let n=new Date(e.getTime());return n.setUTCDate(e.getUTCDate()+t),n}static subtract(e,t){return Ee.add(e,t*-1)}static between(e,t){return Math.abs((e.getTime()-t.getTime())/Ee.milliseconds)}};s(Ee,"Days");v.Days=Ee;Ee.milliseconds=24*60*60*1e3;function to(r,e){if(r==="year"){if(e===4)return"numeric";if(e===2)return"2-digit"}if(r==="month"){if(e===4)return"long";if(e===3)return"short";if(e===2)return"2-digit";if(e===1)return"numeric"}if(r==="day"){if(e===2)return"2-digit";if(e===1)return"numeric"}if(r==="weekday"){if(e===4)return"long";if(e===3)return"short"}throw new Error(`Illegal Argument: ${r} ${e}`)}s(to,"formatFrom");v.formatFrom=to;v.formatRegex=en.NamedRegExp.create("(?:(?<year>y+)|(?<month>M+)|(?<day>d+)|(?<weekday>E+))","g");function Gi(r){return Xa.array(v.formatRegex.iterate(r),_i.map(e=>{if(en.isNamedMatch(e)){let[t]=e.filter(a=>Boolean(a.value)),n=t.name,i=to(n,t.value.length);return{type:n,value:i}}else return{type:"literal",value:e}}))}s(Gi,"partsFrom");v.partsFrom=Gi;function ro(r){let e=typeof r=="string"?Gi(r):r,t=["year","month","day","weekday"];return e.filter(n=>t.indexOf(n.type)!=-1).reduce((n,i)=>(n[i.type]=i.value,n),typeof r=="string"?{format:r}:{})}s(ro,"optionsFrom");v.optionsFrom=ro;function Vi(r,e,t=!1){return new ke(r,Object.assign(Object.assign({},ro(e)),{strict:t}),Gi(e))}s(Vi,"formatBuilder");v.formatBuilder=Vi;v.defaultParserOptions=[{year:"numeric",month:"long",day:"numeric",weekday:"long"},{year:"numeric",month:"short",day:"numeric",weekday:"short"},{year:"numeric",month:"numeric",day:"numeric"},{year:"numeric",month:"short",day:"numeric"},{year:"numeric",month:"long",day:"numeric"}];function no(r,e,t=R.hasNativeToParts){return typeof e=="string"?io(r,e,t):Wi(r,e,t)}s(no,"parser");v.parser=no;function io(r,e,t=R.hasNativeToParts){return vt.create(r,e,t)}s(io,"simpleParser");v.simpleParser=io;function Wi(r,e,t=R.hasNativeToParts){return e?vt.create(r,e,t):Q.or(...v.defaultParserOptions.map(n=>Wi(r,n,t)))}s(Wi,"localeParser");v.localeParser=Wi});var fo=L(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.FromFormatStringWeekdayExtractor=M.FromFormatStringMonthExtractor=M.FromFormatStringDataExtractor=M.NativeDataExtractor=M.valueFromParts=M.BaseDataExtractor=M.exactFormat=M.weekdays=M.Weekdays=M.months=M.Months=void 0;var so=pt(),ao=Ci(),wt=Fi(),Ji=Ke(),De=Re(),Eu=mt(),ee=class extends De.DatumLookup{constructor(e,t){super(e);this.numerals=De.Numerals.get(t)}parse(e){let t=Eu.get(()=>this.numerals.parse(e));return isNaN(t)?super.parse(De.cleanValue(e)):t}static get(e,t=[]){return ee.cache[e]=ee.cache[e]||ee.create(e,t)}static set(e,t){return ee.cache[e]=t}static create(e,t=[]){return new ee([...ee.generateData(e),...t],e)}static generateData(e){return so.flatten(ee.formats.map(t=>ee.dataFor(e,t)))}static dataFor(e,t,n=wt.hasNativeToParts){return lo(e,t,n).map((i,a)=>({name:i,value:a+1}))}};s(ee,"Months");M.Months=ee;ee.formats=[{month:"long"},{month:"short"},{year:"numeric",month:"long",day:"numeric"},{year:"numeric",month:"short",day:"numeric"}];ee.cache={};function oo(r,e){let t=[];for(let n=r;n<=e;n++)t.push(n);return t}s(oo,"range");var co={};function lo(r,e="long",t=wt.hasNativeToParts){let n=JSON.stringify({locale:r,monthFormat:e,native:t});return co[n]=co[n]||(()=>{let i=Object.assign({},typeof e=="string"?{month:e}:e);if(!i.month)return[];let a=oo(1,12).map(o=>ao.date(2e3,o,1));return t?new Jt(r,i,a,"month").extract().map(De.cleanValue):new Ie(r,i,a).extract().map(De.cleanValue)})()}s(lo,"months");M.months=lo;var te=class extends De.DatumLookup{parse(e){return super.parse(De.cleanValue(e))}static get(e,t=[]){return te.cache[e]=te.cache[e]||te.create(e,t)}static set(e,t){return te.cache[e]=t}static create(e,t=[]){return new te([...te.generateData(e),...t])}static generateData(e){return so.flatten(te.formats.map(t=>te.dataFor(e,t)))}static dataFor(e,t,n=wt.hasNativeToParts){return Yi(e,t,n).map((i,a)=>({name:i,value:a+1}))}};s(te,"Weekdays");M.Weekdays=te;te.formats=[{weekday:"long"},{weekday:"short"},{year:"numeric",month:"numeric",day:"numeric",weekday:"long"},{year:"numeric",month:"numeric",day:"numeric",weekday:"short"}];te.cache={};var uo={};function Yi(r,e="long",t=wt.hasNativeToParts){let n=JSON.stringify({locale:r,weekdayFormat:e,native:t});return uo[n]=uo[n]||(()=>{let i=Object.assign({},typeof e=="string"?{weekday:e}:e);if(!i.weekday)return[];let a=oo(1,7).map(o=>ao.date(2e3,1,o+2));return t?new Jt(r,i,a,"weekday").extract().map(De.cleanValue):new nn(r,i,a).extract().map(De.cleanValue)})()}s(Yi,"weekdays");M.weekdays=Yi;function Xi(r,e,t){let n=wt.Formatters.create(r,e);return t.map(i=>n.format(i))}s(Xi,"exactFormat");M.exactFormat=Xi;var zt=class{constructor(e,t,n,i){this.locale=e,this.options=t,this.dates=n,this.partType=i}};s(zt,"BaseDataExtractor");M.BaseDataExtractor=zt;function po(r,e){return r.filter(t=>t.type===e).map(t=>t.value).join("")}s(po,"valueFromParts");M.valueFromParts=po;var Jt=class extends zt{extract(){let e=wt.Formatters.create(this.locale,this.options);return this.dates.map(t=>po(e.formatToParts(t),this.partType))}};s(Jt,"NativeDataExtractor");M.NativeDataExtractor=Jt;var Yt=class extends zt{extract(){let e=Object.keys(this.options).length==1,t=Xi(this.locale,this.options,this.dates);if(e)return t;let n=Xi(this.locale,{[this.partType]:this.options[this.partType]},this.dates),i=this.diff(t),a=[];for(let o=0;o<n.length;o++){let c=t[o],l=n[o],f=i[o];a.push(c.indexOf(l)!=-1&&l.length>f.length&&isNaN(parseInt(f))?l:f)}return a}diff(e){return Ji.different(e)}};s(Yt,"FromFormatStringDataExtractor");M.FromFormatStringDataExtractor=Yt;var Ie=class extends Yt{constructor(e,t,n){super(e,t,n,"month")}diff(e){if(!this.options.weekday)return super.diff(e);let t=[],n=Yi(this.locale,this.options,!1),i=n[this.day(this.dates[8])];for(let a=0;a<e.length;a++){let c=this.replaceYearMonthDay(e[a]).replace(this.weekday(n,a),i);t[a]=this.restoreYearMonthDay(c)}return super.diff(t)}weekday(e,t){return e[this.day(this.dates[t])]}replaceYearMonthDay(e){return Ji.replace(Ie.replaceYMD,e,t=>{let n=t[1],i=t[2];if(i==="\u5E74")return`${n}year`;if(i==="\u6708")return`${n}month`;if(i==="\u65E5")return`${n}day`;throw new Error(`Unknown delimiter ${i}`)})}restoreYearMonthDay(e){return Ji.replace(Ie.restoreYMD,e,t=>{let n=t[1];if(n==="year")return"\u5E74";if(n==="month")return"\u6708";if(n==="day")return"\u65E5";throw new Error(`Unknown delimiter ${n}`)})}day(e){let t=e.getUTCDay();return t==0?6:t-1}};s(Ie,"FromFormatStringMonthExtractor");M.FromFormatStringMonthExtractor=Ie;Ie.replaceYMD=/(\d)([年月日])/g;Ie.restoreYMD=/(year|month|day)/g;var nn=class extends Yt{constructor(e,t,n){super(e,t,n,"weekday")}diff(e){if(!this.options.day)return super.diff(e);let t=[],n=this.dates[0].getUTCDate().toString();for(let i=0;i<e.length;i++){let a=e[i],o=this.convertToNumeral(this.dates[i].getUTCDate()),c=a.replace(o,n);t[i]=c}return super.diff(t)}convertToNumeral(e){return De.numberFormatter(this.locale).format(e)}};s(nn,"FromFormatStringWeekdayExtractor");M.FromFormatStringWeekdayExtractor=nn});var Ze=L(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});var sn=fe();sn.__exportStar(Ci(),xt);sn.__exportStar(Fi(),xt);sn.__exportStar(zi(),xt);sn.__exportStar(fo(),xt)});var pc=L(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.currencies=void 0;Qn.currencies={AFN:{decimals:2,symbols:["Afs","\u060B"]},EUR:{decimals:2,symbols:["\u20AC"]},ALL:{decimals:2,symbols:["L"]},DZD:{decimals:2,symbols:["DA"]},USD:{decimals:2,symbols:["$","US$"]},AOA:{decimals:2,symbols:["Kz"]},XCD:{decimals:2,symbols:["EC$","$"]},ARS:{decimals:2,symbols:["$"]},AMD:{decimals:2,symbols:["\u058F"]},AWG:{decimals:2,symbols:["\u0192"]},AUD:{decimals:2,symbols:["A$","AU$","AUD","$"]},AZN:{decimals:2,symbols:["\u20BC","A.M."]},BSD:{decimals:2,symbols:["B$","$"]},BHD:{decimals:3,symbols:["BD"]},BDT:{decimals:2,symbols:["\u09F3"]},BBD:{decimals:2,symbols:["Bds$","$"]},BYN:{decimals:2,symbols:["Br"]},BZD:{decimals:2,symbols:["Bz$","$"]},XOF:{decimals:0,symbols:["F"]},BMD:{decimals:2,symbols:["BD$","$"]},INR:{decimals:2,symbols:["\u20B9","Rs"]},BTN:{decimals:2,symbols:["Nu"]},BOB:{decimals:2,symbols:["Bs"]},BOV:{decimals:2,symbols:[]},BAM:{decimals:2,symbols:["KM"]},BWP:{decimals:2,symbols:["P"]},NOK:{decimals:2,symbols:["kr"]},BRL:{decimals:2,symbols:["R$"]},BND:{decimals:2,symbols:["B$","$"]},BGN:{decimals:2,symbols:["\u043B\u0432.","\u043B\u0432"]},BIF:{decimals:0,symbols:["FBu"]},CVE:{decimals:2,symbols:[]},KHR:{decimals:2,symbols:["\u17DB"]},XAF:{decimals:0,symbols:[]},CAD:{decimals:2,symbols:["C$","CAD$","$","\xA2"]},KYD:{decimals:2,symbols:["CI$","$"]},CLP:{decimals:0,symbols:["CLP$","$"]},CLF:{decimals:4,symbols:[]},CNY:{decimals:2,symbols:["\xA5","\uFFE5"]},COP:{decimals:2,symbols:["COL$","$"]},COU:{decimals:2,symbols:["COU$"]},KMF:{decimals:0,symbols:["CF"]},CDF:{decimals:2,symbols:["CF"]},NZD:{decimals:2,symbols:["NZ$","$"]},CRC:{decimals:2,symbols:["\u20A1"]},HRK:{decimals:2,symbols:["kn"]},CUP:{decimals:2,symbols:["$MN","$"]},CUC:{decimals:2,symbols:["$"]},ANG:{decimals:2,symbols:["\u0192","NA\u0192","CMg"]},CZK:{decimals:2,symbols:["K\u010D"]},DKK:{decimals:2,symbols:["kr","kr."]},DJF:{decimals:0,symbols:["Fdj"]},DOP:{decimals:2,symbols:["RD$","$"]},EGP:{decimals:2,symbols:["LE","\xA3"]},SVC:{decimals:2,symbols:[]},ERN:{decimals:2,symbols:["Nfk"]},SZL:{decimals:2,symbols:["E"]},ETB:{decimals:2,symbols:["Br"]},FKP:{decimals:2,symbols:["\xA3"]},FJD:{decimals:2,symbols:["F$","FJ$","$"]},XPF:{decimals:0,symbols:["\u20A3"]},GMD:{decimals:2,symbols:["D"]},GEL:{decimals:2,symbols:["\u20BE"]},GHS:{decimals:2,symbols:["GH\u20B5"]},GIP:{decimals:2,symbols:["\xA3"]},GTQ:{decimals:2,symbols:["Q"]},GBP:{decimals:2,symbols:["\xA3"]},GNF:{decimals:0,symbols:["FG"]},GYD:{decimals:2,symbols:["G$","GY$","$"]},HTG:{decimals:2,symbols:["Gde.","G"]},HNL:{decimals:2,symbols:["L"]},HKD:{decimals:2,symbols:["\u5143","HK$","$"]},HUF:{decimals:2,symbols:["Ft"]},ISK:{decimals:0,symbols:["kr"]},IDR:{decimals:2,symbols:["Rp","Rs"]},XDR:{decimals:0,symbols:[]},IRR:{decimals:2,symbols:["\uFDFC"]},IQD:{decimals:3,symbols:["\u062F.\u0639"]},ILS:{decimals:2,symbols:["\u20AA"]},JMD:{decimals:2,symbols:["J$","$"]},JPY:{decimals:0,symbols:["\u5186","\xA5","\uFFE5"]},JOD:{decimals:3,symbols:["JD"]},KZT:{decimals:2,symbols:["\u20B8"]},KES:{decimals:2,symbols:["Ksh","KSh"]},KPW:{decimals:2,symbols:["\u20A9"]},KRW:{decimals:0,symbols:["\u20A9"]},KWD:{decimals:3,symbols:["KD","\u062F.\u0643"]},KGS:{decimals:2,symbols:["\u0441\u043E\u043C"]},LAK:{decimals:2,symbols:["\u20AD"]},LBP:{decimals:2,symbols:["\u0644.\u0644.","LL","\xA3"]},LSL:{decimals:2,symbols:["M"]},ZAR:{decimals:2,symbols:["R"]},LRD:{decimals:2,symbols:["Lib$","L$","$"]},LYD:{decimals:3,symbols:["LD"]},CHF:{decimals:2,symbols:["Fr"]},MOP:{decimals:2,symbols:["MOP$"]},MKD:{decimals:2,symbols:["DEN","\u0434\u0435\u043D"]},MGA:{decimals:2,symbols:["Ar"]},MWK:{decimals:2,symbols:["MK"]},MYR:{decimals:2,symbols:["RM"]},MVR:{decimals:2,symbols:["\u0783","Rf","MRF"]},MRU:{decimals:2,symbols:[]},MUR:{decimals:2,symbols:["\u20A8"]},XUA:{decimals:0,symbols:[]},MXN:{decimals:2,symbols:["$"]},MXV:{decimals:2,symbols:[]},MDL:{decimals:2,symbols:["L"]},MNT:{decimals:2,symbols:["\u20AE"]},MAD:{decimals:2,symbols:["DH"]},MZN:{decimals:2,symbols:["MT","MTn"]},MMK:{decimals:2,symbols:["K"]},NAD:{decimals:2,symbols:["N$","$"]},NPR:{decimals:2,symbols:["N\u20A8","\u0930\u0941","\u20A8","Re"]},NIO:{decimals:2,symbols:["C$"]},NGN:{decimals:2,symbols:["\u20A6"]},OMR:{decimals:3,symbols:["\u0631.\u0639."]},PKR:{decimals:2,symbols:["\u20A8","Rs"]},PAB:{decimals:2,symbols:["B/."]},PGK:{decimals:2,symbols:["K"]},PYG:{decimals:0,symbols:["\u20B2"]},PEN:{decimals:2,symbols:["S/."]},PHP:{decimals:2,symbols:["\u20B1"]},PLN:{decimals:2,symbols:["z\u0142"]},QAR:{decimals:2,symbols:["QR"]},RON:{decimals:2,symbols:["lei"]},RUB:{decimals:2,symbols:["\u20BD"]},RWF:{decimals:0,symbols:["FRw"]},SHP:{decimals:2,symbols:["\xA3"]},WST:{decimals:2,symbols:["WS$"]},STN:{decimals:2,symbols:["Db","\u20A1"]},SAR:{decimals:2,symbols:["SR"]},RSD:{decimals:2,symbols:["\u0434\u0438\u043D","din"]},SCR:{decimals:2,symbols:["SRe"]},SLL:{decimals:2,symbols:["Le"]},SGD:{decimals:2,symbols:["S$","$"]},XSU:{decimals:0,symbols:["Sucre"]},SBD:{decimals:2,symbols:["$","SI$"]},SOS:{decimals:2,symbols:["Sh.So."]},SSP:{decimals:2,symbols:["Db","\xA3"]},LKR:{decimals:2,symbols:["Rs","\u0DBB\u0DD4","\u0BB0\u0BC2"]},SDG:{decimals:2,symbols:["\u062C.\u0633","sud\xA3","\xA3"]},SRD:{decimals:2,symbols:["$"]},SEK:{decimals:2,symbols:["kr"]},CHE:{decimals:2,symbols:[]},CHW:{decimals:2,symbols:[]},SYP:{decimals:2,symbols:["syr\xA3","LS","\xA3"]},TWD:{decimals:2,symbols:["NT$","$"]},TJS:{decimals:2,symbols:["SM"]},TZS:{decimals:2,symbols:["TSh"]},THB:{decimals:2,symbols:["\u0E3F"]},TOP:{decimals:2,symbols:["T$"]},TTD:{decimals:2,symbols:["TT$","$"]},TND:{decimals:3,symbols:["DT"]},TRY:{decimals:2,symbols:["YTL","\u20BA"]},TMT:{decimals:2,symbols:["T"]},UGX:{decimals:0,symbols:["Ush"]},UAH:{decimals:2,symbols:["\u20B4"]},AED:{decimals:2,symbols:["DH","\u062F.\u0625","Dhs"]},USN:{decimals:2,symbols:[]},UYU:{decimals:2,symbols:["$U","$"]},UYI:{decimals:0,symbols:[]},UYW:{decimals:4,symbols:[]},UZS:{decimals:2,symbols:["So'm"]},VUV:{decimals:0,symbols:["VT"]},VES:{decimals:2,symbols:["Bs.S"]},VED:{decimals:2,symbols:[]},VND:{decimals:0,symbols:["\u20AB","\u0111"]},YER:{decimals:2,symbols:["\uFDFC'"]},ZMW:{decimals:2,symbols:["K","ZK"]},ZWL:{decimals:2,symbols:[]},XBA:{decimals:0,symbols:[]},XBB:{decimals:0,symbols:[]},XBC:{decimals:0,symbols:[]},XBD:{decimals:0,symbols:[]},XTS:{decimals:0,symbols:[]},XXX:{decimals:0,symbols:[]},XAU:{decimals:0,symbols:[]},XPD:{decimals:0,symbols:[]},XPT:{decimals:0,symbols:[]},XAG:{decimals:0,symbols:[]}}});var vc=L(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.IntegerGroupParser=D.PartsFromFormat=D.NumberFormatPartParser=D.MoneyParser=D.RegexBuilder=D.symbolFor=D.CurrencySymbols=D.parseToParts=D.parser=D.parse=D.FormatToParts=D.toPartsPonyfill=D.format=D.partsFrom=D.hasNativeToParts=D.Formatter=D.decimalsFor=D.moneyFrom=D.money=void 0;var et=fe(),Be=Ke(),he=le(),Ae=N(),Zd=pt(),vs=pc(),fc=He(),J=Re(),or=Oe(),Qd=mt();function ei(r,e){return{amount:e,currency:r}}s(ei,"money");D.money=ei;function ws(r,e,t){let{currency:n}=Ae.single(r,he.filter(l=>l.type==="currency"),he.flatMap(l=>{try{let f=W.get(e).parse(l.value,t&&t.strategy);return[{currency:f,exactMatch:f===l.value}]}catch(f){return[]}}),he.sort(Ae.by("exactMatch",Ae.descending)),he.first()),i=r.filter(l=>l.type==="integer"||l.type==="decimal"||l.type==="fraction"),a=Qd.get(()=>r.filter(l=>l.type==="decimal")[0].value,"."),o=i.map(l=>l.value).join(""),c=J.numberParser(a,e).parse(o);return ei(n,c)}s(ws,"moneyFrom");D.moneyFrom=ws;function mc(r){let e=vs.currencies[r];return e?e.decimals:2}s(mc,"decimalsFor");D.decimalsFor=mc;var Te=class{static create(e,t,n="code"){return new Intl.NumberFormat(t,{currencyDisplay:n,currency:e,style:"currency",minimumFractionDigits:0,maximumFractionDigits:mc(e)})}};s(Te,"Formatter");et.__decorate([or.cache],Te,"create",null);D.Formatter=Te;D.hasNativeToParts=typeof Intl.NumberFormat.prototype.formatToParts=="function";function xs(r,e,t="code",n=D.hasNativeToParts){let i=Te.create(r.currency,e,t);return n?i.formatToParts(r.amount):yc(r,e,t)}s(xs,"partsFrom");D.partsFrom=xs;function ep(r,e,t="code"){return Te.create(r.currency,e,t).format(r.amount)}s(ep,"format");D.format=ep;function yc(r,e,t="code"){let n=r.currency,i=r.amount;return tt.create(n,e,t).format(i)}s(yc,"toPartsPonyfill");D.toPartsPonyfill=yc;var gc=ei("GBP",111222.3333),tt=class{constructor(e,t,n,i){this.currency=e,this.currencyDisplay=t,this.parser=n,this.locale=i}static create(e,t,n="code"){let i=Te.create(e,t,n).format(gc.amount),a=Ce.examplePattern(t).parse(i),o=cr.buildFrom(a,t),c=rt.create(t,o);return new tt(e,n,c,t)}format(e){let t=Te.create(this.currency,this.locale,this.currencyDisplay);return this.parser.parse(t.format(e))}};s(tt,"FormatToParts");et.__decorate([or.cache],tt,"create",null);D.FormatToParts=tt;function tp(r,e,t){return ws(hc(r,e,t),e,t)}s(tp,"parse");D.parse=tp;function rp(r,e){return ti.create(r,e)}s(rp,"parser");D.parser=rp;function hc(r,e,t){return rt.create(e,t).parse(r)}s(hc,"parseToParts");D.parseToParts=hc;var W=class extends J.DatumLookup{constructor(e,t){super(e.map(n=>({name:J.cleanValue(n.name),value:n.value})),Ae.ascending);this.locale=t}static get(e,t=[]){return W.cache[e]=W.cache[e]||W.create(e,t)}static set(e,t){return W.cache[e]=t}static create(e,t=[]){return new W([...W.generateData(e),...t],e)}static generateData(e){return Zd.flatten(Object.keys(vs.currencies).map(t=>W.dataFor(e,t,vs.currencies[t])))}static dataFor(e,t,n){return[{name:t,value:t},{name:bc(e,t),value:t},...Ae.array(n.symbols,he.flatMap(i=>{let a=[{name:i,value:t}];if(W.generateAdditionalSymbols.indexOf(i)!==-1){let o=t.substring(0,2);a.push({name:i+o,value:t}),a.push({name:o+i,value:t}),a.push({name:t+i,value:t})}return a}))]}parse(e,t=J.infer(this.locale)){return super.parse(J.cleanValue(e),t)}};s(W,"CurrencySymbols");D.CurrencySymbols=W;W.cache={};W.generateAdditionalSymbols=["$","\xA5","\xA3"];var np=/[£GBP]+/;function bc(r,e,t=D.hasNativeToParts){if(t){let n=xs(ei(e,0),r,"symbol"),[i]=n.filter(a=>a.type==="currency");if(!i)throw new Error("No currency found");return i.value}else{let n=Te.create("GBP",r,"symbol").format(1).replace(np,"@@@"),i=Te.create(e,r,"symbol").format(1),[,a]=Be.different([n,i]);return a?a.replace(J.Spaces.pattern,""):"\xA3"}}s(bc,"symbolFor");D.symbolFor=bc;var cr=class{static buildFromOptions(e,t){return t&&t.format?this.buildFrom(Ce.format.parse(t.format),e,!0):this.buildPattern(e,t&&t.strict||!1)}static buildPattern(e,t=!1){return this.buildFrom(xs(gc,e),e,t)}static buildFrom(e,t,n=!1){let i=this.buildParts(e,n),[a=""]=e.filter(l=>l.type==="group").map(l=>l.value),o=J.digits(t),c=i.map(l=>{switch(l.type){case"currency":return`(?<currency>${W.get(t).pattern})?`;case"decimal":return`(?<decimal>[${l.value}]?)`;case"fraction":return`(?<fraction>[${o}]*)`;case"integer":return`(?<integer-group>[${o}${J.Spaces.handle(a)}]*[${o}]+)`;default:return`(?<${l.type}>[${J.Spaces.handle(l.value)}]?)`}}).join("");return J.atBoundaryOnly(c)}static buildParts(e,t=!1){let n=[...e];if(!t){let i=n[0],a=n[n.length-1],o={type:"literal",value:" "};i.type==="currency"?(n.push(o,i),n.splice(1,0,o)):a.type==="currency"&&(n.unshift(a,o),n.splice(n.length-2,0,o))}return Ae.array(n,he.filter(i=>i.type!=="group"),he.dedupe(Ae.by("type")))}};s(cr,"RegexBuilder");D.RegexBuilder=cr;var ti=class{static create(e,t){return J.mappingParser(rt.create(e,t),n=>ws(n,e,t))}};s(ti,"MoneyParser");D.MoneyParser=ti;var rt=class{static create(e,t){let n=typeof t=="string"?t:cr.buildFromOptions(e,t);return J.mappingParser(J.namedRegexParser(Be.NamedRegExp.create(n)),i=>this.convert(i,e))}static convert(e,t){return Ae.array(e,he.filter(n=>Boolean(n.value)),he.flatMap(n=>n.name==="integer-group"?be.digits(t).parse(n.value):[{type:n.name,value:n.value}]))}};s(rt,"NumberFormatPartParser");et.__decorate([or.cache],rt,"create",null);D.NumberFormatPartParser=rt;var Ce=class{constructor(e,t){this.formatRegex=e,this.integerGroupParser=t}parse(e){return Ae.array(this.formatRegex.iterate(e),he.flatMap(t=>{if(Be.isNamedMatch(t)){let[n,i,a]=t.filter(o=>Boolean(o.value));if(n.name==="currency")return[{type:n.name,value:n.value}];{let o=this.integerGroupParser.parse(n.value);return i?[...o,{type:i.name,value:i.value},{type:a.name,value:a.value}]:o}}else return[{type:"literal",value:t}]}))}static get format(){let e=Be.NamedRegExp.create("(?:(?<integer-group>(?:i.*i|i))(?:(?<decimal>[^f])(?<fraction>f+))?|(?<currency>C+))");return new Ce(e,be.integerFormat)}static examplePattern(e){let t=J.Numerals.get(e),n=Be.NamedRegExp.create(`(?:(?<integer-group>${t.format(1)}.*${t.format(2)})(?:(?<decimal>.)(?<fraction>${t.format(3)}+))?|(?<currency>${W.get(e).pattern}))`);return new Ce(n,be.digits(e))}};s(Ce,"PartsFromFormat");et.__decorate([fc.lazy],Ce,"format",null);et.__decorate([or.cache],Ce,"examplePattern",null);D.PartsFromFormat=Ce;var be=class{constructor(e){this.regex=e}parse(e){return Ae.array(this.regex.iterate(e),he.map(t=>Be.isNamedMatch(t)?{type:"integer",value:t[0].value}:{type:"group",value:t}))}static digits(e){return new be(Be.NamedRegExp.create(`(?<integer>[${J.digits(e)}]+)`))}static get integerFormat(){return new be(Be.NamedRegExp.create("(?<integer>i+)"))}};s(be,"IntegerGroupParser");et.__decorate([or.cache],be,"digits",null);et.__decorate([fc.lazy],be,"integerFormat",null);D.IntegerGroupParser=be});var Ps=L(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.implicitMoneyParser=pe.findDecimalSeparator=pe.flexibleMoneyParser=pe.FlexibleMoneyParser=pe.flexibleParse=void 0;var wc=fe(),kt=vc(),ce=Re(),ip=Ke(),lr=le(),ur=N(),sp=pt(),ap=Oe(),op=He(),cp=mt();function lp(r,e="en",t){return new Me(e,t).parse(r)}s(lp,"flexibleParse");pe.flexibleParse=lp;var Me=class{constructor(e,t){this.locale=e,this.options=t}get pattern(){return Me.patternFor(this.locale)}static patternFor(e){return ip.NamedRegExp.create(ce.atBoundaryOnly(`(?<currency>${kt.CurrencySymbols.get(e).pattern})?(?<literal>[${ce.Spaces.spaces}])?(?<number>${ce.numberPattern(e)})(?<literal>[${ce.Spaces.spaces}])?(?<currency>${kt.CurrencySymbols.get(e).pattern})?`))}parse(e){try{return this.parseSingle(this.pattern.match(e))}catch(t){throw new Error(`Unable to parse ${e}`)}}parseAll(e){return ur.array(this.pattern.exec(e),ce.mapIgnoreError(t=>this.parseSingle(t)))}parseSingle(e){let{currency:t}=ur.single(e,lr.filter(a=>a.name==="currency"&&a.value!==void 0),lr.flatMap(a=>{try{let o=kt.CurrencySymbols.get(this.locale).parse(a.value,this.options&&this.options.strategy);return[{currency:o,exactMatch:o===a.value}]}catch(o){return[]}}),lr.sort(ur.by("exactMatch",ur.descending)),lr.first()),n=ur.single(e,lr.find(a=>a.name==="number"&&a.value!==void 0)).value,i=ce.numberParser(this.options&&this.options.decimalSeparator||Ss(t,n),this.locale);return kt.money(t,i.parse(n))}};s(Me,"FlexibleMoneyParser");wc.__decorate([op.lazy],Me.prototype,"pattern",null);wc.__decorate([ap.cache],Me,"patternFor",null);pe.FlexibleMoneyParser=Me;function up(r="en",e){return new Me(r,e)}s(up,"flexibleMoneyParser");pe.flexibleMoneyParser=up;function xc(r){return r==="."?",":"."}s(xc,"flip");function Ss(r,e){let t=ce.separatorsOf(e);if(t.length===0)return".";let n=t[t.length-1],i=e.length-e.lastIndexOf(n)-1,a=kt.decimalsFor(r);if(t.length===1){if(i===3){if(a===3)throw new Error(`Can not parse ${e} as separator is ambiguous`);return xc(n)}return ce.decimalSeparator(n)}return sp.unique(t).length===1?xc(n):ce.decimalSeparator(n)}s(Ss,"findDecimalSeparator");pe.findDecimalSeparator=Ss;var Ds=class{constructor(e,t,n=new ce.NumberParser(i=>cp.get(()=>Ss(e,i),ce.inferDecimalSeparator(t)),t)){this.currency=e,this.parser=n}parse(e){let t=this.parser.parse(e);return{currency:this.currency,amount:t}}parseAll(e){return this.parser.parseAll(e).map(t=>({amount:t,currency:this.currency}))}};s(Ds,"ImplicitMoneyParser");function dp({currency:r,locale:e="en",strategy:t=ce.infer(e)}){return r?new Ds(kt.CurrencySymbols.get(e).parse(r,t),e):new ce.FailParser}s(dp,"implicitMoneyParser");pe.implicitMoneyParser=dp});var ua=k(le()),bi=k(N());function Ol(r){switch(typeof r){case"undefined":return!0;case"string":return r.trim()==="";case"number":return isNaN(r);case"object":{if(r==null)return!0;if(h.isObject(r))return Object.keys(r).length===0;if(Array.isArray(r))return r.length===0}}return!1}s(Ol,"isEmpty");var F=class{static noWhitespace(e){return e&&typeof e=="string"?e.replace(/\s+/g,""):""}static startWith(e,t){return e?e.substring(0,t.length)===t:e===t}static endsWith(e,t){return e.substring(e.length-t.length,e.length)===t}static isEmpty(e){return e===void 0||e===null?!0:e.trim().length===0}static isLowerCase(e){return e===e.toLowerCase()&&e!==e.toUpperCase()}static isUpperCase(e){return e===e.toUpperCase()&&e!==e.toLowerCase()}static kebabCase(e){return F.delimiterCase(e,"-")}static snakeCase(e){return F.delimiterCase(e,"_")}static delimiterCase(e,t){return e.replace(/([A-Z][a-z]+|\d+)/gm,`${t}$1`).replace(new RegExp(`^${t}`),"").toLowerCase()}static titleCase(e){return e.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())}};s(F,"Strings");function Kt(r,e,t){if(e(r))return t(r);switch(typeof r){case"undefined":return;case"object":{if(r===null)return null;if(Array.isArray(r))return r.map(n=>Kt(n,e,t));if(h.isObject(r))return h.keys(r).sort().reduce((n,i)=>{let a=r[i];return n[i]=Kt(a,e,t),n},{})}}return r}s(Kt,"walkValues");function vi(r,e){switch(typeof r){case"undefined":return;case"object":{if(r===null)return null;if(Array.isArray(r))return r.map(t=>vi(t,e));if(h.isObject(r))return h.keys(r).sort().reduce((t,n)=>{let i=r[n];return t[e(String(n))]=vi(i,e),t},{})}}return r}s(vi,"walkKeys");var h=class{static isObject(e){return e&&typeof e=="object"&&(e.constructor===Object||/Object.*native/.test(e.constructor.toString()))}static keys(e){return Object.keys(e)}static values(e){return Object.keys(e).map(t=>e[t])}static entries(e){return Object.keys(e).map(t=>[t,e[t]])}static removeEmpty(e){return e&&(h.isObject(e)?Object.keys(e).reduce((t,n)=>{let i=h.removeEmpty(e[n]);return Ol(i)||(t[n]=i),t},{}):e)}static sort(e){return e&&(Array.isArray(e)?e.map(h.sort):h.isObject(e)?Object.keys(e).sort().reduce((t,n)=>{let i=e[n];return t[n]=h.sort(i),t},{}):e)}static toLowerCase(e){return typeof e=="string"?e.toLowerCase():Array.isArray(e)?e.map(h.toLowerCase):p(()=>h.isObject(e))?Object.entries(e).reduce((t,[n,i])=>(t[n]=h.toLowerCase(i),t),{}):e}static snakeCase(e){return vi(e,F.snakeCase)}static filter(e,t){let n=h.keys(e).filter(t);return h.pick(e,...n)}static omit(e,...t){return t.reduce((n,i)=>(Reflect.deleteProperty(n,i),n),e)}static pick(e,...t){return t.reduce((n,i)=>(n[i]=e[i],n),{})}};s(h,"Objects");var P=class{static from(e){return Array.from(e)}static find(e,t){if(e.find)return e.find(t);let[n]=e.filter(t);return n}static findLastIndex(e,t){let n=[...e].reverse().findIndex(t);return n===-1?n:e.length-n-1}static toObject(e){return e.reduce((t,n)=>(Object.keys(n).forEach(i=>{i in t||(t[i]=n[i])}),t),{})}static flatten(e){return e.reduce((t,n)=>t.concat(n),[])}static flatMap(e,t){return e.flatMap?e.flatMap(t):P.flatten(e.map(t))}static unique(e){return Array.from(new Set(e))}static clean(e){return e.filter(Boolean)}static trim(e){return e.map(t=>t.trim())}static includes(e,t){return"includes"in e?e.includes(t):e.indexOf(t)!==-1}static first(e){return e[0]}static last(e){return e[e.length-1]}static safeReverse(e){return e?e.slice().reverse():[]}static shuffle(e){return e.map(t=>({value:t,order:Math.random()})).sort((0,bi.by)("order")).map(({value:t})=>t)}};s(P,"Arrays");var Hr=class{static path(e){let t=[e];for(;e.parentElement;)e=e.parentElement,t.push(e);return t}};s(Hr,"Elements");function p(r,e=void 0){try{let t=r();return typeof t=="undefined"?e:t}catch(t){return e}}s(p,"get");function Kr(r,e=void 0){return b(this,null,function*(){try{let t=yield r();return typeof t=="undefined"?e:t}catch(t){return e}})}s(Kr,"getAsync");function Rl(r,e){let t=e.toLowerCase(),n=P.find(Object.keys(r),a=>a.toLowerCase()===t);if(!n)return;let i=r[n];return typeof i=="string"?i.trim():i}s(Rl,"getValue");function qr(r,...e){if(!r)return[];if(Array.isArray(r))return P.clean(P.flatten(r.map(t=>qr(t,...e))));if(typeof r=="object"){let[t,...n]=e,i=Rl(r,t);return typeof i=="object"?qr(i,...n):n.length===0&&Boolean(i)?[i]:[]}return[]}s(qr,"getAll");var X=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof module!="undefined"?module:Function("return this")())();function _r(r,e,t){let n=r[e];return typeof n=="undefined"?r[e]=t:Array.isArray(n)?n.indexOf(t)==-1&&n.push(t):r[e]=[n,t],r}s(_r,"accumulateMultipleValues");function kl(r,e,t,n=i=>i){let i=[],a=0,o;for(;(o=r.exec(e))!=null;)i.push(n(e.substring(a,o.index))),i.push(t(o)),a=r.lastIndex;return i.push(n(e.substring(a))),i.join("")}s(kl,"regexReplace");function da(r){return kl(/\w+/g,r,e=>El(e[0]))}s(da,"titleCase");function El(r){return r.substr(0,1).toUpperCase()+r.substr(1).toLowerCase()}s(El,"caseWord");function pa(r,e){return r.slice(0,e)}s(pa,"limit");function fa(r){return p(()=>P.last(r.constructor.name.split("$")),"")}s(fa,"getClassName");var ma=k(Oe()),ya=k(He());function ne(r=X){return r.triptease=r.triptease||{},r.triptease.onboard=r.triptease.onboard||{},{triptease:r.triptease,onboard:r.triptease.onboard}}s(ne,"globalObjects");var ze;(function(n){n.Native="native",n.NonNative="non-native",n.NotImplemented="not-implemented"})(ze||(ze={}));function wi(r,e){return p(()=>e.split(".").reduce((t,n)=>t[n],r))}s(wi,"getProperty");function ga(r){return r==null?ze.NotImplemented:typeof r=="function"?r.toString().includes("native code")?ze.Native:ze.NonNative:ze.Native}s(ga,"isNative");function ha(r,...e){return e.reduce((t,n)=>(t[n]=ga(wi(r,n)),t),{})}s(ha,"features");var Ur=class{static exposeApi(){let e=ne(X).triptease;e.native||(e.native=Ur)}static getProperty(e){let t=wi(X,e);return ga(t)!==ze.NonNative?t:wi(Ur.window,e)}static get window(){let e=X;if(!e.document)return e;try{let t=e.document,n=t.querySelector("[name='triptease.native']");if(n)return n.contentWindow;let i=t.createElement("iframe");return i.style.display="none",i.setAttribute("title","blank"),i.setAttribute("aria-hidden","true"),i.setAttribute("name","triptease.native"),t.documentElement.appendChild(i),i.contentWindow}catch(t){return e}}},Z=Ur;s(Z,"Native"),Ve([ma.cache],Z,"getProperty",1),Ve([ya.lazy],Z,"window",1);var Ll=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}\.\d{3}Z)?$/;function jl(r){return Kt(r,e=>typeof e=="string"&&Ll.test(e),e=>{let t=new Date(e);return isNaN(t.valueOf())?e:t})}s(jl,"convertDates");var Fl=Z.getProperty("JSON.parse"),Hl=Z.getProperty("JSON.stringify"),Kl=Z.getProperty("Date.prototype.toISOString"),ie=class{static parse(e){return Fl(e)}static parseWithDates(e){return jl(ie.parse(e))}static stringify(e){return Hl(this.clean(e))}static clean(e){return Kt(e,t=>{let n=typeof t;switch(n){case"undefined":case"string":case"number":case"boolean":return!0;case"object":{if(t===null)return!0;if(Array.isArray(t)||h.isObject(t))return!1;if("toJSON"in t)return!0}}throw new Error(`Illegal JsonValue: ${n} ${t} `)},t=>t instanceof Date?Kl.call(t):t)}};s(ie,"Json");var I=class{static same(e,t){return ie.stringify(e)===ie.stringify(t)}static isSuperset(e,t){return e===null||t===null?I.same(e,t):Array.isArray(e)&&Array.isArray(t)?e.length>t.length?!1:e.every(n=>t.some(i=>I.isSuperset(n,i))):p(()=>h.isObject(e))&&p(()=>h.isObject(t))?Object.keys(e).reduce((n,i)=>n&&I.isSuperset(e[i],t[i]),!0):I.same(e,t)}static compress(e){let t=I.groupValues(e);return this.compressGrouped(t)}static compressGrouped(e){return Object.entries(e).reduce(({shared:t,unique:n},[i,a])=>{if(p(()=>h.isObject(a))){let o=I.compressGrouped(a);Object.keys(o.shared).length>0&&(t[i]=o.shared),o.unique.forEach((c,l)=>{n[l]=n[l]||{},Object.keys(c).length>0&&(n[l][i]=c)})}return Array.isArray(a)&&a.forEach((o,c)=>{n[c]=n[c]||{},P.unique(a.map(l=>ie.stringify(l))).length===1?t[i]=o:o!==void 0&&(n[c][i]=o)}),{shared:t,unique:n}},{shared:{},unique:[]})}static groupValues(e){let t=Array.from(e.reduce((o,c)=>Object.keys(c).reduce((l,f)=>l.add(f),o),new Set)),[n,i]=e.reduce((o,c)=>t.reduce(([l,f],x)=>{let O=c[x];return p(()=>h.isObject(O))?(f[x]=f[x]||[],f[x].push(O)):(l[x]=l[x]||[],l[x].push(O)),[l,f]},o),[{},{}]),a=Object.entries(i).reduce((o,[c,l])=>(o[c]=I.groupValues(l),o),{});return S(S({},n),a)}static decompress(e){return e.unique.map(t=>this.merge(e.shared,t))}static merge(e,t){return[...Object.keys(e),...Object.keys(t)].reduce((i,a)=>{let o=e[a],c=t[a];return p(()=>h.isObject(o))&&p(()=>h.isObject(c))?i[a]=I.merge(o,c):i[a]=c!=null?c:o,i},{})}};s(I,"JsonValues");function se(r,e=!0){return r?(r.indexOf("?")==0&&(r=r.substring(1,r.length)),r.split("&").map(function(t){return t.split("=")}).reduce(function(t,n){let i=n[0],a=n[1];if(!i)return t;let o=ba(a),c=e?ql(o):o;return _r(t,ba(i),c)},{})):{}}s(se,"queryObject");function ba(r){return p(()=>decodeURIComponent(r.replace(/\+/g,"%20")),r)}s(ba,"decode");function ql(r){try{return ie.parse(r)}catch(e){return r}}s(ql,"coerce");var xi=class{constructor(e){let t=xi.RFC_3986.exec(e);if(!t)throw new Error(`Invalid Uri: ${e}`);let[,,n,,i,a,,o,,c]=t;this.scheme=n,this.authority=i?new $r(i):void 0,this.path=a,this.query=o,this.fragment=c}toString(){let e=[];return typeof this.scheme!="undefined"&&e.push(this.scheme,":"),typeof this.authority!="undefined"&&e.push("//",this.authority.toString()),e.push(this.path),typeof this.query!="undefined"&&e.push("?",this.query),typeof this.fragment!="undefined"&&e.push("#",this.fragment),e.join("")}get host(){return this.authority&&this.authority.host}get port(){return this.authority&&this.authority.port}get userInfo(){return this.authority&&this.authority.userInfo}},K=xi;s(K,"Uri"),K.RFC_3986=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;var Si=class{constructor(e){let t=Si.RFC_3986.exec(e);if(!t)throw new Error(`Invalid Authority: ${e}`);let[,n,i,a]=t;this.userInfo=n,this.host=i,this.port=a}toString(){let e=[];return typeof this.userInfo!="undefined"&&e.push(this.userInfo,"@"),typeof this.host!="undefined"&&e.push(this.host),typeof this.port!="undefined"&&e.push(":",this.port),e.join("")}},$r=Si;s($r,"Authority"),$r.RFC_3986=/(?:([^@]+)@)?([^:]+)(?::([\d]+))?/;var va=Z.getProperty("console.log"),_l=Z.getProperty("console.error"),Ul=Z.getProperty("console.debug"),Di=class{constructor(e=va,t=_l,n=Ul||va){this.log=e;this.error=t;this.debug=n}};s(Di,"ConsoleLogger");var Pi=class{constructor(){this.log=s(()=>{},"log");this.error=s(()=>{},"error");this.debug=s(()=>{},"debug")}};s(Pi,"NoOpLogger");var wa="triptease-debug",$l=256;function Nl(r,e=wa){let t=p(()=>{var n;return se((n=r.location)==null?void 0:n.search,!1)[e]})||p(()=>{var n;return se(new K((n=r.location)==null?void 0:n.originalHref).query,!1)[e]})||p(()=>{var n,i;return(i=(n=r.process)==null?void 0:n.env)==null?void 0:i.DEBUG})||p(()=>{var n;return((n=r.localStorage)==null?void 0:n.getItem)&&r.localStorage.getItem(e)})||p(()=>{var n;return((n=r.sessionStorage)==null?void 0:n.getItem)&&r.sessionStorage.getItem(e)})||"";return p(()=>t.substring(0,$l),"")}s(Nl,"globalParameter");function Bl(r){return Nl(r,wa).split(",").map(e=>e.trim())}s(Bl,"debugPatterns");function xa(r){let e=r.replace(/\./g,"\\.").replace(/\*/g,".*");return new RegExp("^"+e+"$")}s(xa,"wildcardToRegexp");function Gl(r,e=X){try{let t=Bl(e),n=t.filter(i=>i[0]==="!").map(i=>i.substr(1));return n.length>0?!n.some(i=>xa(i).test(r)):t.some(i=>i==="true"||xa(i).test(r))}catch(t){return!1}}s(Gl,"nameMatches");var Ai=class{constructor(e){this.name=e;this.console=new Di}debug(e,...t){this.console.debug(`[${this.name}] ${e}`,...t)}log(e,...t){this.console.log(`[${this.name}] ${e}`,...t)}error(e,...t){this.console.error(`[${this.name}] ${e}`,...t)}};s(Ai,"NamedLogger");function C(r,e=X){return Gl(r,e)?new Ai(r):new Pi}s(C,"namedLogger");var Np=new Set(["Unknown","PossibleIdentifier"]),Nr=new Set(["HotelName","HotelCode","ChainCode"]);function Ti(r){return r&&typeof r=="object"&&r.constructor===Object&&typeof r["@type"]=="string"}s(Ti,"isStructuredData");function Sa(r,e){return Ti(r)&&e(r["@type"])}s(Sa,"isStructuredDataType");function Da(r){return Sa(r,e=>e==="LodgingReservation")}s(Da,"isLodgingReservation");function Pa(r){return r&&typeof r=="object"&&r.checkin instanceof Date&&r.checkout instanceof Date}s(Pa,"hasSearchDates");var T;(function(c){c.Search="Search",c.RoomsAndRates="RoomsAndRates",c.Confirmation="Confirmation",c.Payment="Payment",c.Group="Group",c.Partial="Partial",c.Unknown="Unknown"})(T||(T={}));var Vl=[T.Payment,T.Confirmation,T.RoomsAndRates,T.Search,T.Partial,T.Group,T.Unknown];function Aa(r){return Vl.indexOf(r)}s(Aa,"pageRanking");var Ta;(function(n){n.Singleton="Singleton",n.ApplicationHost="ApplicationHost",n.DataSource="DataSource"})(Ta||(Ta={}));function ot(r){return r?typeof r=="object"&&("integrationId"in r||"clientKey"in r||"apiKey"in r||"identifiers"in r||"type"in r):!1}s(ot,"isScrapedIdentifiers");var mo=k(Ze()),an=k(zi());function Zi(r){return r&&typeof r=="object"?r.constructor===Date&&!isNaN(r.getTime()):!1}s(Zi,"isDate");function yo(r,e){return p(()=>an.Days.between(an.Days.startOf(r),an.Days.startOf(e)))}s(yo,"nights");function go(r){if(r===void 0||!r.type)return!1;switch(r.type){case T.RoomsAndRates:return Qi(r);case T.Confirmation:return es(r);default:return!0}}s(go,"isPageValid");function Iu(r){return Array.isArray(r)&&r.some(e=>e.price>0&&e.currency)}s(Iu,"hasValidRates");function Qi(r){return r&&typeof r=="object"?Zi(r.checkin)&&Zi(r.checkout)&&r.checkin.getTime()<r.checkout.getTime()&&typeof r.adults=="number"&&typeof r.children=="number"&&(Iu(r.rateDetails)||!!r.ratesModified):!1}s(Qi,"isRoomsAndRatesPageData");function es(r){return r&&typeof r=="object"?typeof r.reference=="string"&&!F.isEmpty(r.reference)&&typeof r.price=="number"&&typeof r.currency=="string":!1}s(es,"isConfirmationPageData");function Mu(r){if(r===void 0||!r.type)return!1;switch(r.type){case T.RoomsAndRates:return Xt(r);case T.Confirmation:return Lu(r);default:return!1}}s(Mu,"isPartialPage");function Xt(r){return r&&typeof r=="object"?Array.isArray(r.rateDetails)&&r.rateDetails.length>0||!!r.ratesModified:!1}s(Xt,"isPartialRoomsAndRates");function Lu(r){return r&&typeof r=="object"?typeof r.reference=="string"&&!F.isEmpty(r.reference):!1}s(Lu,"isPartialConfirmation");function ho(r){let[e]=r.map(h.removeEmpty).filter(Mu);if(!!e)return E(S({},e),{type:T.Partial,partialType:e.type})}s(ho,"findPartial");function ts(r){let{rateDetails:e}=r;if(!e)return[];let t=e.filter(n=>n.price>0&&!F.isEmpty(n.currency));return P.unique(t.map(n=>n.currency)).length>1?[]:t}s(ts,"validRates");function ju(r){try{let{target:e,method:t}=Ku(r.type);if(e&&t)return!0}catch(e){}return!1}s(ju,"isOnboardMessage");var Zt=class{constructor(e,t,n=Fu,i=C("messaging")){this.listener=e;this.target=t;this.allowedOrigins=n;this.logger=i}addListener(e){this.listener&&this.listener.addEventListener("message",t=>{this.disallowedOrigin(t)||!ju(t.data)||e(t.data,new Zt(void 0,t.source||this.target))})}disallowedOrigin(e){return e.origin&&this.allowedOrigins.length>0&&this.allowedOrigins.indexOf(new K(e.origin).host)===-1}send(e){if(this.target)try{this.target.postMessage(e,"*")}catch(t){this.target.postMessage(JSON.parse(JSON.stringify(e)),"*")}}};s(Zt,"WindowHandler");var Fu=["onboard.triptease.io","localhost"],Hu=/^(.*)\.([^.]+)$/;function Ku(r){let[,e,t]=r.match(Hu)||[];return{target:e,method:t}}s(Ku,"targetAndMethod");function rs(r){let e={};return function(...t){let n=JSON.stringify(t),i=e[n];return typeof i!="undefined"?i:e[n]=r(...t)}}s(rs,"caching");function qu(r){return r.document.querySelector('iframe[name="triptease.onboard.kernel"]')}s(qu,"kernelFrame");function bo(r){let e=qu(r);if(e&&e.contentWindow)return new Zt(r,e.contentWindow)}s(bo,"handlerFor");function vo(r){return r&&typeof r=="object"&&"name"in r&&typeof r.name=="string"&&"message"in r&&typeof r.message=="string"&&"stack"in r&&typeof r.stack=="string"}s(vo,"isError");var on,_u=new Uint8Array(16);function ns(){if(!on&&(on=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!on))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return on(_u)}s(ns,"rng");var wo=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Uu(r){return typeof r=="string"&&wo.test(r)}s(Uu,"validate");var xo=Uu;var V=[];for(cn=0;cn<256;++cn)V.push((cn+256).toString(16).substr(1));var cn;function $u(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(V[r[e+0]]+V[r[e+1]]+V[r[e+2]]+V[r[e+3]]+"-"+V[r[e+4]]+V[r[e+5]]+"-"+V[r[e+6]]+V[r[e+7]]+"-"+V[r[e+8]]+V[r[e+9]]+"-"+V[r[e+10]]+V[r[e+11]]+V[r[e+12]]+V[r[e+13]]+V[r[e+14]]+V[r[e+15]]).toLowerCase();if(!xo(t))throw TypeError("Stringified UUID is invalid");return t}s($u,"stringify");var So=$u;function Nu(r,e,t){r=r||{};var n=r.random||(r.rng||ns)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return So(n)}s(Nu,"v4");var is=Nu;var Bu=s(()=>p(()=>crypto.randomUUID())||is(),"uuid"),ln=class{generate(e){if(typeof e!="undefined")throw new Error("UuidGenerator does not support custom lengths");return Bu().replace(/-/g,"")}};s(ln,"UUIDGenerator");var ss=class{constructor(e,t){this.messaging=e;this.idGenerator=t}get(e,t,n){return(...i)=>b(this,null,function*(){let a=this.idGenerator.generate(),{payload:o}=yield this.messaging.handle({type:"triptease.onboard.request",requestType:String(t),payload:i,correlationId:a});if(vo(o))throw o;return o})}};s(ss,"MessageProxy");function un(r,e=new ln){return new Proxy({},new ss(r,e))}s(un,"messageProxy");var dn=class{constructor(e,t=un(e)){this.proxy=t;this.applicationConfig=rs(e=>b(this,null,function*(){return yield this.proxy.applicationConfig(e)}));this.generateConfig=rs(e=>b(this,null,function*(){return yield this.proxy.generateConfig(e)}))}};s(dn,"KernelProxy");var pn=class{constructor(e,t){this.providers=e;this.logger=t}scrape(){return b(this,null,function*(){return(yield Promise.all(this.providers.map(t=>b(this,null,function*(){try{return this.clean(yield t.scrape())}catch(n){return this.logger.error("Scraper threw error, probable identification failure",n),{}}})))).reduce((t,n)=>S(S({},t),n),{})})}clean(e){let t=h.removeEmpty(e);return t.identifiers&&(t.identifiers=t.identifiers.filter(n=>!!n.identifier).map(n=>({identifier:n.identifier.toString().trim(),type:n.type,identifierType:n.identifierType})).filter(n=>!F.isEmpty(n.identifier))),t}};s(pn,"CompositeScraper");function Qt(r){if(F.isEmpty(r))return{};if(r.indexOf(":")!==-1){let[e,t]=r.split(":");return{clientKey:e,identifiers:[{identifier:t,type:"Trusted",identifierType:"HotelCode"}]}}return{apiKey:r}}s(Qt,"processApiKey");function fn(r){if(!ot(r))return{};let{integrationId:e,clientKey:t,apiKey:n,identifiers:i,type:a}=r,o=Qt(n);return e&&(o.integrationId=e),t&&(o.clientKey=t),i&&(o.identifiers=i),a&&(o.type=a),o}s(fn,"processIdentifiers");var St=class{constructor(){this.scripts=[]}static create(e){let t=ne(e).onboard,n=t.stackScriptFinder;return n||(t.stackScriptFinder=new St)}capture(){let e=Vu();!e||this.scripts.push(e)}get(){return this.scripts}};s(St,"StackScriptFinder");var Gu=/(https?.*):\d+:\d+/;function Vu(){try{throw new Error}catch(r){if(!r.stack)return;let e=r.stack.match(Gu);if(!e)return;let t=e[1];return new K(t)}}s(Vu,"scriptUri");var Dt=class{static find(e){return this.scripts(e).map(t=>new K(t.src))}static scripts(e){let n=["bootstrap.js","/paperboy/","/identity-service/confirm"].map(a=>`script[src*="${a}"][src*="triptease.io"]`);n.push('script[src*="triptease.net"]');let i=n.join(", ");return e.querySelectorAll(i)}};s(Dt,"ScriptsFinder");var er=class{static difference(e,t){return Array.from(e).reduce((n,i)=>t.has(i)?n:n.add(i),new Set)}};s(er,"Sets");var Ue=C("events"),mn=class{constructor(e,t){this.timers=e;this.handle=t;this.finders=new Set;this.keepers=new Set;this.handleEvent=s(e=>b(this,null,function*(){try{Ue.debug("CreatedOrDeletedEvents: Checking for new created items");let t=new Set(Array.from(this.finders).flatMap(a=>a()));Ue.debug("CreatedOrDeletedEvents: found",t);let n=er.difference(t,this.keepers);Ue.debug("CreatedOrDeletedEvents: newItems",n);let i=er.difference(this.keepers,t);Ue.debug("CreatedOrDeletedEvents: deletedItems",i),this.keepers=t,(n.size>0||i.size>0)&&(Ue.log(`CreatedOrDeletedEvents: ${n.size} created, ${i.size} deleted element detected - firing event`),yield this.handle(e))}catch(t){Ue.error("CreatedOrDeletedEvents.handleEvent threw while polling",t)}}),"handleEvent")}start(){return b(this,null,function*(){Ue.log("Start polling for created items"),this.id=this.timers.setInterval(this.handleEvent,1e3)})}stop(){return b(this,null,function*(){Ue.log("Stop polling for created items"),this.id&&(this.timers.clearInterval(this.id),this.id=void 0)})}watch(e){e().forEach(n=>this.keepers.add(n)),this.finders.add(e)}};s(mn,"CreatedOrDeletedEvents");function Do(r,e){return()=>Array.from(r.querySelectorAll(e))}s(Do,"selectorFinder");var cm=Z.getProperty("Date");var yn=class{now(){return new Date}};s(yn,"SystemClock");function Po(r){return new Promise(e=>{this.setTimeout(()=>{e()},r)})}s(Po,"delay");var oe=class{constructor(e=new yn){this.clock=e;this.delay=Po.bind(this);this.delay=Po}task(e){return b(this,null,function*(){return yield this.delay(0),e()})}setTimeout(e,t){return setTimeout(e,t)}clearTimeout(e){clearTimeout(e)}setInterval(e,t){return setInterval(e,t)}clearInterval(e){clearInterval(e)}requestIdleCallback(e,t){let n=t?t.timeout:1,i=this.clock.now().getTime()+n,a=this;return this.setTimeout(()=>{e({didTimeout:!1,timeRemaining(){return Math.max(0,50-(a.clock.now().getTime()-i))}})},n)}cancelIdleCallback(e){this.clearTimeout(e)}};s(oe,"SystemTimers");var pm=new oe;var Wu=C("events"),gn=class{constructor(e,t){this.window=e;this.delegate=t;this.first=!0;this.fire=s(e=>b(this,null,function*(){if(this.window.document.hidden&&!this.first){Wu.log("Document hidden - skipping",e);return}yield this.delegate.fire(),this.first=!1}),"fire")}listen(e){return b(this,null,function*(){yield this.delegate.listen(e)})}removeListener(e){this.delegate.removeListener(e)}};s(gn,"VisibilityGuard");var as=C("events"),hn=class{constructor(e,t){this.delegate=e;this.running=t;this.fire=s(e=>b(this,null,function*(){if(this.running.value){as.log("Already running - skipping",e);return}this.running.value=!0,yield this.delegate.fire(),this.running.value=!1}),"fire")}listen(e){return b(this,null,function*(){if(yield this.delegate.listen(e),this.running.value){as.log("Already running - firing immediately");try{yield e()}catch(t){as.log(t)}}})}removeListener(e){this.delegate.removeListener(e)}};s(hn,"EventsGuard");var Ao=C("events"),bn=class{constructor(){this.handlers=[];this.fire=s(e=>b(this,null,function*(){Ao.log(`Firing handlers(${this.handlers.length})`,e),yield Promise.all(this.handlers.map(t=>b(this,null,function*(){try{yield t()}catch(n){Ao.log("Error while firing handler",n)}})))}),"fire")}listen(e){return b(this,null,function*(){this.handlers.push(e)})}removeListener(e){this.handlers=this.handlers.filter(t=>t!==e)}};s(bn,"EventsMultiplexer");var To=C("events"),vn=class{constructor(e,t){this.timers=e;this.delegate=t;this.timeoutMs=1e3;this.timerId=0;this.fire=s(e=>b(this,null,function*(){To.log(`Event observed, waiting for ${this.timeoutMs} ms quiet`,e),this.timers.clearInterval(this.timerId),this.timerId=this.timers.setTimeout(()=>b(this,null,function*(){To.log("Event quiet period ended, firing event",e),yield this.delegate(e)}),this.timeoutMs)}),"fire")}};s(vn,"EventCollapser");var zu=C("events"),wn=class{constructor(e,t,n=.2,i=new oe){this.handle=e;this.running=t;this.idleThreshold=n;this.timers=i;this.lastState=!1;this.busy=!1;this.average=new Pt;this.idleHandler=s(e=>{let t=e.timeRemaining();this.running.value?this.busy=!1:t===0?this.busy=!0:(this.average=this.average.calculate(t),this.busy=this.average.percentage<-this.idleThreshold),this.busy?this.idleId=void 0:this.idleId=this.timers.requestIdleCallback(this.idleHandler,t===0?void 0:{timeout:t})},"idleHandler");this.intervalHandler=s(()=>b(this,null,function*(){this.stateHasChanged()&&this.isIdle()&&(zu.log("Browser idle"),yield this.handle("Idle")),this.average=new Pt,this.lastState=this.busy,this.idleId||(this.idleId=this.timers.requestIdleCallback(this.idleHandler))}),"intervalHandler")}start(){return b(this,null,function*(){this.intervalId=this.timers.setInterval(this.intervalHandler,1e3),this.idleId=this.timers.requestIdleCallback(this.idleHandler)})}stop(){return b(this,null,function*(){this.intervalId&&this.timers.clearInterval(this.intervalId),this.idleId&&this.timers.cancelIdleCallback(this.idleId)})}isIdle(){return!this.busy}stateHasChanged(){return this.lastState!==this.busy}};s(wn,"IdleEvents");var Pt=class{constructor(e=0,t=0,n=0,i=0){this.value=e;this.count=t;this.difference=n;this.percentage=i}calculate(e){let t=this.count+1,n=e-this.value,i=n/this.value,a=this.value+n/t;return new Pt(a,t,n,i)}};s(Pt,"StreamingAverage");var xn=class{constructor(e,t){this.window=e;this.handle=t}start(){return b(this,null,function*(){this.window.addEventListener("visibilitychange",this.handle),this.window.addEventListener("popstate",this.handle),this.window.addEventListener("hashchange",this.handle),this.window.addEventListener("pageshow",this.handle),this.window.addEventListener("pagehide",this.handle),this.window.document.readyState!=="complete"?this.window.document.addEventListener("DOMContentLoaded",this.handle):yield this.handle("Document already loaded")})}stop(){return b(this,null,function*(){this.window.removeEventListener("visibilitychange",this.handle),this.window.removeEventListener("popstate",this.handle),this.window.removeEventListener("hashchange",this.handle),this.window.removeEventListener("pageshow",this.handle),this.window.removeEventListener("pagehide",this.handle),this.window.document.removeEventListener("DOMContentLoaded",this.handle)})}};s(xn,"WindowEvents");var Sn=class{constructor(){this.value=!1}};s(Sn,"Running");var os=class{constructor(e,t=new oe){this.window=e;let n=new Sn;this.sink=new gn(e,new hn(new bn,n)),this.fire=new vn(t,this.sink.fire).fire,this.mutation=new At(this.fire),this.created=new mn(t,this.fire),this.sources=[new wn(this.fire,n),this.mutation,this.created,new xn(e,this.fire)]}watch(e){this.created.watch(e)}listen(e){return b(this,null,function*(){yield this.sink.listen(e)})}start(){return b(this,null,function*(){yield Promise.all(this.sources.map(e=>e.start()))})}stop(){return b(this,null,function*(){this.sources.forEach(e=>e.stop())})}removeListener(e){this.sink.removeListener(e)}};s(os,"DefaultEvents");function Dn(r){let e=ne(r).triptease;return e.events=e.events||new os(r)}s(Dn,"defaultEvents");var Ju={characterData:!0,attributes:!0,childList:!0},At=class{constructor(e){this.handle=e;this.observer=new MutationObserver(this.handle)}start(){return b(this,null,function*(){})}stop(){return b(this,null,function*(){this.observer.disconnect()})}static observe(e,t=Ju){if(!("MutationObserver"in X))return e;let n=Dn(X).mutation;return e instanceof HTMLInputElement||e instanceof HTMLSelectElement?e.addEventListener("change",n.handle):n.observer.observe(e,t),e}};s(At,"MutationEvents");function cs(r,e=X){return p(()=>Dn(e).watch(Do(e.document,r))),r}s(cs,"watch");var Pn=class{constructor(e){this.parent=e}querySelector(e,t){let n=this.parent.querySelector(e);return n||void 0}querySelectorAll(e,t){return Array.from(this.parent.querySelectorAll(e))}};s(Pn,"DomSelectorApi");var ge=class{constructor(e){this.parent=e}querySelector(e,t){var i;cs(e,(i=this.parent.ownerDocument)==null?void 0:i.defaultView);let n=this.parent.querySelector(e);return n?At.observe(n,t):void 0}querySelectorAll(e,t){var n;return cs(e,(n=this.parent.ownerDocument)==null?void 0:n.defaultView),Array.from(this.parent.querySelectorAll(e)).map(i=>At.observe(i,t)).filter(Boolean)}};s(ge,"ObservableSelectorApi");var $e=class{constructor(e){this.window=e}scrape(){let e=Dt.find(new Pn(this.window.document)),t=St.create(this.window).get();return $e.extract([...e,...t])}static extract(e){return h.removeEmpty(e.reduce((t,n)=>{let i=t.integrationId?[t.integrationId]:[],a=t.clientKey?[t.clientKey]:[],o=t.apiKey?[t.apiKey]:[],c=t.identifiers?t.identifiers:[],l=se(n.query,!1),f=$e.pathClientKey(n);f&&a.unshift(f),l.clientKey&&a.unshift(l.clientKey),i.unshift(l.integrationId);let x=$e.queryApiKey(l),O=Qt(x);O.apiKey&&o.unshift(O.apiKey),O.clientKey&&a.unshift(O.clientKey),O.identifiers&&c.unshift(O.identifiers[0]);let[w]=i.filter(Boolean),[U]=a.filter(Boolean),[Le]=o.filter(Boolean),$=c.filter(Boolean);return{integrationId:w,clientKey:U,apiKey:Le,identifiers:$}},{}))}static queryApiKey(e){return e.apiKey||e.hotelkey||e.hotelKey||e["api-key"]||e.token}static pathClientKey(e){if(e.host==="paperboy.triptease.net"){let[,n]=e.path.match(/\/+([^/.]+)(?:\.js)?$/)||[];return n}let[,t=""]=e.path.match(/\/paperboy\/+([^/.]+)(?:\.js)?$/)||[];if(t!="paperboy"&&t!="confirm")return t}};s($e,"ScriptScraper");function Co(r,e){if(e){let t=p(()=>r.tt_apiKeys[e])||p(()=>r.ttApiKeys[e])||p(()=>r.document.apiKeys[e])||p(()=>r.document.ttApiKeys[e]);if(t)return ls(t)}return ls(p(()=>r.ttData.apiKey)||r.ttApiKey||r.document.ttApiKey)}s(Co,"getApiKey");function Oo(r){return ls(r.tt_clientKey||r.document.ttClientKey||r.document.tt_clientKey)}s(Oo,"getClientKey");var Yu=["CLIENT_KEY","API_KEY"];function ls(r){if(!!r&&!Yu.includes(r))return r}s(ls,"cleanKey");var An=class{constructor(e){this.window=e}scrape(){let e=Co(this.window),t=Qt(e);return h.removeEmpty(E(S({},t),{clientKey:Oo(this.window)}))}};s(An,"LegacyScraper");var Tn=class{constructor(e){this.pageData=e}scrape(){return fn(this.pageData)}};s(Tn,"PageScraper");var In=k(N());var Xu=C("integration-executor"),Cn=class{process(e){let t=E(S({},e),{basePrice:Ro(e.price,e.basePrice),reservationStatus:Qu(e)});return t.reservations=ed(t),t.basePrice=t.basePrice||ko("basePrice",t.reservations),h.removeEmpty(t)}};s(Cn,"ConfirmationProcessor");function Zu(r,e){return e?r?r>e:!0:!1}s(Zu,"isBasePriceValid");function Ro(r,e){return Zu(r,e)?e:void 0}s(Ro,"validatedBasePrice");function Qu(r){let{reservationStatus:e,reservations:t}=r;if(e)return e;if(!t)return"confirmed";let n=P.unique(t.map(i=>i.reservationStatus));return n.length===1?n[0]:"modified"}s(Qu,"calculateReservationStatus");function ed(r){let{reference:e,price:t,currency:n,basePrice:i,reservationStatus:a}=r;if(!r.reservations)return[h.removeEmpty({reference:e,price:t,currency:n,basePrice:i,reservationStatus:a})];let o=r.reservations.map(l=>h.removeEmpty(E(S({},l),{basePrice:Ro(l.price,l.basePrice)}))),c=ko("basePrice",o);return c!==void 0&&c===t?td("basePrice","price",o):o}s(ed,"calculateReservations");function ko(r,e){if(e.every(t=>t[r]))return e.reduce((t,n)=>n.reservationStatus==="confirmed"?t+n[r]:t,0)}s(ko,"sumOf");function td(r,e,t){return t.every(n=>!n[e])?(Xu.log(`Changing label from ${r} to ${e} in reservations`),t.map(n=>h.removeEmpty(E(S({},n),{[e]:n[r],[r]:void 0})))):t}s(td,"changeLabel");var Io=k(N()),On=k(le());var tr;(function(n){n.Unknown="Unknown",n.Total="Total",n.Nightly="Nightly"})(tr||(tr={}));function Eo(r){return r===!0?tr.Total:r===!1?tr.Nightly:tr.Unknown}s(Eo,"asPriceType");var rd=C("integration-executor"),Rn=class{constructor(e,t){this.window=e;this.history=t}process(e){let t=h.removeEmpty(E(S({},e),{type:T.RoomsAndRates}));return t.rateDetails=ts(e),t.ratesModified=this.calculateRatesModified(t),t.priceType=Eo(t.total),t}calculateRatesModified(e){let{ratesModified:t,promoCodes:n}=e;return t||(this.hasSearchChangedWithoutRatesChanging(e)||this.hasCurrencyChangedWithoutPricesChanging(e)?"untrusted":this.hasRatesChangedWithoutSearchChanging(e)?"roomOrRateFiltered":n&&n.length>0?"discountCode":"none")}hasCurrencyChangedWithoutPricesChanging(e){let t=this.history.find(i=>Xt(i));return!((t==null?void 0:t.rateDetails)&&(e==null?void 0:e.rateDetails)&&t.rateDetails.length===e.rateDetails.length&&e.rateDetails.length>0)||!!I.same(Mo(e.rateDetails,"currency"),Mo(t.rateDetails,"currency"))?!1:I.same(us(e.rateDetails,"currency"),us(t.rateDetails,"currency"))}hasSearchChangedWithoutRatesChanging(e){let t=this.history.find(n=>Xt(n));if(!t)return!1;if(!I.same(kn(e),kn(t)))return I.same(En(e.rateDetails),En(t.rateDetails))}hasRatesChangedWithoutSearchChanging(e){let t=this.history.find(o=>Xt(o));if(!t||!I.same(kn(e),kn(t)))return!1;let{rateDetails:n,ratesModified:i}=t;if(i==="roomOrRateFiltered")return!0;if(i==="searchInProgress"||i==="untrusted")return!1;let{rateDetails:a}=e;return!(ts(t).length===0&&a&&a.length>0||I.isSuperset(En(n),En(a))||nd(n,a))}};s(Rn,"RoomsAndRatesProcessor");function kn(r){let{apiKey:e,checkin:t,checkout:n,rooms:i,adults:a,children:o,total:c}=r;return h.removeEmpty({apiKey:e,checkin:t,checkout:n,rooms:i,adults:a,children:o,total:c})}s(kn,"searchParameters");function En(r){return us(r,"rateName","roomName","rateCode","roomCode")}s(En,"excludeNames");function us(r,...e){if(!r)return;let t=e.reduce((n,i)=>(n[i]=void 0,n),{});return r.map(n=>h.removeEmpty(S(S({},n),t)))}s(us,"excludeKeys");function Mo(r,...e){if(!!r)return r.map(t=>h.removeEmpty(e.reduce((n,i)=>(n[i]=t[i],n),{})))}s(Mo,"pickKeys");function nd(r,e){if(r.length===0||e.length===0||r.length!==e.length||r[0].currency===e[0].currency)return!1;let t=(0,Io.array)(r.map(o=>o.price),(0,On.zip)(e.map(o=>o.price)),(0,On.map)(([o,c])=>c/o)),n=Math.min(...t),i=Math.max(...t),a=(i-n)/i;return rd.debug(`Currency changed percentDifference ${a}`),a<.01}s(nd,"currencyChanged");var Mn=class{constructor(e,t,n=new Rn(e,t),i=new Cn){this.window=e;this.history=t;this.roomsAndRatesProcessor=n;this.confirmationProcessor=i}process(e){return this.addOptionalData((()=>{switch(e.type){case T.RoomsAndRates:return this.roomsAndRatesProcessor.process(e);case T.Confirmation:return this.addDatesFromSearch(this.confirmationProcessor.process(e));default:return e}})())}addOptionalData(e){let t=S({},e);return Pa(e)&&(t.nights=yo(e.checkout,e.checkin)),"rateDetails"in e&&e.rateDetails.length>0&&(t.rateSummary=id(e.rateDetails)),t}addDatesFromSearch(e){let{checkin:t,checkout:n}=e;if(t&&n)return e;let i=this.history.find(a=>a.type===T.RoomsAndRates);return h.removeEmpty(E(S({},e),{checkin:p(()=>i.checkin),checkout:p(()=>i.checkout)}))}};s(Mn,"IntegrationDataProcessor");function id(r){if(!r||r.length===0)return;let e=[...r].sort((0,In.by)("price",In.ascending)),[t]=e;return{count:r.length,currency:t.currency,min:t,max:P.last(e)}}s(id,"rateSummary");var Ln=class{constructor(e){this.rules=e}clean(e){return typeof e=="string"?this.rules.reduce((t,n)=>typeof n=="function"?n(t):t.replace(n.search,n.replace),e):Array.isArray(e)?e.map(Pe):e&&typeof e=="object"?Object.keys(e).reduce((t,n)=>{let i=e[n];return t[n]=this.clean(i),t},{}):e}};s(Ln,"Cleaner");var Lo=s(r=>r.trim(),"trim"),sd={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x60;":"`","&nbsp;":" "},ad=s(function(r){let e="(?:"+Object.keys(r).join("|")+")",t=RegExp(e),n=RegExp(e,"g");return function(i){return t.test(i)?i.replace(n,a=>r[a]):i}},"createEscaper"),jo=ad(sd),od={search:/{{.*}}/g,replace:""},cd={search:/[,.\/#!$%^*;:{}\[\]()=_`~®©™'\u201C\u201D\u2018\u2019]+/g,replace:""},Fo={search:/\s+/g,replace:" "},ld={search:/\sand\s/gi,replace:" & "},ud={search:/\s*(?:Image|Logo)\s*/gi,replace:""},dd={search:/\s*(?:Uniquement\s+Adultes|Adults?\s*(?:Only)\s*)/gi,replace:""},pd={search:/\sAll\sInclusive\s*/gi,replace:""},fd={search:/\s*[(\[]?Official\s*(?:Hotel)?\s*(?:((?:Web)?Site)|Homepage|booking\s*engine)\s*(?:for|of)?[)\]]?\s*/gi,replace:""},md={search:/\s&$/,replace:""},yd=new Ln([od,jo,cd,Fo,ud,dd,pd,fd,ld,md,da,Lo]),Ho=new Ln([jo,Fo,Lo]);function Pe(r){return yd.clean(r)}s(Pe,"clean");function ds(r){if(r.hasOwnProperty("parentElement"))return r.parentElement;let e=r.parentNode;return e instanceof Element?e:e?ds(e):null}s(ds,"parentOf");var gd=/^\s*$/,hd=s(r=>r instanceof Text&&gd.test(r.data),"isWhiteSpace"),bd=["script","style","noscript","a"].map(r=>r.toUpperCase()),vd=s(r=>r&&bd.indexOf(r.tagName)!==-1,"isUninterestingTag"),wd=s(r=>!hd(r)&&!vd(ds(r)),"isValid");function jn(r){return r instanceof Element?r:ds(r)}s(jn,"elementOf");function xd(r){let e=jn(r);if(!!e)return e.getBoundingClientRect()}s(xd,"clientRectOf");function Sd(r,e){let t=e.documentElement.scrollWidth,n=e.documentElement.scrollHeight,i=e.documentElement.scrollLeft,a=e.documentElement.scrollTop;if(t==0||n==0)return;let o=xd(r);if(!!o)return{x:(o.left+i)/t,y:(o.top+a)/n,width:o.width/t,height:o.height/n}}s(Sd,"positionOf");function Dd(r){if(r instanceof Text)return r.data.trim();if(r instanceof Element)return r.getAttribute("aria-label")||r.getAttribute("title")||r.getAttribute("alt")||void 0}s(Dd,"valueOf");function Pd(r,e=.8){return r.y<e&&r.width>0&&r.height>0}s(Pd,"isVisibleDefault");function Ko(r,e=Pd){let t=r.document,n=[],i=t.createNodeIterator(t.documentElement,NodeFilter.SHOW_TEXT,null);for(;;){let c=i.nextNode();if(!c)break;wd(c)&&n.push(c)}let a=t.querySelectorAll("[aria-label], img[title], img[alt]");for(let c=0;c<a.length;c++)n.push(a[c]);n.sort((c,l)=>{let f=jn(c).compareDocumentPosition(jn(l));return f&Node.DOCUMENT_POSITION_PRECEDING?1:f&Node.DOCUMENT_POSITION_FOLLOWING?-1:0});let o=[];for(let c=0;c<n.length;c++){let l=n[c],f=Sd(l,t);if(f&&!e(f))continue;let x=Dd(l);typeof x=="string"&&x.split(/[\r\n]/).forEach(O=>{if(O.length>2&&O.length<93){let w=jn(l);o.push({source:w?w.tagName.toLowerCase():"",type:"Untrusted",identifierType:"Unknown",identifier:Pe(O)})}})}return o}s(Ko,"getDocumentIdentifierSources");var Ad=["context.hotelName","Cart.HName","propertyName","ihReservations.ihHotelName","ihHotelName","HName","transactionHotelName","ratequeryHotelName","hpr","strippedPropertyName","property_name","flipto.sessionData.propertyName","HotelName"];function Td(r){return p(()=>r.event.indexOf("gtm.")===0,!1)}s(Td,"isGtmEvent");function qo(r){let e=Array.isArray(r)?r:r.dataLayer||[],t=P.safeReverse(e).filter(n=>!Td(n));return Ad.flatMap(n=>P.clean(P.unique(qr(t,...n.split(".")))).map(i=>({source:"dataLayer."+n,identifier:Pe(i),type:"Trusted",identifierType:"HotelName"})))}s(qo,"dataLayerIdentifiers");var Fn=class{constructor(e,t,n){this.scope=e;this.property=t;this.seed=n}parentScope(e){let[,...t]=Hr.path(e);return P.find(t,n=>n.hasAttribute(this.scope))}getValue(e){return e.hasAttribute(this.scope)?this.processScope(e):e.getAttribute("content")||e.getAttribute("src")||e.getAttribute("href")||e.getAttribute("data")||e.getAttribute("value")||e.getAttribute("datetime")||e.textContent}processScope(e){return P.from(e.querySelectorAll(`*[${this.property}]`)).filter(t=>this.parentScope(t)===e).reduce((t,n)=>{let i=n.getAttribute(this.property);return i?_r(t,i,Ho.clean(this.getValue(n))):t},this.seed(e))}processDocument(e){return new ge(e).querySelectorAll(`*[${this.scope}]`).map(this.processScope.bind(this))}};s(Fn,"StructuredDataExtractor");var Cd=new Fn("itemscope","itemprop",r=>{let t=(r.getAttribute("itemtype")||"Unknown").split("/");return Hn("microdata",{"@type":t.pop(),"@context":t.join("/")})}),Od=new Fn("typeof","property",r=>Hn("rdfa",{"@type":r.getAttribute("typeof"),"@context":r.getAttribute("vocab")})),Rd={processDocument(r){return P.flatten(new ge(r).querySelectorAll('script[type="application/ld+json"]').map(e=>{let n=(e.textContent||"").replace(/[\r\n]/g," ");try{let i=ie.parse(n),a=i["@graph"]||i;return Array.isArray(a)?a.map(o=>Hn("json-ld",o)):Hn("json-ld",i)}catch(i){return{"@type":"Error",error:i.toString(),json:n}}}))}};function Hn(r,e){return E(S({},e),{"@format":r})}s(Hn,"addFormat");var Qe={processDocument(r){return[...Rd.processDocument(r),...Cd.processDocument(r),...Od.processDocument(r)]}};function*_o(r,e){let t=Array.isArray(r)?r:[r];for(let n of t)if(n["@type"]===e)yield n;else for(let i of Object.values(n))Ti(i)&&(yield*_o(i,e))}s(_o,"filter");function Uo(r,e){let[t]=_o(r,e);return t}s(Uo,"find");function kd(r){if(!!r)return{latitude:Number(r.latitude),longitude:Number(r.longitude)}}s(kd,"convertGeoCoordinates");function $o(r){let e=kd(Uo(r,"GeoCoordinates")),t=Uo(r,"PostalAddress");return t?h.removeEmpty({geo:e,lines:[t.streetAddress,t.addressLocality].filter(Boolean),region:t.addressRegion,postalCode:t.postalCode,country:t.addressCountry}):h.removeEmpty({geo:e})}s($o,"getAddressFromStructuredData");function No(r,e){let t=Qe.processDocument(r).filter(n=>Id.indexOf(n["@type"])!==-1);return[...new Kn(ps,"Trusted",e).from(t),...new Kn(Bo,"Untrusted",e).from(t)].filter(n=>typeof n.identifier!="object")}s(No,"structuredDataIdentifiers");var Kn=class{constructor(e,t,n=!0){this.orderedStructuredDataTypes=e;this.type=t;this.appendBrand=n}from(e){return P.flatten(this.filterStructuredData(e).map(t=>{let n=(Array.isArray(t.name)?t.name:[t.name]).flatMap(a=>({source:`structuredData[@type='${t["@type"]}'].name`,identifier:Pe(this.addBrand(t.brand,a)),type:this.type,identifierType:Md(t["@type"])})),i=t.identifier;return i&&n.push({type:this.type,identifier:i,source:`structuredData[@type='${t["@type"]}'].identifier`,identifierType:"HotelCode"}),n}))}addBrand(e,t){return!this.appendBrand||!e||t.indexOf(e)>=0?t:`${e} ${t}`}filterStructuredData(e){return e?e.filter(t=>this.orderedStructuredDataTypes.indexOf(t["@type"])>=0).filter(t=>Boolean(t.name)).sort((t,n)=>this.orderedStructuredDataTypes.indexOf(t["@type"])-this.orderedStructuredDataTypes.indexOf(n["@type"])):[]}};s(Kn,"StructuredDataSources");var ps=["Hotel","LodgingBusiness","BedAndBreakfast"],Bo=["WebSite","LocalBusiness","Organization"],Ed=["HotelRoom","LodgingReservation","Offer"],Id=[...ps,...Bo,...Ed];function Md(r){return ps.includes(r)?"HotelName":"Unknown"}s(Md,"inferIdentifierTypeFrom");function Ld(r){return r.identifier&&r.identifier.length>2&&r.identifier.length<110}s(Ld,"hasSensibleData");var qn=class{constructor(e,t=C("hotel-identifiers-scraper")){this.window=e;this.logger=t}scrape(){return{identifiers:this.identifierSources()}}identifierSources(){let e=[...qo(this.window),...No(this.window.document),...qd(this.window.document),...Ud(this.window.document),...jd(this.window),...Fd(this.window.document),...Kd(this.window)].filter(Ld);if(this.logger.log("Common identifiers",e),e.find(t=>Nr.has(t.identifierType)))return e;{let t=Ko(this.window);return this.logger.log("Additional identifiers",t),[...e,...t]}}};s(qn,"HotelIdentifiersScraper");function rr(r){return r?ot(r)?!!r.apiKey||!!r.identifiers&&r.identifiers.length>0:Array.isArray(r)?r.reduce((e,t)=>e||rr(t),!1):r.constructor===Object?rr(h.values(r)):!1:!1}s(rr,"hasApiKeyOrIdentifier");function jd(r){if(r===void 0)return[];let{scheme:e,host:t,path:n,query:i}=p(()=>r instanceof K?r:typeof r=="string"?new K(r):new K(r.location.href),{});if(e==="about")return[];let a=[t,n].filter(Boolean).flatMap(c=>c==null?void 0:c.split(/[./]/g)),o=Object.values(se(i,!1));return[...a,...o].filter(c=>c&&c.length>3).map(c=>({identifier:c,type:"Untrusted",source:"url",identifierType:"PossibleIdentifier"}))}s(jd,"urlIdentifiers");function Fd(r){let{HotelCode:e}=Hd(r);return[{identifierType:"PossibleIdentifier",type:"Untrusted",identifier:e,source:"cookie"}]}s(Fd,"cookieIdentifiers");function Hd(r){return p(()=>r.cookie.split(";").reduce((e,t)=>{let[n,i]=t.trim().split("=").map(decodeURIComponent);return e[n]=i,e},{}),{})}s(Hd,"cookieObject");function Kd(r){let e=r.explicitHotelIdentifier;return[{identifierType:"PossibleIdentifier",type:"Untrusted",identifier:e,source:"window"}]}s(Kd,"miscIdentifiers");function qd(r){return r.title.split(/[|\-:]/).reverse().map(e=>({source:"title",identifier:Pe(e),type:"Untrusted",identifierType:"Unknown"}))}s(qd,"titles");function _d(r){return Array.from(r.getElementsByTagName("meta")).reduce((e,t)=>{let n=t.getAttribute("name")||t.getAttribute("property")||t.getAttribute("http-equiv"),i=t.getAttribute("content");return n&&(e[n]=i),e},{})}s(_d,"metaObject");function Ud(r){let e=["site-id","og:title","og:site_name","twitter:title"],t=_d(r);return Object.keys(t).filter(n=>e.indexOf(n)!=-1).map(n=>({source:`meta.${n}`,identifier:Pe(t[n]),type:"Untrusted",identifierType:"Unknown"}))}s(Ud,"metaLabels");var Vo=k(Re());var _n=k(N()),Ne=k(le());function Go(r){return r?r.trim().split(/[-_]/).filter(Boolean).map((e,t)=>t===0?e.toLowerCase():t===1&&e.length===2?e.toUpperCase():e):[]}s(Go,"localeParts");function $d(r){let[e]=Go(r);return e}s($d,"languageOf");function Nd(r){let e=Go(r);if(e.length!==0)return e.join("-")}s(Nd,"cleanLocale");var fs=class{localeOf(e){return[e.documentElement.lang,e.documentElement.getAttribute("xml:lang")].filter(Boolean)}};s(fs,"DocumentLocaleDetector");var ms=class{localeOf(e){var n;let t=se((n=e.defaultView)==null?void 0:n.location.search).lang;return typeof t!="string"?[]:[t]}};s(ms,"QueryStringLocaleDetector");var Tt=class{constructor(e){this.tld=e}static create(e){let[,t]=p(()=>e.defaultView.location.hostname.match(Tt.pattern))||[];return new Tt(t)}enrich(e){let t=p(()=>Tt.mapping[this.tld],this.tld);return t&&Tt.validate(`${e}-${t}`)||e}static validate(e){try{let[t]=Intl.DateTimeFormat.supportedLocalesOf(e);return t}catch(t){}}},Un=Tt;s(Un,"CountryCodeTLDEnricher"),Un.pattern=/\.(\w{2})$/,Un.mapping={uk:"GB",co:"US"};function Bd(r){if(!r)return!1;if(r==="is"||r==="is-IS")return!0;try{let[e]=Intl.DateTimeFormat.supportedLocalesOf(r);return!!e}catch(e){}return!1}s(Bd,"isLocaleValid");var $n=class{constructor(){this.detectors=[new ms,new fs]}static detectLocale(e){let[t]=$n.instance.localeOf(e);return t}localeOf(e){return(0,_n.array)(this.detectors,(0,Ne.flatMap)(t=>t.localeOf(e)),(0,Ne.map)(Nd),(0,Ne.filter)(Bd),(0,Ne.unique)((0,_n.by)($d)))}},nr=$n;s(nr,"SimpleLocaleDetector"),nr.instance=new $n;var Wo;(function(t){t.rate="rate",t.room="room"})(Wo||(Wo={}));function ir(r){return nr.detectLocale(r.document)}s(ir,"getLanguageFromDocument");function zo(r){return ir(r)||r.navigator.language}s(zo,"getLanguageFromDocumentOrBrowser");var Nn=class{constructor(e){this.storage=e}get(e){let t=this.storage.getItem(e);if(t)return ie.parseWithDates(t)}set(e,t){return this.storage.setItem(e,JSON.stringify(t)),this}clear(){this.storage.clear()}};s(Nn,"JsonStorage");var Bn=class{constructor(){this.data=new Map}get(e){return this.data.get(e)}set(e,t){return this.data.set(e,t)}clear(){this.data.clear()}};s(Bn,"InMemoryTypedStorage");var Gn=class{constructor(e){this.stores=e}clear(){this.stores.forEach(e=>p(()=>e.clear()))}get(e){for(let t of this.stores){let n=p(()=>t.get(e));if(n)return n}}set(e,t){return this.stores.forEach(n=>p(()=>n.set(e,t))),this}};s(Gn,"CompositeTypedStorage");var Ot=class{constructor(e){this.storage=e}static create(e){return new Ot(new Gn([p(()=>new Nn(e.sessionStorage)),Ot.backupStorage]))}add(e){let t=this.data();return t.unshift(e),this.storage.set(Ot.previousPages,pa(t,10)),e}last(){let[e]=this.data();return e}data(){return this.storage.get(Ot.previousPages)||[{type:T.Unknown}]}find(e){return P.find(this.data(),e)}clear(){this.storage.clear()}},Ct=Ot;s(Ct,"IntegrationHistory"),Ct.previousPages="triptease.integration.previous-pages",Ct.backupStorage=new Bn;var ys=class{reset(){}summarise(){return{}}timeAsync(e,t){return t()}timeCall(e,t){return t}timeSync(e,t){return t()}};s(ys,"StubReporter");function Jo(){return typeof performance=="object"&&"now"in performance?new gs:new ys}s(Jo,"createReporter");var gs=class{constructor(e=[],t=new oe){this.timings=e;this.timers=t}timeCall(e,t){let n=this;return function(...i){let a=performance.now(),o=t.apply(this,i),c=performance.now()-a;return n.timings.push({name:e,time:c}),o}}timeSync(e,t){let n=performance.now(),i=t(),a=performance.now()-n;return this.timings.push({name:e,time:a}),i}timeAsync(e,t){return b(this,null,function*(){let n=performance.now(),i=yield this.timers.task(t),a=performance.now()-n;return this.timings.push({name:e,time:a}),i})}summarise(){let e=this.timings.reduce((t,{name:n,time:i})=>{let a=t[n]||{count:0,avg:0,sum:0,min:Number.MAX_VALUE,max:Number.MIN_VALUE};return a.count++,a.min=Math.min(a.min,i),a.max=Math.max(a.max,i),a.sum+=i,a.avg+=(i-a.avg)/a.count,t[n]=a,t},{});return this.reset(),e}reset(){this.timings.length=0}};s(gs,"RealReporter");var Yo="triptease.onboard.response";function Xo(r){return r&&typeof r=="object"&&r.type==="triptease.onboard.response"&&typeof r.correlationId=="string"}s(Xo,"isOnboardResponse");var Zo=C("messaging"),Vn=class{constructor(e){this.messageHandler=e;this.promises=new Map;e&&e.addListener(t=>{if(Xo(t)){let{correlationId:n}=t,i=this.promises.get(n);i&&(Zo.debug("Sender matched response",t),i.resolve(t),this.promises.delete(n))}})}handle(e){return b(this,null,function*(){return Zo.debug("Sending request",e),this.messageHandler&&this.messageHandler.send(e),new Promise((t,n)=>{this.promises.set(e.correlationId,{resolve:t,reject:n})})})}};s(Vn,"Sender");function Qo(r){return h.removeEmpty(E(S({},r),{lines:p(()=>r.lines.filter(Boolean).map(String))}))}s(Qo,"cleanAddress");function Gd(r){return r&&typeof r=="function"&&typeof r.getAll=="function"}s(Gd,"isGoogleAnalytics");function ec(n,i){return b(this,arguments,function*(r,e,t=new oe){let a=r[r.GoogleAnalyticsObject||"ga"];return Gd(a)?Kr(()=>b(this,null,function*(){let o=new Promise(c=>a(()=>c(P.unique(a.getAll().map(l=>l.get(e))))));return yield Promise.race([o,t.delay(50).then(()=>[])])})):[]})}s(ec,"googleAnalytics");function Vd(r){return P.unique(Array.from(r.document.querySelectorAll("script[src*=googletagmanager]")).map(e=>{let{query:t}=new K(e.src),{id:n}=se(t);return n}))}s(Vd,"googleTagManager");function tc(r){return b(this,null,function*(){return{ga:yield ec(r,"trackingId"),ga_ci:yield ec(r,"clientId"),gtm:Vd(r)}})}s(tc,"google");var Wn=class{constructor(e,t=60*1e3,n=new oe){this.handler=e;this.timeout=t;this.timers=n}handle(e){return b(this,null,function*(){let t=yield Promise.race([this.handler.handle(e),this.timers.delay(this.timeout)]);return t||{type:Yo,payload:new Error(`Request ${e.requestType} timed out after ${this.timeout}`),correlationId:e.correlationId}})}};s(Wn,"TimeoutMessageHandler");var ic=k(N());var hs=class{static parse(e){if(!!e)return hs.lookup.get(e.toLowerCase().trim())}},sr=hs;s(sr,"UserConsentParser"),sr.lookup=["none","essential","functionality","performance","marketing","all"].reduce((e,t)=>e.set(t,t),new Map);var ar=class{static find(e){return Dt.scripts(new ge(e.document)).map(n=>n.dataset.storageConsent).filter(Boolean).flatMap(n=>n.split(/\s*,\s*/g).map(i=>sr.parse(i))).filter(Boolean)}};s(ar,"UserConsentFinder");var Wd=k(N());var yh=C("consent"),rc=new Set(["all"]);function nc(r){let e=new Set(r.filter(Boolean));return e.size===0||e.has("all")?rc:(e.has("none")&&e.size!==1&&e.delete("none"),e)}s(nc,"collapseConsentTypes");var zn=class{constructor(e){this.window=e}scrape(){return{userConsent:Array.from(nc(ar.find(this.window)))}}};s(zn,"UserConsentScraper");function zd(r,e){return b(this,null,function*(){let t=ne(r).triptease;C("integration-executor").log(`replaceExecutor old:${p(()=>t.integration.script.app().name)} new:${p(()=>e.script.app().name)}`),t.integration&&(yield t.integration.stop()),t.integration=e,yield e.start()})}s(zd,"replaceExecutor");var Jn=class{constructor(e,t,n=Dn(e),i=C("integration-executor"),a=ne(e).onboard.messageBuilder,o=new Wn(new Vn(bo(e))),c=new dn(o),l=un(o),f=Ct.create(e),x=new Mn(e,f),O=Jo()){this.window=e;this.script=t;this.events=n;this.logger=i;this.messageBuilder=a;this.sender=o;this.kernel=c;this.kernelHost=l;this.history=f;this.processor=x;this.reporter=O;this.integrate=s(()=>b(this,null,function*(){this.logger.log("Begin integration executor");let e=yield this.reporter.timeAsync("page-scraping",()=>this.findPageData()),t=yield this.reporter.timeAsync("hotel-identification",()=>this.addIdentificationAndAdditionalData(e));t.language||(t.language=zo(this.window));let n=this.processor.process(t);return this.logger.log("Processed integration data",n),this.lastPath!==this.window.location.pathname||!I.same(sc(this.history.last()),sc(n))?(this.logger.log("Integration data has changed - updating triptease.config"),this.window.triptease.config=n,this.history.add(n),yield this.sendToKernelHost(yield this.messageBuilder.buildMessage({type:"triptease.config",payload:n,context:{app:this.script.app()}})),this.lastPath=this.window.location.pathname):this.logger.log("No change in integration data - doing nothing"),n}),"integrate");zd(e,this)}start(){return b(this,null,function*(){this.logger.log(`IntegrationExecutor.start ${this.script.app().name}`),yield this.events.listen(this.integrate)})}stop(){return b(this,null,function*(){this.logger.log(`IntegrationExecutor.stop ${this.script.app().name}`),this.events.removeListener(this.integrate)})}addIdentificationAndAdditionalData(e){return b(this,null,function*(){let t=yield this.script.scrape(),n=yield new pn([new zn(this.window),new An(this.window),new $e(this.window),{scrape:()=>t},new Tn(e)],this.logger).scrape();if(n.apiKey==="none")return this.logger.log('Skipping identification as apiKey is set to "none" - Only interested in page data for ARI feed'),e;if(n=E(S({},n),{type:Yd(e.type,t.type),integrationName:this.script.integrationName().canonical}),this.logger.log("all identifiers",n),Qi(e)&&Array.isArray(e.rateDetails)){e.rateDetails=yield this.processArrayIdentifiers(e.rateDetails,n);let a=this.getUniqueApiKey(e.rateDetails);a&&(n=E(S({},n),{apiKey:a}))}if(es(e)&&Array.isArray(e.reservations)){e.reservations=yield this.processArrayIdentifiers(e.reservations,n);let a=this.getUniqueApiKey(e.reservations);a&&(n=E(S({},n),{apiKey:a}))}if(n.type===T.Group||n.disableDefaultHotelIdentification)this.logger.log("Disabling default hotel identification");else if(rr(n)||rr(e))this.logger.log("page data already contains identifiers (hotelName, hotelCode or apiKey) so skipping fallback identification");else{let a=new qn(this.window).scrape();this.logger.log("hotel identifiers",a),n=S(S({},n),a)}let i=yield this.kernel.generateConfig(n);return this.logger.log("generatedConfig",i),h.removeEmpty(E(S(S(S({},n),e),i),{address:Qo(yield n.address),disableDefaultHotelIdentification:void 0,identifiers:this.filterOutPossibleUserData(n)}))})}filterOutPossibleUserData(e){return p(()=>e.identifiers.filter(t=>Nr.has(t.identifierType)))}getUniqueApiKey(e){let t=P.unique(e.map(n=>n.apiKey));if(t.length===1)return t[0]}processArrayIdentifiers(e,t){return b(this,null,function*(){return yield Promise.all(e.map(n=>b(this,null,function*(){return ot(n)?S(S({},n),yield this.kernel.generateConfig(S(S({},t),fn(n)))):n})))})}sendToKernelHost(e){return b(this,null,function*(){this.logger.log("Sending triptease.config message to local kernel host",e);let t=E(S({},e),{context:E(S({},e.context),{stats:this.reporter.summarise(),google:yield Kr(()=>tc(this.window),{}),features:ha(this.window,...Jd),performance:p(()=>PerformanceObserver.supportedEntryTypes,[])})});this.kernelHost.processConfig(t)})}findPageData(){return b(this,null,function*(){let e=[];for(let t of this.script.pages)try{let n=yield t.integrationData();if(n&&(n.pageClass=n.pageClass||fa(t)),go(n))return this.logger.log("Found valid page",n),n;e.push(n)}catch(n){this.logger.debug("Page didn't parse due to error",n)}return this.logger.log("No valid pages found - finding partial page from",e),ho(e)||{type:T.Unknown}})}};s(Jn,"IntegrationExecutor");function sc(r){if(!r)return{};let e=S({},r);return delete e.ratesModified,e}s(sc,"exclude");var Jd=["fetch","Set","Map","WebAssembly.constructor","PerformanceObserver","Date","Date.now","Date.prototype.toISOString","Date.prototype.toJSON","Date.prototype.getTime","crypto.randomUUID","crypto.getRandomValues","crypto.subtle.digest","Intl.Collator","Intl.NumberFormat","Intl.NumberFormat.prototype.formatToParts","Intl.DateTimeFormat","Intl.DateTimeFormat.prototype.formatToParts","console.log","navigator.share","navigator.serviceWorker","EventSource"];function Yd(...r){return P.first([...r,T.Unknown].filter(Boolean).sort((0,ic.by)(Aa)))}s(Yd,"calculatePageType");var ac=k(qi());var Rt=class{static get(){return p(()=>{let e="5744.61929";return e?"v"+e:"latest"})}};s(Rt,"Version");var Yn=class{constructor(e,t=new ac.SystemClock){this.window=e;this.clock=t}scrape(){return h.removeEmpty({address:p(()=>this.address())})}address(){return{}}app(){return{name:p(()=>this.integrationName().canonical),version:Rt.get()}}integrationName(){return p(()=>ne(this.window).onboard.integrationName)}};s(Yn,"Integration");var cc=k(Ze());var oc="triptease-managed";var lc=k(Re());var Xn=class{constructor(e,t=new ge(e.document),n=(0,lc.numberParser)("."),i=(0,cc.parser)("en","yyyy-MM-dd")){this.window=e;this.selectorApi=t;this.numParser=n;this.dateParser=i}integrationData(){let e=this.selectorApi.querySelectorAll(`.price-fighter-widget:not(.${oc})`);if(e.length===0)return;let t=e.map(i=>this.cleanData(i)),n=this.createSetsFrom(t);return n.hasUnique("apiKey")||n.hasUnique("propertyCode")?this.singleHotel(t[0]):this.multipleHotels(t,n)}cleanData(e){let U=Xd(e.dataset),{clientkey:t,property:n,token:i,hotelkey:a,directPrice:o,roomRate:c,roomType:l}=U,f=fr(U,["clientkey","property","token","hotelkey","directPrice","roomRate","roomType"]),x=a||i;return S({clientKey:t||(n?x:void 0),apiKey:n?void 0:x,propertyCode:n,price:o,roomName:l,rateName:c},f)}createSetsFrom(e){return e.reduce((t,n)=>h.entries(n).reduce((i,[a,o])=>i.add(a,o),t),new bs)}singleHotel(e){let t=e.propertyCode?[{identifier:e.propertyCode,identifierType:"HotelCode",type:"Trusted",source:"pf-div"}]:[],n=e.loggedIn==="true"?"untrusted":"none";return h.removeEmpty({type:T.RoomsAndRates,pageClass:"SelfIntegratedRoomsAndRates",language:e.language,clientKey:e.clientKey,apiKey:e.apiKey,identifiers:t,adults:p(()=>this.numParser.parse(e.adults)),children:p(()=>this.numParser.parse(e.children)),rooms:p(()=>this.numParser.parse(e.rooms)),checkin:p(()=>this.dateParser.parse(e.checkin)),checkout:p(()=>this.dateParser.parse(e.checkout)),total:this.getTotal(e.total),layout:uc(e.layout),ratesModified:n,rateDetails:[h.removeEmpty({price:p(()=>this.numParser.parse(e.price)),currency:e.currency,rateName:e.rateName,roomName:e.roomName})]})}getTotal(e){let t=p(()=>e.toLowerCase());if(t==="true")return!0;if(t==="false")return!1}multipleHotels(e,t){let n=t.get("total"),i=e.reduce((a,o)=>a||o.loggedIn==="true",!1)?"untrusted":"none";return h.removeEmpty({type:T.RoomsAndRates,pageClass:"SelfIntegratedRoomsAndRates",language:t.get("language"),clientKey:p(()=>t.get("clientKey")),adults:p(()=>this.numParser.parse(t.get("adults"))),children:p(()=>this.numParser.parse(t.get("children"))),rooms:p(()=>this.numParser.parse(t.get("rooms"))),checkin:p(()=>this.dateParser.parse(t.get("checkin"))),checkout:p(()=>this.dateParser.parse(t.get("checkout"))),total:this.getTotal(n),layout:uc(t.get("layout")),ratesModified:i,rateDetails:e.map(a=>{let o=a.propertyCode?[{identifier:a.propertyCode,type:"Trusted",identifierType:"HotelCode"}]:[];return h.removeEmpty({clientKey:a.clientKey,apiKey:a.apiKey,identifiers:o,price:p(()=>this.numParser.parse(a.price)),currency:a.currency,rateName:a.rateName,roomName:a.roomName})})})}};s(Xn,"SelfIntegratedRoomsAndRates");function Xd(r){return Object.keys(r).reduce((e,t)=>{let n=t.replace(/^pf/,"");return E(S({},e),{[`${n[0].toLowerCase()}${n.slice(1)}`]:r[t]})},{})}s(Xd,"cleanNames");function uc(r){if(!!r)return r.toLowerCase().replace("-","")}s(uc,"cleanLayout");var bs=class{constructor(){this.sets={}}hasUnique(e){let t=this.sets[e];return t?t.size===1:!1}add(e,t){return t?(this.sets[e]=this.sets[e]||new Set,this.sets[e].add(t),this):this}get(e){let t=this.sets[e];if(t.size===1)return P.from(t)[0]}};s(bs,"Sets");var dc=k(Re());var Zn=class{constructor(e,t=new ge(e.document),n=(0,dc.numberParser)(".")){this.window=e;this.selectorApi=t;this.parser=n}integrationData(){return this.selectorApi.querySelectorAll('script[src*="triptease"]').map(t=>new K(t.src)).reduce((t,n)=>{let i=se(n.query,!1);return{type:T.Confirmation,price:i.bookingValue?this.parser.parse(i.bookingValue):t.price,currency:i.bookingCurrency?i.bookingCurrency:t.currency,reference:i.bookingReference?i.bookingReference:t.reference,basePrice:i.basePrice?this.parser.parse(i.basePrice):t.basePrice,checkin:i.checkin?new Date(i.checkin):t.checkin,checkout:i.checkout?new Date(i.checkout):t.checkout}},{})}};s(Zn,"SelfIntegratedConfirmation");var Sc=k(Oe()),Dc=k(Ps());var Pc=k(Ze()),Et=class{constructor(e){this.window=e;this.dateParser=(0,Pc.parser)("en","yyyy-MM-dd")}getMoneyParser(e,t){return(0,Dc.implicitMoneyParser)({currency:t,locale:e})}find(e){return{search:P.find(e,t=>t["@type"]==="LodgingSearch"),offers:e.filter(t=>t["@type"]==="Offer"),offerCatalog:P.find(e,t=>t["@type"]==="OfferCatalog")}}convert({search:e,offers:t,offerCatalog:n}){let i=ir(this.window),a=t.flatMap(o=>{let c=o.priceSpecification.priceCurrency,l=this.getMoneyParser(i,c),[f]=l.parseAll(String(o.priceSpecification.price));return f?[{price:f.amount,currency:c,rateName:o.name,rateCode:o.identifier,roomName:o.itemOffered.name,roomCode:o.itemOffered.identifier}]:[]});return h.removeEmpty({type:T.RoomsAndRates,language:i,pageClass:"StructuredDataRoomsAndRates",checkin:this.parseDate(e.checkinTime),checkout:this.parseDate(e.checkoutTime),adults:p(()=>Number(e.numAdults),2),children:p(()=>Number(e.numChildren),0),rooms:p(()=>Number(e.numRooms),1),rateDetails:a,ratesModified:p(()=>Number(n.numberOfItems)===0)?"noAvailability":void 0,total:p(()=>this.getTotal(t[0].priceSpecification.unitText))})}getTotal(e){let t=p(()=>e.toLowerCase().trim());if(t==="total")return!0;if(t==="nightly")return!1}parseDate(e){return p(()=>this.dateParser.parseAll(e.split("T")[0])[0])}};s(Et,"StructuredDataRoomsAndRates"),Ve([Sc.cache],Et.prototype,"getMoneyParser",1);var As=k(oi()),ri=k(le());var Ac=k(N()),Tc=k(Oe()),Cc=k(Ps());var Oc=k(Ze()),It=class{constructor(e){this.window=e;this.dateParser=(0,Oc.parser)("en","yyyy-MM-dd");this.lookup={["http://schema.org/ReservationConfirmed"]:"confirmed",["http://schema.org/ReservationCancelled"]:"cancelled"}}getMoneyParser(e,t){return(0,Cc.implicitMoneyParser)({currency:t,locale:e})}find(e){return e.filter(t=>Da(t)&&this.lookup[t.reservationStatus])}convert(e){let t=ir(this.window),n=(0,Ac.array)(e,(0,ri.map)(l=>{let f=l.priceCurrency,x=this.getMoneyParser(t,f);return h.removeEmpty({reference:l.reservationId,price:p(()=>x.parse(String(l.totalPrice)).amount),basePrice:p(()=>x.parse(String(l.basePrice)).amount),currency:f,reservationStatus:this.lookup[l.reservationStatus]})}),(0,ri.unique)((l,f)=>I.same(l,f)?0:1)),[i]=e,{checkinTime:a,checkoutTime:o,priceCurrency:c}=i;return h.removeEmpty({type:T.Confirmation,language:t,pageClass:"StructuredDataConfirmation",checkin:this.parseDate(a),checkout:this.parseDate(o),currency:c,reference:n.map(l=>l.reference).sort().join(","),price:n.map(l=>l.price).reduce(As.sum),basePrice:n.map(l=>l.basePrice).reduce(As.sum),reservations:n})}parseDate(e){return p(()=>this.dateParser.parseAll(e.split("T")[0])[0])}};s(It,"StructuredDataConfirmation"),Ve([Tc.cache],It.prototype,"getMoneyParser",1);var Ge=class{constructor(e,t=[new It(e),new Et(e)]){this.window=e;this.converters=t;this.logger=C("structured-data")}static confirmation(e){return new Ge(e,[new It(e)])}static roomsAndRates(e){return new Ge(e,[new Et(e)])}integrationData(){let e=Qe.processDocument(this.window.document);for(let t of this.converters)try{let n=t.find(e);if(!n)continue;return t.convert(n)}catch(n){}this.logger.log(`${this.converters.length} converters were unable to process structured data`,{structuredData:e})}};s(Ge,"StructuredDataPage");var pp=Rt.get();function fp(r){return`https://onboard.triptease.io/integrations/${pp}/${r}.js`}s(fp,"onboard");function dr(r){return r.replace(/-/g,"").toLowerCase()}s(dr,"cleanName");var u=class{constructor(e){this.name=e;if(!/[A-Za-z0-9]/.test(e))throw new Error("Only alpha numeric allowed");u.Lookup.set(dr(e),this)}static values(){return Array.from(u.Lookup.values())}static parse(e){let t=u.Lookup.get(dr(e));if(!t)throw new Error("Invalid booking engine name");return t}toString(){return this.name}get canonical(){return dr(this.name)}get folder(){return this.isSelfIntegration()?u.Default.folder:F.kebabCase(this.name)}get script(){return fp(this.folder)}isSelfIntegration(){return u.SelfIntegration.has(this)}},d=u;s(d,"IntegrationName"),d.Lookup=new Map,d.AboveProperty=new u("AboveProperty"),d.AfricaAlbida=new u("AfricaAlbida"),d.Alaric=new u("Alaric"),d.Amadeus=new u("Amadeus"),d.ARHotels=new u("ARHotels"),d.Ascott=new u("Ascott"),d.ASIWebRes=new u("ASIWebRes"),d.Auberge=new u("Auberge"),d.AvailPro=new u("AvailPro"),d.Avvio=new u("Avvio"),d.AZDS=new u("AZDS"),d.Azimut=new u("Azimut"),d.BestWesternFrance=new u("BestWesternFrance"),d.BestWesternItaly=new u("BestWesternItaly"),d.BestWesternUk=new u("BestWesternUk"),d.Bloom=new u("Bloom"),d.Bode=new u("Bode"),d.BookAssist=new u("BookAssist"),d.BookEasy=new u("BookEasy"),d.BookOnlineNow=new u("BookOnlineNow"),d.BookVisit=new u("BookVisit"),d.Booking=new u("Booking"),d.Booking2Hotels=new u("Booking2Hotels"),d.BookingExpert=new u("BookingExpert"),d.BrochnerHotels=new u("BrochnerHotels"),d.BusyRooms=new u("BusyRooms"),d.BWHHotelGroup=new u("BWHHotelGroup"),d.CapoBay=new u("CapoBay"),d.CityExpress=new u("CityExpress"),d.ClaytonHotel=new u("ClaytonHotel"),d.Clock=new u("Clock"),d.CloudBeds=new u("CloudBeds"),d.CompuRez=new u("CompuRez"),d.Comwell=new u("Comwell"),d.ConstanceHotels=new u("ConstanceHotels"),d.Default=new u("Default"),d.DefaultStrict=new u("DefaultStrict"),d.DerqueBooking=new u("DerqueBooking"),d.DeutscheHospitality=new u("DeutscheHospitality"),d.DoyleCollection=new u("DoyleCollection"),d.EasyBooking=new u("EasyBooking"),d.EasyConsulting=new u("EasyConsulting"),d.EGds=new u("EGds"),d.Evancy=new u("Evancy"),d.Everly=new u("Everly"),d.ExtendedStayAmerica=new u("ExtendedStayAmerica"),d.Ezee=new u("Ezee"),d.FastBooking=new u("FastBooking"),d.Firmdale=new u("Firmdale"),d.FourSeasons=new u("FourSeasons"),d.Furama=new u("Furama"),d.Generic=new u("Generic"),d.GlenEagles=new u("GlenEagles"),d.GothiaTowers=new u("GothiaTowers"),d.GuestCentric=new u("GuestCentric"),d.GuestDesk=new u("GuestDesk"),d.GuestLine=new u("GuestLine"),d.Guild=new u("Guild"),d.HamiltonIsland=new u("HamiltonIsland"),d.HamiltonIslandHolidayHomes=new u("HamiltonIslandHolidayHomes"),d.HandPickedHotels=new u("HandPickedHotels"),d.Hart=new u("Hart"),d.HHotels=new u("HHotels"),d.HighLevelSoftware=new u("HighLevelSoftware"),d.Hipotels=new u("Hipotels"),d.Hoteliers=new u("Hoteliers"),d.HoteliersGuru=new u("HoteliersGuru"),d.HotelNetSolutions=new u("HotelNetSolutions"),d.Hotetec=new u("Hotetec"),d.Hotusa=new u("Hotusa"),d.Hoxton=new u("Hoxton"),d.HtiSystems=new u("HtiSystems"),d.Hyatt=new u("Hyatt"),d.Iberostar=new u("Iberostar"),d.Infotera=new u("Infotera"),d.InnQuest=new u("InnQuest"),d.InnRoad=new u("InnRoad"),d.InnStyle=new u("InnStyle"),d.Iperbooking=new u("Iperbooking"),d.IRM=new u("IRM"),d.Kasa=new u("Kasa"),d.KeaHotels=new u("KeaHotels"),d.Kempinski=new u("Kempinski"),d.Kognitiv=new u("Kognitiv"),d.LHW=new u("LHW"),d.Loews=new u("Loews"),d.Lotte=new u("Lotte"),d.LotusGroup=new u("LotusGroup"),d.LumaHotels=new u("LumaHotels"),d.Mews=new u("Mews"),d.Mirai=new u("Mirai"),d.NativePlaces=new u("NativePlaces"),d.NeoBookings=new u("NeoBookings"),d.NHHotels=new u("NHHotels"),d.OKU=new u("OKU"),d.Omnibees=new u("Omnibees"),d.OneHotels=new u("OneHotels"),d.Opera=new u("Opera"),d.Ovolo=new u("Ovolo"),d.PalaceResorts=new u("PalaceResorts"),d.Paraty=new u("Paraty"),d.Pegasus=new u("Pegasus"),d.Pelican=new u("Pelican"),d.PointAHotels=new u("PointAHotels"),d.Prestige=new u("Prestige"),d.ProfitRoom=new u("ProfitRoom"),d.Protel=new u("Protel"),d.PursuitCollection=new u("PursuitCollection"),d.RedPlanet=new u("RedPlanet"),d.RegalHotels=new u("RegalHotels"),d.ReserveHotel=new u("ReserveHotel"),d.ReserveOnline=new u("ReserveOnline"),d.Reservit=new u("Reservit"),d.Reseze=new u("Reseze"),d.Reztrip=new u("Reztrip"),d.RMSCloud=new u("RMSCloud"),d.RoomKey=new u("RoomKey"),d.RoomMaster=new u("RoomMaster"),d.Roiback=new u("Roiback"),d.Safestay=new u("Safestay"),d.SandsVegas=new u("SandsVegas"),d.Sbe=new u("Sbe"),d.Seekda=new u("Seekda"),d.Shr=new u("Shr"),d.SimpleBooking=new u("SimpleBooking"),d.SiteMinder=new u("SiteMinder"),d.StationCasinos=new u("StationCasinos"),d.Synxis=new u("Synxis"),d.SysHotelOnline=new u("SysHotelOnline"),d.Taj=new u("Taj"),d.Travelanium=new u("Travelanium"),d.TravelClick=new u("TravelClick"),d.Uibscrs=new u("Uibscrs"),d.VerticalBooking=new u("VerticalBooking"),d.Viato=new u("Viato"),d.Vinpearl=new u("Vinpearl"),d.WebRezPro=new u("WebRezPro"),d.WestCordHotels=new u("WestCordHotels"),d.Youngs=new u("Youngs"),d.Zafiro=new u("Zafiro"),d.SelfIntegration=new Set([u.Avvio,u.BestWesternItaly,u.ClaytonHotel,u.ExtendedStayAmerica,u.HtiSystems,u.LHW]);var ni=class extends Yn{constructor(){super(...arguments);this.pages=[Ge.confirmation(this.window),new Zn(this.window),Ge.roomsAndRates(this.window),new Xn(this.window)]}address(){let e=Qe.processDocument(this.window.document);return $o(e)}app(){let e=Qe.processDocument(this.window.document),t=p(()=>{let o=e.find(c=>c["@type"]==="SoftwareApplication"),{name:n,version:i}=o,a=fr(o,["name","version"]);return S({name:dr(n),version:String(i)},h.filter(a,c=>!F.startWith(c,"@")))},{});return t.name?t:super.app()}};s(ni,"Default");new Jn(window,new ni(window));})();
