
<!-- saved from url=(0093)https://onboard.triptease.io/kernel/v5744.61929/kernel-host.html?originHost=furamavietnam.com -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript">//<![CDATA[
(()=>{var An=Object.create;var ie=Object.defineProperty,In=Object.defineProperties,zt=Object.getOwnPropertyDescriptor,Rn=Object.getOwnPropertyDescriptors,Cn=Object.getOwnPropertyNames,he=Object.getOwnPropertySymbols,Mn=Object.getPrototypeOf,$e=Object.prototype.hasOwnProperty,Jt=Object.prototype.propertyIsEnumerable;var Qt=(r,e,t)=>e in r?ie(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,_=(r,e)=>{for(var t in e||(e={}))$e.call(e,t)&&Qt(r,t,e[t]);if(he)for(var t of he(e))Jt.call(e,t)&&Qt(r,t,e[t]);return r},oe=(r,e)=>In(r,Rn(e)),jn=r=>ie(r,"__esModule",{value:!0});var Zt=(r,e)=>{var t={};for(var n in r)$e.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&he)for(var n of he(r))e.indexOf(n)<0&&Jt.call(r,n)&&(t[n]=r[n]);return t};var D=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Dn=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Cn(e))!$e.call(r,n)&&n!=="default"&&ie(r,n,{get:()=>e[n],enumerable:!(t=zt(e,n))||t.enumerable});return r},E=r=>Dn(jn(ie(r!=null?An(Mn(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r),ae=(r,e,t,n)=>{for(var i=n>1?void 0:n?zt(e,t):e,o=r.length-1,a;o>=0;o--)(a=r[o])&&(i=(n?a(e,t,i):a(i))||i);return n&&i&&ie(e,t,i),i};var p=(r,e,t)=>new Promise((n,i)=>{var o=c=>{try{s(t.next(c))}catch(l){i(l)}},a=c=>{try{s(t.throw(c))}catch(l){i(l)}},s=c=>c.done?n(c.value):Promise.resolve(c.value).then(o,a);s((t=t.apply(r,e)).next())});var se=D((go,ve)=>{var Xt,Yt,er,tr,rr,nr,ir,or,ar,be,ze,sr,cr,J,ur,dr,lr,pr,fr,gr,yr,mr,xe;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&undefined?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof ve=="object"&&typeof ve.exports=="object"?r(t(e,t(ve.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(o,a){return n[o]=i?i(o,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])};Xt=function(n,i){e(n,i);function o(){this.constructor=n}n.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)},Yt=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},er=function(n,i){var o={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(o[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(n);s<a.length;s++)i.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(n,a[s])&&(o[a[s]]=n[a[s]]);return o},tr=function(n,i,o,a){var s=arguments.length,c=s<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,o):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,i,o,a);else for(var h=n.length-1;h>=0;h--)(l=n[h])&&(c=(s<3?l(c):s>3?l(i,o,c):l(i,o))||c);return s>3&&c&&Object.defineProperty(i,o,c),c},rr=function(n,i){return function(o,a){i(o,a,n)}},nr=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},ir=function(n,i,o,a){function s(c){return c instanceof o?c:new o(function(l){l(c)})}return new(o||(o=Promise))(function(c,l){function h(S){try{y(a.next(S))}catch($){l($)}}function P(S){try{y(a.throw(S))}catch($){l($)}}function y(S){S.done?c(S.value):s(S.value).then(h,P)}y((a=a.apply(n,i||[])).next())})},or=function(n,i){var o={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},a,s,c,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(y){return function(S){return P([y,S])}}function P(y){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,s&&(c=y[0]&2?s.return:y[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,y[1])).done)return c;switch(s=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return o.label++,{value:y[1],done:!1};case 5:o.label++,s=y[1],y=[0];continue;case 7:y=o.ops.pop(),o.trys.pop();continue;default:if(c=o.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){o=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){o.label=y[1];break}if(y[0]===6&&o.label<c[1]){o.label=c[1],c=y;break}if(c&&o.label<c[2]){o.label=c[2],o.ops.push(y);break}c[2]&&o.ops.pop(),o.trys.pop();continue}y=i.call(n,o)}catch(S){y=[6,S],s=0}finally{a=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},ar=function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&xe(i,n,o)},xe=Object.create?function(n,i,o,a){a===void 0&&(a=o),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]},be=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,o=i&&n[i],a=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},ze=function(n,i){var o=typeof Symbol=="function"&&n[Symbol.iterator];if(!o)return n;var a=o.call(n),s,c=[],l;try{for(;(i===void 0||i-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(h){l={error:h}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(l)throw l.error}}return c},sr=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(ze(arguments[i]));return n},cr=function(){for(var n=0,i=0,o=arguments.length;i<o;i++)n+=arguments[i].length;for(var a=Array(n),s=0,i=0;i<o;i++)for(var c=arguments[i],l=0,h=c.length;l<h;l++,s++)a[s]=c[l];return a},J=function(n){return this instanceof J?(this.v=n,this):new J(n)},ur=function(n,i,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=o.apply(n,i||[]),s,c=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(w){a[w]&&(s[w]=function(z){return new Promise(function(Be,kn){c.push([w,z,Be,kn])>1||h(w,z)})})}function h(w,z){try{P(a[w](z))}catch(Be){$(c[0][3],Be)}}function P(w){w.value instanceof J?Promise.resolve(w.value.v).then(y,S):$(c[0][2],w)}function y(w){h("next",w)}function S(w){h("throw",w)}function $(w,z){w(z),c.shift(),c.length&&h(c[0][0],c[0][1])}},dr=function(n){var i,o;return i={},a("next"),a("throw",function(s){throw s}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(s,c){i[s]=n[s]?function(l){return(o=!o)?{value:J(n[s](l)),done:s==="return"}:c?c(l):l}:c}},lr=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],o;return i?i.call(n):(n=typeof be=="function"?be(n):n[Symbol.iterator](),o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o);function a(c){o[c]=n[c]&&function(l){return new Promise(function(h,P){l=n[c](l),s(h,P,l.done,l.value)})}}function s(c,l,h,P){Promise.resolve(P).then(function(y){c({value:y,done:h})},l)}},pr=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};fr=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&xe(i,n,o);return t(i,n),i},gr=function(n){return n&&n.__esModule?n:{default:n}},yr=function(n,i){if(!i.has(n))throw new TypeError("attempted to get private field on non-instance");return i.get(n)},mr=function(n,i,o){if(!i.has(n))throw new TypeError("attempted to set private field on non-instance");return i.set(n,o),o},r("__extends",Xt),r("__assign",Yt),r("__rest",er),r("__decorate",tr),r("__param",rr),r("__metadata",nr),r("__awaiter",ir),r("__generator",or),r("__exportStar",ar),r("__createBinding",xe),r("__values",be),r("__read",ze),r("__spread",sr),r("__spreadArrays",cr),r("__await",J),r("__asyncGenerator",ur),r("__asyncDelegator",dr),r("__asyncValues",lr),r("__makeTemplateObject",pr),r("__importStar",fr),r("__importDefault",gr),r("__classPrivateFieldGet",yr),r("__classPrivateFieldSet",mr)})});var hr=D(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.sum=R.subtract=R.add=R.increment=void 0;function Ln(r){return r+1}R.increment=Ln;function En(r,e){return e===void 0?t=>r+t:r+e}R.add=En;function Hn(r,e){return e===void 0?t=>t-r:r-e}R.subtract=Hn;R.sum=(r,e)=>r+e});var Ye=D(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.AsyncSequence=T.Sequence=T.sequence=T.range=T.repeat=T.iterate=void 0;var Je=hr(),br=Pe(),Qe=Q();function*we(r,e){for(;;)yield e,e=r(e)}T.iterate=we;function*qn(r){for(;;)yield r()}T.repeat=qn;function*Nn(r,e,t=1){if(t===0)throw new Error("step can not be 0");if(e===void 0)yield*we(Je.add(t),r);else{let n=Math.abs(t);e<r?yield*Ze(we(Je.subtract(n),r),br.takeWhile(i=>i>=e)):yield*Ze(we(Je.add(n),r),br.takeWhile(i=>i<=e))}}T.range=Nn;function Ze(r,...e){return Qe.isIterable(r)?new Te(r,e):Qe.isArrayLike(r)?new Te(Qe.iterable(r),e):new Xe(r,e)}T.sequence=Ze;var Te=class{constructor(e,t){this.source=e,this.transducers=t}[Symbol.iterator](){return this.transducers.reduce((e,t)=>t.sync(e),this.source)[Symbol.iterator]()}};T.Sequence=Te;var Xe=class{constructor(e,t){this.source=e,this.transducers=t}[Symbol.asyncIterator](){return this.transducers.reduce((e,t)=>t.async_(e),this.source)[Symbol.asyncIterator]()}};T.AsyncSequence=Xe});var Q=D(m=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});m.AsyncIteratorHandler=m.single=m.by=m.toAsyncIterable=m.array=m.isArrayLike=m.asyncIterable=m.iterable=m.toIterable=m.isPromiseLike=m.isAsyncIterable=m.isIterable=m.value=m.key=m.comparators=m.descending=m.ascending=void 0;var H=se(),Se=Ye();function Oe(r,e){return r<e?-1:r>e?1:0}m.ascending=Oe;function Gn(r,e){return r<e?1:r>e?-1:0}m.descending=Gn;function Kn(...r){return(e,t)=>{for(let n of r){let i=n(e,t);if(i!=0)return i}return 0}}m.comparators=Kn;function Wn(r){return Object.assign(e=>e[r],{name:r})}m.key=Wn;function Fn(r){return e=>e[r]}m.value=Fn;function et(r){return typeof r=="object"&&Symbol.iterator in r}m.isIterable=et;function Un(r){return typeof r=="object"&&Symbol.asyncIterator in r}m.isAsyncIterable=Un;function Vn(r){return typeof r=="object"&&"then"in r}m.isPromiseLike=Vn;function Bn(...r){return r}m.toIterable=Bn;function*$n(r){for(let e=0;e<r.length;e++)yield r[e]}m.iterable=$n;function zn(r){return H.__asyncGenerator(this,arguments,function*(){for(let t of r)yield yield H.__await(t)})}m.asyncIterable=zn;function xr(r){return typeof r=="object"&&typeof r.length=="number"}m.isArrayLike=xr;function Jn(r,...e){return et(r)||xr(r)?Qn(Se.sequence(r,...e)):Zn(Se.sequence(r,...e))}m.array=Jn;function Qn(r){let e=[];for(let t of r)e.push(t);return e}function Zn(r){var e,t,n,i;return H.__awaiter(this,void 0,void 0,function*(){let o=[];try{for(e=H.__asyncValues(r);t=yield e.next(),!t.done;){let a=t.value;o.push(a)}}catch(a){n={error:a}}finally{try{t&&!t.done&&(i=e.return)&&(yield i.call(e))}finally{if(n)throw n.error}}return o})}function Xn(r){return H.__asyncGenerator(this,arguments,function*(){yield yield H.__await(r)})}m.toAsyncIterable=Xn;function Yn(r,e=Oe){return typeof r=="function"?ti(r,e):ei(r,e)}m.by=Yn;function ei(r,e=Oe){return(t,n)=>e(t[r],n[r])}function ti(r,e=Oe){return(t,n)=>e(r(t),r(n))}function ri(r,...e){return et(r)?ni(Se.sequence(r,...e)):ii(Se.sequence(r,...e))}m.single=ri;function ni(r){for(let e of r)return e;throw new Error("Expected a single value")}function ii(r){var e,t,n,i;return H.__awaiter(this,void 0,void 0,function*(){try{for(e=H.__asyncValues(r);t=yield e.next(),!t.done;)return t.value}catch(o){n={error:o}}finally{try{t&&!t.done&&(i=e.return)&&(yield i.call(e))}finally{if(n)throw n.error}}throw new Error("Expected a single value")})}var vr=class{constructor(){this.handlers=[],this.state=[]}value(e){this.newState({value:e,done:!1})}error(e){this.newState(e)}close(){this.newState({value:void 0,done:!0})}[Symbol.asyncIterator](){return this}next(){return new Promise((e,t)=>{this.newHandler([e,t])})}newState(e){let t=this.handlers.shift();if(typeof t=="undefined")return this.state.push(e);let n=this.state.shift();if(typeof n=="undefined")return this.consume(e,t);this.consume(n,t),this.newState(e)}newHandler(e){let t=this.state.shift();if(typeof t=="undefined")return this.handlers.push(e);let n=this.handlers.shift();if(typeof n=="undefined")return this.consume(t,e);this.consume(t,n),this.newHandler(e)}consume(e,[t,n]){e instanceof Error?n(e):t(e)}};m.AsyncIteratorHandler=vr});var tt=D(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.container=q.lazy=q.replace=void 0;function wr(r,e,t){return Object.defineProperty(r,e,{value:t})}q.replace=wr;function Tr(r,e,t){if(typeof t.get=="undefined")throw new Error("@lazy can only decorate getter methods");return Object.defineProperty(r,e,Object.assign(Object.assign({},t),{get(){return wr(this,e,t.get.call(this))[e]}}))}q.lazy=Tr;function oi(r){return Object.keys(r).reduce((e,t)=>Tr(e,t,{configurable:!0,get:()=>r[t](e)}),{})}q.container=oi});var Rr=D(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.AVLTree=void 0;var Pr=se(),_e=Q(),Sr=tt(),C=class{constructor(e){this.comparator=e}static empty(e=_e.ascending){return new Or(e)}static create(e,t,n=_e.ascending){let i=C.empty(n);return new k(n,e,t,i,i)}static of(e,t=_e.ascending){return C.preSorted(e.sort(_e.by(0)),t,C.empty(t))}static preSorted(e,t,n){let i=e.length;switch(i){case 0:return n;case 1:{let[[o,a]]=e;return new k(t,o,a,n,n)}default:{let o=Math.floor(i/2),a=C.preSorted(e.slice(0,o),t,n),s=C.preSorted(e.slice(o+1),t,n),[c,l]=e[o];return new k(t,c,l,a,s)}}}};ke.AVLTree=C;var Or=class extends C{constructor(e){super(e);this.isEmpty=!0,this.height=0,this.balance=0}insert(e,t){return new k(this.comparator,e,t,this,this)}contains(e){return!1}lookup(e){}delete(e){return{tree:this}}first(){}last(){}removeFirst(){return{tree:this}}removeLast(){return{tree:this}}toString(){return""}*keys(){}*values(){}*entries(){return[]}},k=class extends C{constructor(e,t,n,i,o){super(e);this.key=t,this.value=n,this.left=i,this.right=o,this.isEmpty=!1}insert(e,t){let n=this.comparator(e,this.key);return n===0?new k(this.comparator,e,t,this.left,this.right):n<0?this.replaceLeft(this.left.insert(e,t)):this.replaceRight(this.right.insert(e,t))}contains(e){let t=this.comparator(e,this.key);return t===0?!0:t<0?this.left.contains(e):this.right.contains(e)}lookup(e){let t=this.comparator(e,this.key);return t===0?this.value:t<0?this.left.lookup(e):this.right.lookup(e)}delete(e){let t=this.comparator(e,this.key);if(t===0){if(this.left.isEmpty)return{tree:this.right,key:this.key,value:this.value};if(this.right.isEmpty)return{tree:this.left,key:this.key,value:this.value};let{tree:a,key:s,value:c}=this.left.removeLast();return{tree:rt(new k(this.comparator,s,c,a,this.right)),key:this.key,value:this.value}}if(t<0){let{tree:a,key:s,value:c}=this.left.delete(e);return{tree:this.replaceLeft(a),key:s,value:c}}let{tree:n,key:i,value:o}=this.right.delete(e);return{tree:this.replaceRight(n),key:i,value:o}}first(){return this.left.isEmpty?this.value:this.left.first()}last(){return this.right.isEmpty?this.value:this.right.last()}removeFirst(){if(this.left.isEmpty)return{tree:this.right,key:this.key,value:this.value};let{tree:e,key:t,value:n}=this.left.removeFirst();return{tree:this.replaceLeft(e),key:t,value:n}}removeLast(){if(this.right.isEmpty)return{tree:this.left,key:this.key,value:this.value};let{tree:e,key:t,value:n}=this.right.removeLast();return{tree:this.replaceRight(e),key:t,value:n}}replaceLeft(e){return rt(new k(this.comparator,this.key,this.value,e,this.right))}replaceRight(e){return rt(new k(this.comparator,this.key,this.value,this.left,e))}toString(){return`(${this.left} ${this.key}=${this.value} ${this.right})`}get balance(){return this.left.height-this.right.height}get height(){return Math.max(this.left.height,this.right.height)+1}*keys(){yield*this.left.keys(),yield this.key,yield*this.right.keys()}*values(){yield*this.left.values(),yield this.value,yield*this.right.values()}*entries(){yield*this.left.entries(),yield[this.key,this.value],yield*this.right.entries()}};Pr.__decorate([Sr.lazy],k.prototype,"balance",null);Pr.__decorate([Sr.lazy],k.prototype,"height",null);function rt(r){let e=r.balance;return e==-2?si(r):e==2?ai(r):r}function ai(r){let e=r.left.balance;return e==-1?ci(r):e==1?_r(r):r}function si(r){let e=r.right.balance;return e==1?ui(r):e==-1?kr(r):r}function _r(r){return Ir(r)}function ci(r){let e=Ar(r.left);return _r(r.replaceLeft(e))}function kr(r){return Ar(r)}function ui(r){let e=Ir(r.right);return kr(r.replaceRight(e))}function Ar(r){let e=r.right,t=e.left,n=r.replaceRight(t);return e.replaceLeft(n)}function Ir(r){let e=r.left,t=e.right,n=r.replaceLeft(t);return e.replaceRight(n)}});var Pe=D(d=>{"use strict";Object.defineProperty(d,"__esModule",{value:!0});d.WindowedTransducer=d.windowed=d.unique=d.UniqueTransducer=d.dedupe=d.DedupTransducer=d.sort=d.SortTransducer=d.takeWhile=d.TakeWhileTransducer=d.dropWhile=d.DropWhileTransducer=d.drop=d.DropTransducer=d.take=d.TakeTransducer=d.reduce=d.scan=d.ScanTransducer=d.decompose=d.compose=d.CompositeTransducer=d.find=d.reject=d.filter=d.FilterTransducer=d.flatMap=d.FlatMapTransducer=d.zipWithIndex=d.zip=d.ZipTransducer=d.map=d.MapTransducer=d.last=d.LastTransducer=d.first=d.FirstTransducer=d.transducer=d.identity=d.IdentityTransducer=void 0;var u=se(),W=Q(),Cr=Rr(),di=Ye(),nt=class{async_(e){return e}sync(e){return e}};d.IdentityTransducer=nt;function Mr(){return new nt}d.identity=Mr;d.transducer=Mr;var it=class{async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var o=u.__asyncValues(e),a;a=yield u.__await(o.next()),!a.done;){let s=a.value;return yield u.__await(yield yield u.__await(s))}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&(yield u.__await(i.call(o)))}finally{if(n)throw n.error}}})}*sync(e){for(let t of e)return yield t}};d.FirstTransducer=it;function jr(){return new it}d.first=jr;var ot=class{async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;let o;try{for(var a=u.__asyncValues(e),s;s=yield u.__await(a.next()),!s.done;)o=s.value}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&(yield u.__await(i.call(a)))}finally{if(n)throw n.error}}o!==void 0&&(yield yield u.__await(o))})}*sync(e){let t;for(t of e);t!==void 0&&(yield t)}};d.LastTransducer=ot;function Dr(){return new ot}d.last=Dr;var at=class{constructor(e){this.mapper=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var o=u.__asyncValues(e),a;a=yield u.__await(o.next()),!a.done;){let s=a.value;yield yield u.__await(this.mapper(s))}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&(yield u.__await(i.call(o)))}finally{if(n)throw n.error}}})}*sync(e){for(let t of e)yield this.mapper(t)}};d.MapTransducer=at;function li(r){return new at(r)}d.map=li;var Ae=class{constructor(e){this.other=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){if(!W.isAsyncIterable(this.other))throw new Error("Unsupported operation exception");let n=e[Symbol.asyncIterator](),i=this.other[Symbol.asyncIterator]();for(;;){let[o,a]=yield u.__await(Promise.all([n.next(),i.next()]));if(o.done||a.done)return yield u.__await(void 0);yield yield u.__await([o.value,a.value])}})}*sync(e){if(!W.isIterable(this.other))throw new Error("Unsupported operation exception");let t=e[Symbol.iterator](),n=this.other[Symbol.iterator]();for(;;){let i=t.next(),o=n.next();if(i.done||o.done)return;yield[i.value,o.value]}}};d.ZipTransducer=Ae;function pi(r){return new Ae(r)}d.zip=pi;function fi(){return new Ae(di.range(0))}d.zipWithIndex=fi;var st=class{constructor(e){this.mapper=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var o=u.__asyncValues(e),a;a=yield u.__await(o.next()),!a.done;){let s=a.value;yield u.__await(yield*u.__asyncDelegator(u.__asyncValues(this.mapper(s))))}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&(yield u.__await(i.call(o)))}finally{if(n)throw n.error}}})}*sync(e){for(let t of e)yield*this.mapper(t)}};d.FlatMapTransducer=st;function gi(r){return new st(r)}d.flatMap=gi;var Ie=class{constructor(e){this.predicate=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var o=u.__asyncValues(e),a;a=yield u.__await(o.next()),!a.done;){let s=a.value;this.predicate(s)&&(yield yield u.__await(s))}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&(yield u.__await(i.call(o)))}finally{if(n)throw n.error}}})}*sync(e){for(let t of e)this.predicate(t)&&(yield t)}};d.FilterTransducer=Ie;function Lr(r){return new Ie(r)}d.filter=Lr;function yi(r){return new Ie(e=>!r(e))}d.reject=yi;function mi(r){return ct(Lr(r),jr())}d.find=mi;var Re=class{constructor(e,t){this.a=e,this.b=t}async_(e){return this.b.async_(this.a.async_(e))}sync(e){return this.b.sync(this.a.sync(e))}};d.CompositeTransducer=Re;function ct(r,e){return new Re(r,e)}d.compose=ct;function*ut(r){r instanceof Re?(yield*ut(r.a),yield*ut(r.b)):yield r}d.decompose=ut;var dt=class{constructor(e,t){this.reducer=e,this.seed=t}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;let o=this.seed;yield yield u.__await(o);try{for(var a=u.__asyncValues(e),s;s=yield u.__await(a.next()),!s.done;){let c=s.value;yield yield u.__await(o=this.reducer(o,c))}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&(yield u.__await(i.call(a)))}finally{if(n)throw n.error}}})}*sync(e){let t=this.seed;yield t;for(let n of e)yield t=this.reducer(t,n)}};d.ScanTransducer=dt;function Er(r,e){return new dt(r,e)}d.scan=Er;function hi(r,e){return ct(Er(r,e),Dr())}d.reduce=hi;var lt=class{constructor(e){if(this.count=e,typeof e=="undefined")throw new Error("Count can not be undefined")}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;if(this.count<1)return yield u.__await(void 0);try{for(var o=u.__asyncValues(e),a;a=yield u.__await(o.next()),!a.done;){let s=a.value;if(yield yield u.__await(s),--this.count<1)return yield u.__await(void 0)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&(yield u.__await(i.call(o)))}finally{if(n)throw n.error}}})}*sync(e){if(!(this.count<1)){for(let t of e)if(yield t,--this.count<1)return}}};d.TakeTransducer=lt;function bi(r){return new lt(r)}d.take=bi;var pt=class{constructor(e){if(this.count=e,typeof e=="undefined")throw new Error("Count can not be undefined")}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var o=u.__asyncValues(e),a;a=yield u.__await(o.next()),!a.done;){let s=a.value;--this.count<0&&(yield yield u.__await(s))}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&(yield u.__await(i.call(o)))}finally{if(n)throw n.error}}})}*sync(e){for(let t of e)--this.count<0&&(yield t)}};d.DropTransducer=pt;function xi(r){return new pt(r)}d.drop=xi;var ft=class{constructor(e){this.predicate=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;let o=!0;try{for(var a=u.__asyncValues(e),s;s=yield u.__await(a.next()),!s.done;){let c=s.value;o&&(o=this.predicate(c)),o||(yield yield u.__await(c))}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&(yield u.__await(i.call(a)))}finally{if(n)throw n.error}}})}*sync(e){let t=!0;for(let n of e)t&&(t=this.predicate(n)),t||(yield n)}};d.DropWhileTransducer=ft;function vi(r){return new ft(r)}d.dropWhile=vi;var gt=class{constructor(e){this.predicate=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var o=u.__asyncValues(e),a;a=yield u.__await(o.next()),!a.done;){let s=a.value;if(this.predicate(s))yield yield u.__await(s);else return yield u.__await(void 0)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&(yield u.__await(i.call(o)))}finally{if(n)throw n.error}}})}*sync(e){for(let t of e)if(this.predicate(t))yield t;else return}};d.TakeWhileTransducer=gt;function wi(r){return new gt(r)}d.takeWhile=wi;var yt=class{constructor(e){this.comparator=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){let n=yield u.__await(W.array(e));n.sort(this.comparator),yield u.__await(yield*u.__asyncDelegator(u.__asyncValues(n)))})}*sync(e){let t=W.array(e);t.sort(this.comparator),yield*t}};d.SortTransducer=yt;function Ti(r=W.ascending){return new yt(r)}d.sort=Ti;var mt=class{constructor(e){this.comparator=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;let o;try{for(var a=u.__asyncValues(e),s;s=yield u.__await(a.next()),!s.done;){let c=s.value;typeof o=="undefined"?yield yield u.__await(c):this.comparator(c,o)!==0&&(yield yield u.__await(c)),o=c}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&(yield u.__await(i.call(a)))}finally{if(n)throw n.error}}})}*sync(e){let t;for(let n of e)typeof t=="undefined"?yield n:this.comparator(n,t)!==0&&(yield n),t=n}};d.DedupTransducer=mt;function Pi(r=W.ascending){return new mt(r)}d.dedupe=Pi;var ht=class{constructor(e){this.comparator=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;let o=Cr.AVLTree.empty(this.comparator);try{for(var a=u.__asyncValues(e),s;s=yield u.__await(a.next()),!s.done;){let c=s.value;o.contains(c)||(o=o.insert(c,void 0),yield yield u.__await(c))}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&(yield u.__await(i.call(a)))}finally{if(n)throw n.error}}})}*sync(e){let t=Cr.AVLTree.empty(this.comparator);for(let n of e)t.contains(n)||(t=t.insert(n,void 0),yield n)}};d.UniqueTransducer=ht;function Si(r=W.ascending){return new ht(r)}d.unique=Si;function Oi(r,e=1,t=!1){return new bt(r,e,t)}d.windowed=Oi;var bt=class{constructor(e,t,n){this.size=e,this.step=t,this.remainder=n}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;let o=[],a=0;try{for(var s=u.__asyncValues(e),c;c=yield u.__await(s.next()),!c.done;){let l=c.value;if(a>0){a--;continue}o.push(l),o.length===this.size&&(yield yield u.__await([...o]),o=o.slice(this.step),this.step>this.size&&(a=this.step-this.size))}}catch(l){n={error:l}}finally{try{c&&!c.done&&(i=s.return)&&(yield u.__await(i.call(s)))}finally{if(n)throw n.error}}this.remainder&&(yield yield u.__await([...o]))})}*sync(e){let t=[],n=0;for(let i of e){if(n>0){n--;continue}t.push(i),t.length===this.size&&(yield[...t],t=t.slice(this.step),this.step>this.size&&(n=this.step-this.size))}this.remainder&&(yield[...t])}};d.WindowedTransducer=bt});var Tt=D(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.caching=Z.cache=void 0;function _i(r,e,t){if(typeof t.value!="function")throw new Error("@cache can only decorate methods");let n=new WeakMap;function i(o){let a=n.get(o);if(a)return a;let s=new Map;return n.set(o,s),s}return Object.defineProperty(r,e,Object.assign(Object.assign({},t),{value:function(...o){let a=JSON.stringify(o),s=i(this),c=s.get(a);if(typeof c!="undefined"||s.has(a))return c;let l=t.value.call(this,...o);return s.set(a,l),l}}))}Z.cache=_i;function ki(r){let e=new Map;return function(...t){let n=JSON.stringify(t),i=e.get(n);if(typeof i!="undefined"||e.has(n))return i;let o=r(...t);return e.set(n,o),o}}Z.caching=ki});var yn=D(f=>{"use strict";Object.defineProperty(f,"__esModule",{value:!0});f.Uri=f.HostHandler=f.host=f.replace=f.const_=f.modify=f.notFound=f.ok=f.response=f.delete_=f.patch=f.put=f.post=f.get=f.request=f.stringChunk=f.StringBody=f.isBody=void 0;var dn=se();typeof Symbol.asyncIterator=="undefined"&&(Symbol.asyncIterator=Symbol.for("Symbol.asyncIterator"));function zi(r){return typeof r=="object"&&"text"in r&&Symbol.asyncIterator in r}f.isBody=zi;var qe=class{constructor(e){this.value=e}text(){return Promise.resolve(this.value)}[Symbol.asyncIterator](){return dn.__asyncGenerator(this,arguments,function*(){yield yield dn.__await(ln(this.value))})}};f.StringBody=qe;function ln(r){return{text:()=>r,data:()=>new TextEncoder().encode(r)}}f.stringChunk=ln;function ee(r,e,t,n){return{method:r,uri:typeof e=="string"?new te(e):e,headers:t||{},body:typeof n=="string"?new qe(n):n}}f.request=ee;function Ji(r,e){return ee("GET",r,e)}f.get=Ji;function Qi(r,e,t){return ee("POST",r,e,t)}f.post=Qi;function Zi(r,e,t){return ee("PUT",r,e,t)}f.put=Zi;function Xi(r,e,t){return ee("PATCH",r,e,t)}f.patch=Xi;function Yi(r,e){return ee("DELETE",r,e)}f.delete_=Yi;function Dt(r,e,t){return{status:r,headers:e||{},body:typeof t=="string"?new qe(t):t}}f.response=Dt;function eo(r,e){return Dt(200,r,e)}f.ok=eo;function to(r,e){return Dt(404,r,e)}f.notFound=to;function Lt(r,e,t){return Object.assign({},r,{[e]:t(r[e])})}f.modify=Lt;function pn(r){return()=>r}f.const_=pn;function fn(r,e){return t=>Lt(t,r,pn(e))}f.replace=fn;function ro(r){if(typeof r.uri.authority!="undefined")return r.uri.authority;let e=r.headers.Host;if(typeof e!="string")throw new Error("Bad Request");return e}f.host=ro;var gn=class{constructor(e,t){this.handler=e,this.host=t}handle(e){return this.handler.handle(Lt(e,"headers",fn("Host",this.host)))}};f.HostHandler=gn;var te=class{constructor(e){let t=te.RFC_3986.exec(e);if(!t)throw new Error(`Invalid Uri: ${e}`);let[,,n,,i,o,,a,,s]=t;this.scheme=n,this.authority=i,this.path=o,this.query=a,this.fragment=s}toString(){let e=[];return typeof this.scheme!="undefined"&&e.push(this.scheme,":"),typeof this.authority!="undefined"&&e.push("//",this.authority),e.push(this.path),typeof this.query!="undefined"&&e.push("?",this.query),typeof this.fragment!="undefined"&&e.push("#",this.fragment),e.join("")}toJSON(){return this.toString()}};f.Uri=te;te.RFC_3986=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/});var Hr=E(Pe()),xt=E(Q());function vt(r){switch(typeof r){case"undefined":return!0;case"string":return r.trim()==="";case"number":return isNaN(r);case"object":{if(r==null)return!0;if(b.isObject(r))return Object.keys(r).length===0;if(Array.isArray(r))return r.length===0}}return!1}var F=class{static noWhitespace(e){return e&&typeof e=="string"?e.replace(/\s+/g,""):""}static startWith(e,t){return e?e.substring(0,t.length)===t:e===t}static endsWith(e,t){return e.substring(e.length-t.length,e.length)===t}static isEmpty(e){return e===void 0||e===null?!0:e.trim().length===0}static isLowerCase(e){return e===e.toLowerCase()&&e!==e.toUpperCase()}static isUpperCase(e){return e===e.toUpperCase()&&e!==e.toLowerCase()}static kebabCase(e){return F.delimiterCase(e,"-")}static snakeCase(e){return F.delimiterCase(e,"_")}static delimiterCase(e,t){return e.replace(/([A-Z][a-z]+|\d+)/gm,`${t}$1`).replace(new RegExp(`^${t}`),"").toLowerCase()}static titleCase(e){return e.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())}};function ce(r,e,t){if(e(r))return t(r);switch(typeof r){case"undefined":return;case"object":{if(r===null)return null;if(Array.isArray(r))return r.map(n=>ce(n,e,t));if(b.isObject(r))return b.keys(r).sort().reduce((n,i)=>{let o=r[i];return n[i]=ce(o,e,t),n},{})}}return r}function wt(r,e){switch(typeof r){case"undefined":return;case"object":{if(r===null)return null;if(Array.isArray(r))return r.map(t=>wt(t,e));if(b.isObject(r))return b.keys(r).sort().reduce((t,n)=>{let i=r[n];return t[e(String(n))]=wt(i,e),t},{})}}return r}var b=class{static isObject(e){return e&&typeof e=="object"&&(e.constructor===Object||/Object.*native/.test(e.constructor.toString()))}static keys(e){return Object.keys(e)}static values(e){return Object.keys(e).map(t=>e[t])}static entries(e){return Object.keys(e).map(t=>[t,e[t]])}static removeEmpty(e){return e&&(b.isObject(e)?Object.keys(e).reduce((t,n)=>{let i=b.removeEmpty(e[n]);return vt(i)||(t[n]=i),t},{}):e)}static sort(e){return e&&(Array.isArray(e)?e.map(b.sort):b.isObject(e)?Object.keys(e).sort().reduce((t,n)=>{let i=e[n];return t[n]=b.sort(i),t},{}):e)}static toLowerCase(e){return typeof e=="string"?e.toLowerCase():Array.isArray(e)?e.map(b.toLowerCase):g(()=>b.isObject(e))?Object.entries(e).reduce((t,[n,i])=>(t[n]=b.toLowerCase(i),t),{}):e}static snakeCase(e){return wt(e,F.snakeCase)}static filter(e,t){let n=b.keys(e).filter(t);return b.pick(e,...n)}static omit(e,...t){return t.reduce((n,i)=>(Reflect.deleteProperty(n,i),n),e)}static pick(e,...t){return t.reduce((n,i)=>(n[i]=e[i],n),{})}};var N=class{static from(e){return Array.from(e)}static find(e,t){if(e.find)return e.find(t);let[n]=e.filter(t);return n}static findLastIndex(e,t){let n=[...e].reverse().findIndex(t);return n===-1?n:e.length-n-1}static toObject(e){return e.reduce((t,n)=>(Object.keys(n).forEach(i=>{i in t||(t[i]=n[i])}),t),{})}static flatten(e){return e.reduce((t,n)=>t.concat(n),[])}static flatMap(e,t){return e.flatMap?e.flatMap(t):N.flatten(e.map(t))}static unique(e){return Array.from(new Set(e))}static clean(e){return e.filter(Boolean)}static trim(e){return e.map(t=>t.trim())}static includes(e,t){return"includes"in e?e.includes(t):e.indexOf(t)!==-1}static first(e){return e[0]}static last(e){return e[e.length-1]}static safeReverse(e){return e?e.slice().reverse():[]}static shuffle(e){return e.map(t=>({value:t,order:Math.random()})).sort((0,xt.by)("order")).map(({value:t})=>t)}};function g(r,e=void 0){try{let t=r();return typeof t=="undefined"?e:t}catch(t){return e}}var I=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof module!="undefined"?module:Function("return this")())();function qr(r,e,t){let n=r[e];return typeof n=="undefined"?r[e]=t:Array.isArray(n)?n.indexOf(t)==-1&&n.push(t):r[e]=[n,t],r}var Nr=E(Tt()),Gr=E(tt());function U(r=I){return r.triptease=r.triptease||{},r.triptease.onboard=r.triptease.onboard||{},{triptease:r.triptease,onboard:r.triptease.onboard}}var V;(function(n){n.Native="native",n.NonNative="non-native",n.NotImplemented="not-implemented"})(V||(V={}));function Kr(r,e){return g(()=>e.split(".").reduce((t,n)=>t[n],r))}function Ai(r){return r==null?V.NotImplemented:typeof r=="function"?r.toString().includes("native code")?V.Native:V.NonNative:V.Native}var Ce=class{static exposeApi(){let e=U(I).triptease;e.native||(e.native=Ce)}static getProperty(e){let t=Kr(I,e);return Ai(t)!==V.NonNative?t:Kr(Ce.window,e)}static get window(){let e=I;if(!e.document)return e;try{let t=e.document,n=t.querySelector("[name='triptease.native']");if(n)return n.contentWindow;let i=t.createElement("iframe");return i.style.display="none",i.setAttribute("title","blank"),i.setAttribute("aria-hidden","true"),i.setAttribute("name","triptease.native"),t.documentElement.appendChild(i),i.contentWindow}catch(t){return e}}},O=Ce;ae([Nr.cache],O,"getProperty",1),ae([Gr.lazy],O,"window",1);var Ii=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}\.\d{3}Z)?$/;function Ri(r){return ce(r,e=>typeof e=="string"&&Ii.test(e),e=>{let t=new Date(e);return isNaN(t.valueOf())?e:t})}var Ci=O.getProperty("JSON.parse"),Mi=O.getProperty("JSON.stringify"),ji=O.getProperty("Date.prototype.toISOString"),M=class{static parse(e){return Ci(e)}static parseWithDates(e){return Ri(M.parse(e))}static stringify(e){return Mi(this.clean(e))}static clean(e){return ce(e,t=>{let n=typeof t;switch(n){case"undefined":case"string":case"number":case"boolean":return!0;case"object":{if(t===null)return!0;if(Array.isArray(t)||b.isObject(t))return!1;if("toJSON"in t)return!0}}throw new Error(`Illegal JsonValue: ${n} ${t} `)},t=>t instanceof Date?ji.call(t):t)}},A=class{static same(e,t){return M.stringify(e)===M.stringify(t)}static isSuperset(e,t){return e===null||t===null?A.same(e,t):Array.isArray(e)&&Array.isArray(t)?e.length>t.length?!1:e.every(n=>t.some(i=>A.isSuperset(n,i))):g(()=>b.isObject(e))&&g(()=>b.isObject(t))?Object.keys(e).reduce((n,i)=>n&&A.isSuperset(e[i],t[i]),!0):A.same(e,t)}static compress(e){let t=A.groupValues(e);return this.compressGrouped(t)}static compressGrouped(e){return Object.entries(e).reduce(({shared:t,unique:n},[i,o])=>{if(g(()=>b.isObject(o))){let a=A.compressGrouped(o);Object.keys(a.shared).length>0&&(t[i]=a.shared),a.unique.forEach((s,c)=>{n[c]=n[c]||{},Object.keys(s).length>0&&(n[c][i]=s)})}return Array.isArray(o)&&o.forEach((a,s)=>{n[s]=n[s]||{},N.unique(o.map(c=>M.stringify(c))).length===1?t[i]=a:a!==void 0&&(n[s][i]=a)}),{shared:t,unique:n}},{shared:{},unique:[]})}static groupValues(e){let t=Array.from(e.reduce((a,s)=>Object.keys(s).reduce((c,l)=>c.add(l),a),new Set)),[n,i]=e.reduce((a,s)=>t.reduce(([c,l],h)=>{let P=s[h];return g(()=>b.isObject(P))?(l[h]=l[h]||[],l[h].push(P)):(c[h]=c[h]||[],c[h].push(P)),[c,l]},a),[{},{}]),o=Object.entries(i).reduce((a,[s,c])=>(a[s]=A.groupValues(c),a),{});return _(_({},n),o)}static decompress(e){return e.unique.map(t=>this.merge(e.shared,t))}static merge(e,t){return[...Object.keys(e),...Object.keys(t)].reduce((i,o)=>{let a=e[o],s=t[o];return g(()=>b.isObject(a))&&g(()=>b.isObject(s))?i[o]=A.merge(a,s):i[o]=s!=null?s:a,i},{})}};function ue(r,e=!0){return r?(r.indexOf("?")==0&&(r=r.substring(1,r.length)),r.split("&").map(function(t){return t.split("=")}).reduce(function(t,n){let i=n[0],o=n[1];if(!i)return t;let a=Wr(o),s=e?Di(a):a;return qr(t,Wr(i),s)},{})):{}}function Wr(r){return g(()=>decodeURIComponent(r.replace(/\+/g,"%20")),r)}function Di(r){try{return M.parse(r)}catch(e){return r}}function Li(r){return typeof r=="string"?r:JSON.stringify(r)}function Fr(r,e=!0){return Object.keys(b.removeEmpty(r)).map(t=>{let n=r[t],i=e?Li(n):n;return`${t}=${encodeURIComponent(i)}`}).join("&")}var St=class{constructor(e){let t=St.RFC_3986.exec(e);if(!t)throw new Error(`Invalid Uri: ${e}`);let[,,n,,i,o,,a,,s]=t;this.scheme=n,this.authority=i?new Pt(i):void 0,this.path=o,this.query=a,this.fragment=s}toString(){let e=[];return typeof this.scheme!="undefined"&&e.push(this.scheme,":"),typeof this.authority!="undefined"&&e.push("//",this.authority.toString()),e.push(this.path),typeof this.query!="undefined"&&e.push("?",this.query),typeof this.fragment!="undefined"&&e.push("#",this.fragment),e.join("")}get host(){return this.authority&&this.authority.host}get port(){return this.authority&&this.authority.port}get userInfo(){return this.authority&&this.authority.userInfo}},X=St;X.RFC_3986=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;var Ot=class{constructor(e){let t=Ot.RFC_3986.exec(e);if(!t)throw new Error(`Invalid Authority: ${e}`);let[,n,i,o]=t;this.userInfo=n,this.host=i,this.port=o}toString(){let e=[];return typeof this.userInfo!="undefined"&&e.push(this.userInfo,"@"),typeof this.host!="undefined"&&e.push(this.host),typeof this.port!="undefined"&&e.push(":",this.port),e.join("")}},Pt=Ot;Pt.RFC_3986=/(?:([^@]+)@)?([^:]+)(?::([\d]+))?/;var Ur=O.getProperty("console.log"),Ei=O.getProperty("console.error"),Hi=O.getProperty("console.debug"),Vr=class{constructor(e=Ur,t=Ei,n=Hi||Ur){this.log=e;this.error=t;this.debug=n}},Br=class{constructor(){this.log=()=>{};this.error=()=>{};this.debug=()=>{}}},Me="triptease-debug",qi=256;function $r(r,e=Me){let t=g(()=>{var n;return ue((n=r.location)==null?void 0:n.search,!1)[e]})||g(()=>{var n;return ue(new X((n=r.location)==null?void 0:n.originalHref).query,!1)[e]})||g(()=>{var n,i;return(i=(n=r.process)==null?void 0:n.env)==null?void 0:i.DEBUG})||g(()=>{var n;return((n=r.localStorage)==null?void 0:n.getItem)&&r.localStorage.getItem(e)})||g(()=>{var n;return((n=r.sessionStorage)==null?void 0:n.getItem)&&r.sessionStorage.getItem(e)})||"";return g(()=>t.substring(0,qi),"")}function zr(r=I){let e=$r(r,Me);return F.isEmpty(e)?"":Fr({[Me]:e})}function Ni(r){return $r(r,Me).split(",").map(e=>e.trim())}function Jr(r){let e=r.replace(/\./g,"\\.").replace(/\*/g,".*");return new RegExp("^"+e+"$")}function Gi(r,e=I){try{let t=Ni(e),n=t.filter(i=>i[0]==="!").map(i=>i.substr(1));return n.length>0?!n.some(i=>Jr(i).test(r)):t.some(i=>i==="true"||Jr(i).test(r))}catch(t){return!1}}var Qr=class{constructor(e){this.name=e;this.console=new Vr}debug(e,...t){this.console.debug(`[${this.name}] ${e}`,...t)}log(e,...t){this.console.log(`[${this.name}] ${e}`,...t)}error(e,...t){this.console.error(`[${this.name}] ${e}`,...t)}};function x(r,e=I){return Gi(r,e)?new Qr(r):new Br}var Wo=O.getProperty("Date");var _t=class{now(){return new Date}};function Zr(r){return new Promise(e=>{this.setTimeout(()=>{e()},r)})}var de=class{constructor(e=new _t){this.clock=e;this.delay=Zr.bind(this);this.delay=Zr}task(e){return p(this,null,function*(){return yield this.delay(0),e()})}setTimeout(e,t){return setTimeout(e,t)}clearTimeout(e){clearTimeout(e)}setInterval(e,t){return setInterval(e,t)}clearInterval(e){clearInterval(e)}requestIdleCallback(e,t){let n=t?t.timeout:1,i=this.clock.now().getTime()+n,o=this;return this.setTimeout(()=>{e({didTimeout:!1,timeRemaining(){return Math.max(0,50-(o.clock.now().getTime()-i))}})},n)}cancelIdleCallback(e){this.clearTimeout(e)}};var Bo=new de;function Xr(r={credentials:!1}){return e=>p(this,null,function*(){if(typeof fetch!="undefined"){let t=yield fetch(e.url,{method:e.method,headers:e.headers,body:e.body,credentials:r.credentials?"include":"omit"});return{status:t.status,statusDescription:t.statusText,body:yield t.text()}}else{let t=new XMLHttpRequest;return t.open(e.method,e.url,!0),e.headers&&Object.keys(e.headers).forEach(n=>{t.setRequestHeader(n,e.headers[n])}),t.withCredentials=r.credentials,t.send(e.body),new Promise((n,i)=>{t.addEventListener("load",o=>{n({status:t.status,statusDescription:t.statusText,body:t.responseText})}),t.addEventListener("error",o=>{i(o)})})}})}var Yr=E(Tt());var en=class{constructor(e,t=Xr()){this.logger=e;this.httpHandler=t;this.workers={}}createWorker(e,t){return p(this,null,function*(){let n=this.workers[e];return n||(this.workers[e]=yield this.create(t,{name:e}))})}create(e,t){return p(this,null,function*(){try{return new Worker(e,t)}catch(n){this.logger.debug("Failed to create Worker switching to Blob Worker because:",n.message);let i=`location.originalHref = "${e}";
`,a=(yield this.httpHandler({method:"GET",url:e})).body,s=new Blob([i,a],{type:"application/javascript"});return new Worker(URL.createObjectURL(s),t)}})}},je=class{constructor(e,t=x("application-starter"),n=new en(t),i=new tn(e,t)){this.window=e;this.logging=t;this.workerFactory=n;this.waiter=i}start(e){return p(this,null,function*(){this.logging.debug(`ApplicationStarter starting app "${e.name}" (${e.type}), ${e.url}`);let t=this.window.document;if(e.type==="worker"){let o=yield this.workerFactory.createWorker(e.name,e.url);return e.startMessage&&(yield this.waiter.waitForMessage(e.startMessage,o)),this.logging.debug("ApplicationStarter returning worker"),o}let n=t.createElement(e.type);n.setAttribute("name",e.name),n.src=e.url;let i=je.DefaultOptions[e.type]||{};return Object.keys(i).forEach(o=>{n.setAttribute(o.toLowerCase(),i[o])}),this.addElement(n),e.startMessage?yield this.waiter.waitForMessage(e.startMessage):e.type==="script"&&(yield this.waiter.waitForLoadEvent(n)),n})}addElement(e){(this.window.document.body||this.window.document.documentElement).appendChild(e)}static create(e){var n;let t=U(e).triptease.onboard;return t.applicationStarter=(n=t.applicationStarter)!=null?n:new je(e)}},le=je;le.DefaultOptions={script:{defer:"",async:"",crossOrigin:"anonymous"},iframe:{style:"display: none;",sandbox:"allow-scripts allow-same-origin",title:"blank","aria-hidden":"true"}},ae([Yr.cache],le.prototype,"start",1);var tn=class{constructor(e,t){this.window=e;this.logging=t}waitForLoadEvent(e){return this.logging.debug("MessageWaiter waiting for load/error event for",e),new Promise((t,n)=>{e.addEventListener("load",t),e.addEventListener("error",i=>n({name:"ScriptError",message:i.message||`Failed to load script "${e.src}"`}))})}waitForMessage(e,t=this.window){return this.logging.debug("MessageWaiter waiting for message",e),new Promise(n=>{this.logging.debug("MessageWaiter creating handler");let i=o=>{try{let a=o.data&&o.data.type,s=a===e;this.logging.debug(`ApplicationStarter message received "${a}", expecting "${e}", matched: ${s}`),s&&(t.removeEventListener("message",i),n(o.data))}catch(a){this.logging.debug("ApplicationStarter error in parsing message",a,o)}};this.logging.debug("MessageWaiter adding listener"),t.addEventListener("message",i)})}};var ra=new Set(["Unknown","PossibleIdentifier"]),na=new Set(["HotelName","HotelCode","ChainCode"]);var L;(function(s){s.Search="Search",s.RoomsAndRates="RoomsAndRates",s.Confirmation="Confirmation",s.Payment="Payment",s.Group="Group",s.Partial="Partial",s.Unknown="Unknown"})(L||(L={}));var Ki=[L.Payment,L.Confirmation,L.RoomsAndRates,L.Search,L.Partial,L.Group,L.Unknown];function rn(r){return Ki.indexOf(r)}var j;(function(n){n.Singleton="Singleton",n.ApplicationHost="ApplicationHost",n.DataSource="DataSource"})(j||(j={}));var pe="triptease.onboard.kernel";function Wi(r,e,t){return Object.defineProperty(r,e,{value:t})}function nn(r,e,t){return Wi(r,e,t)[e]}function on(r){try{let{target:e,method:t}=At(r.type);if(e&&t)return!0}catch(e){}return!1}var De=class{constructor(e,t=x("worker")){this.worker=e;this.logger=t}addListener(e){this.worker.addEventListener("message",t=>{!on(t.data)||e(t.data,this)})}send(e){try{this.worker.postMessage(e)}catch(t){this.worker.postMessage(JSON.parse(JSON.stringify(e)))}}},Y=class{constructor(e,t,n=kt,i=x("messaging")){this.listener=e;this.target=t;this.allowedOrigins=n;this.logger=i}addListener(e){this.listener&&this.listener.addEventListener("message",t=>{this.disallowedOrigin(t)||!on(t.data)||e(t.data,new Y(void 0,t.source||this.target))})}disallowedOrigin(e){return e.origin&&this.allowedOrigins.length>0&&this.allowedOrigins.indexOf(new X(e.origin).host)===-1}send(e){if(this.target)try{this.target.postMessage(e,"*")}catch(t){this.target.postMessage(JSON.parse(JSON.stringify(e)),"*")}}},kt=["onboard.triptease.io","localhost"],Fi=/^(.*)\.([^.]+)$/;function At(r){let[,e,t]=r.match(Fi)||[];return{target:e,method:t}}function an(r){return r&&typeof r=="object"&&"name"in r&&typeof r.name=="string"&&"message"in r&&typeof r.message=="string"&&"stack"in r&&typeof r.stack=="string"}function It(r,e,t){return{name:r,message:e,stack:t!=null?t:""}}var mn=E(Pe());var K=E(Q());var Le,Ui=new Uint8Array(16);function Rt(){if(!Le&&(Le=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Le))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Le(Ui)}var sn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Vi(r){return typeof r=="string"&&sn.test(r)}var cn=Vi;var v=[];for(Ee=0;Ee<256;++Ee)v.push((Ee+256).toString(16).substr(1));var Ee;function Bi(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(v[r[e+0]]+v[r[e+1]]+v[r[e+2]]+v[r[e+3]]+"-"+v[r[e+4]]+v[r[e+5]]+"-"+v[r[e+6]]+v[r[e+7]]+"-"+v[r[e+8]]+v[r[e+9]]+"-"+v[r[e+10]]+v[r[e+11]]+v[r[e+12]]+v[r[e+13]]+v[r[e+14]]+v[r[e+15]]).toLowerCase();if(!cn(t))throw TypeError("Stringified UUID is invalid");return t}var un=Bi;function $i(r,e,t){r=r||{};var n=r.random||(r.rng||Rt)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return un(n)}var Ct=$i;var Mt=()=>g(()=>crypto.randomUUID())||Ct(),jt=class{generate(e){if(typeof e!="undefined")throw new Error("UuidGenerator does not support custom lengths");return Mt().replace(/-/g,"")}};var B=class{static get last(){return _({},B.value)}static get(e,t,n,i,o){let a={clientKey:n,clientName:i,apiKey:o,pageType:e,pagePath:t};if(!vt(B.value)&&g(()=>{let c=_({},B.value);return delete c.pageVisitId,A.same(c,a)}))return B.value;let s=oe(_({},a),{pageVisitId:Mt()});return B.value=s}},G=B;G.value={};function He(r,e=G.last){let i=e,{pageVisitId:t}=i,n=Zt(i,["pageVisitId"]);return oe(_({},r),{context:_(_({},n),r.context||{}),pageVisitId:t})}var hn=E(yn());function*bn(r){for(let e=0;e<r.frames.length;e++){let t=r.frames[e];yield t,yield*bn(t)}}function no(r,e){return(0,K.array)(bn(r),(0,mn.filter)(t=>g(()=>t.name)===e))}function xn(r){return r===r.top?0:1+xn(r.parent)}function Et(r){let[e]=r.sort((0,K.by)(xn,K.ascending));return e}function io(r){return r.map(e=>g(()=>{var t;return(t=e.triptease.message)==null?void 0:t.payload})).filter(Boolean)}function oo(r){let[e]=io(r).sort((0,K.by)(t=>rn(t.type),K.ascending));return e}function Ht(r){return no(r.top,pe)}function vn(r,e=Ht(r)){return e.length===1?j.Singleton:Et(e)===r?j.ApplicationHost:j.DataSource}function qt(r){return g(()=>{var e;return new hn.Uri((e=r.context.page)==null?void 0:e.url).path})}function wn(r,e){let t=oo(r);return He(oe(_({},e),{payload:t}),G.get(t.type,qt(e),t.clientKey,t.clientName,t.apiKey))}var Nt="triptease.onboard.request",Ne="triptease.onboard.response";function Gt(r){return r&&typeof r=="object"&&r.type==="triptease.onboard.request"&&typeof r.requestType=="string"&&typeof r.correlationId=="string"&&Array.isArray(r.payload)}function Ge(r){return r&&typeof r=="object"&&r.type==="triptease.onboard.response"&&typeof r.correlationId=="string"}function Ke(r,e){return{type:"triptease.onboard.response",correlationId:r,payload:e}}function We(r,e){return Ke(r,It("NotFound","No handler found for "+e))}function Tn(r){return g(()=>r.payload.name==="NotFound",!1)}function Pn(r,e){return Ke(r,It(e.name,e.message,e.stack))}var ao=x("messaging"),Fe=class{constructor(){this.handlers=new Map}register(e,t){return e.forEach(n=>{if(this.hasHandlerFor(n))throw new Error(`Method name "${n}" already registered to a handler`);this.handlers.set(n,t)}),this}handle(e){return p(this,null,function*(){let t=this.handlers.get(e.requestType);return t?(ao.debug("Matched message to handler",e,t),yield t.handle(e)):We(e.correlationId,e.requestType)})}hasHandlerFor(e){return this.handlers.has(e)}};var Kt=x("messaging"),fe=class{constructor(e){this.target=e}handle(e){return p(this,null,function*(){let t=this.target[e.requestType];if(!t)return Kt.debug("No method found that matches method",e.requestType,this.target),We(e.correlationId,e.requestType);try{Kt.debug("Found method",e.requestType);let n=yield t.apply(this.target,e.payload);return Ke(e.correlationId,n)}catch(n){return Kt.debug("Error trying to in invoke method",e.requestType,n),Pn(e.correlationId,n)}})}};var Sn=class{constructor(e,t){this.messaging=e;this.idGenerator=t}get(e,t,n){return(...i)=>p(this,null,function*(){let o=this.idGenerator.generate(),{payload:a}=yield this.messaging.handle({type:"triptease.onboard.request",requestType:String(t),payload:i,correlationId:o});if(an(a))throw a;return a})}};function re(r,e=new jt){return new Proxy({},new Sn(r,e))}var On=x("messaging"),ne=class{constructor(e){this.messageHandler=e;this.promises=new Map;e&&e.addListener(t=>{if(Ge(t)){let{correlationId:n}=t,i=this.promises.get(n);i&&(On.debug("Sender matched response",t),i.resolve(t),this.promises.delete(n))}})}handle(e){return p(this,null,function*(){return On.debug("Sending request",e),this.messageHandler&&this.messageHandler.send(e),new Promise((t,n)=>{this.promises.set(e.correlationId,{resolve:t,reject:n})})})}};var Ue=class{constructor(e,t,n=x("messaging")){this.listen=e;this.router=t;this.logger=n;this.rules=[];e.addListener(this.handler.bind(this)),this.addRule(Gt,i=>i,i=>i),this.addRule(co,lo,_n)}registerAlias(e,t){if(!this.router.hasHandlerFor(t))throw new Error(`Illegal alias: Method "${t}" is not registered with router`);return this.addRule(so(e),uo(t),_n)}handler(e,t){return p(this,null,function*(){if(Ge(e))return;this.logger.debug("listenOn received request",e);let n=this.rules.find(a=>a.predicate(e));if(!n)return;let i=n.requestConverter(e),o=yield this.router.handle(i);if(Tn(o)){this.logger.debug(`Handler not found for request "${i.requestType}", potentially for another listener`);return}e.correlationId&&e.correlationId===o.correlationId&&(this.logger.debug("listenOn sending response to sender",o),t.send(n.responseConverter(o)))})}addRule(e,t,n){return this.rules.push({predicate:e,requestConverter:t,responseConverter:n}),this}};function so(r){return e=>e.type===r}function co(r){return!Gt(r)&&!!r.correlationId}function uo(r){return e=>({type:"triptease.onboard.request",requestType:String(r),payload:[e],correlationId:e.correlationId||"fire-and-forget"})}function lo(r){let{value:e,correlationId:t}=r,{method:n}=At(r.type);return{type:"triptease.onboard.request",requestType:n,payload:[e],correlationId:t}}function _n(r){return{type:"triptease.onboard.response",correlationId:r.correlationId,value:r.payload}}var Wt=class{constructor(e){this.storage=e}get(e){let t=this.storage.getItem(e);if(t)return M.parseWithDates(t)}set(e,t){return this.storage.setItem(e,JSON.stringify(t)),this}clear(){this.storage.clear()}},Ft=class{constructor(){this.data=new Map}get(e){return this.data.get(e)}set(e,t){return this.data.set(e,t)}clear(){this.data.clear()}};var ge=x("messaging"),Ut=class{constructor(e,t=new BroadcastChannel(Nt),n=new BroadcastChannel(Ne)){this.messageHandler=e;this.requests=t;this.responses=n;this.requests.addEventListener("message",i=>p(this,null,function*(){let o=i.data;ge.debug("BroadcastListener received request",o);let a=yield this.messageHandler.handle(o);this.responses.postMessage(a)}))}},Vt=class{constructor(e=50,t=new de,n=new BroadcastChannel(Nt),i=new BroadcastChannel(Ne)){this.timeout=e;this.timers=t;this.requests=n;this.responses=i;this.promises=new Map;this.payloads=new Map;this.responses.addEventListener("message",o=>{let a=o.data,{correlationId:s}=a;if(this.promises.get(s)){ge.debug("BroadcastSender received response, storing payload",a);let l=this.payloads.get(s)||[],{payload:h}=a;this.payloads.set(s,l.concat(h))}})}handle(e){return p(this,null,function*(){return ge.debug("Sending request",e),this.requests.postMessage(e),this.timers.setTimeout(()=>{ge.debug(`BroadcastSender timer fired after ${this.timeout} ms`);let{correlationId:t}=e,n=this.promises.get(t);if(n){let i=this.payloads.get(t)||[],o={correlationId:t,type:Ne,payload:i};ge.debug("BroadcastSender matched response",o),n.resolve(o),this.promises.delete(t),this.payloads.delete(t)}},this.timeout),new Promise((t,n)=>{this.promises.set(e.correlationId,{resolve:t,reject:n})})})}};var ye=class{constructor(e,t=re(new Vt)){this.receiver=e;this.sender=t;new Ut(new fe(e))}static create(e){return g(()=>new ye(e),e)}getAnonymousIds(){return p(this,null,function*(){return this.sender.getAnonymousIds()})}setAnonymousId(e){return this.sender.setAnonymousId(e)}};var me=class{constructor(e){this.providers=e}static create(...e){return new me(e)}getAnonymousIds(){return p(this,null,function*(){return N.unique(N.flatten(yield Promise.all(this.providers.map(e=>g(()=>e.getAnonymousIds(),[])))))})}setAnonymousId(e){return p(this,null,function*(){yield Promise.all(this.providers.map(t=>g(()=>t.setAnonymousId(e))))})}};var Bt="triptease-anonymous-id",Ve=class{constructor(e){this.storage=e}getAnonymousIds(){return p(this,null,function*(){let e=this.storage.get(Bt);return e?[e]:[]})}setAnonymousId(e){return p(this,null,function*(){let t=this.storage.get(Bt);(t&&e<t||!t)&&this.storage.set(Bt,e)})}};var $t=class{constructor(e,t,n=ye.create(me.create(new Ve(new Ft),g(()=>new Ve(new Wt(e.localStorage))))),i=x("kernel"),o=le.create(e)){this.window=e;this.allowedOrigin=t;this.identityProvider=n;this.logger=i;this.starter=o}get triptease(){let e=this.window.triptease=this.window.triptease||{};return e.onboard={"kernel-host":this},nn(this,"triptease",e)}start(){return p(this,null,function*(){this.logger.debug("KernelHost starting"),this.triptease;let e=new Y(this.window,this.window.parent,[...kt,this.allowedOrigin],this.logger),t=yield this.starter.start(po()),n=new De(t),i=new ne(n);this.kernel=re(i);let o=new ne(e);this.bootstrap=re(o),new Ue(e,this.router=new Fe().register(["getPageState","startApp","processConfig","getAnonymousIds","setAnonymousId"],new fe(this)).register(["generateConfig","applicationConfig"],i)).registerAlias("triptease.config","processConfig"),new Ue(n,new Fe().register(["trackError","trackMessage"],o)),e.send({type:"triptease.onboard.kernel-host-started"}),this.logger.log("KernelHost started")})}startApp(e){return p(this,null,function*(){let t=yield this.starter.start(e),n=new ne(new De(t));this.router.register(e.requestTypes,n)})}getAnonymousIds(){return this.identityProvider.getAnonymousIds()}setAnonymousId(e){return p(this,null,function*(){yield this.identityProvider.setAnonymousId(e)})}getPageState(){return p(this,null,function*(){return G.last})}processConfig(e){return p(this,null,function*(){let t=this.window;U(t).triptease.message=e;let n=Ht(t.top),i=vn(t,n);switch(this.logger.log(`Kernel Host is in ${i} mode`),i){case j.Singleton:return this.bootstrap.processConfig(He(e,G.get(e.payload.type,qt(e),e.payload.clientKey,e.payload.clientName,e.payload.apiKey)));case j.ApplicationHost:let o=wn(n,e);return this.bootstrap.processConfig(o);case j.DataSource:let a=re(new ne(new Y(void 0,Et(n))));return this.logger.log("Sending triptease.config message to kernel host in application host mode",e.payload),a.processConfig(e)}})}};function po(){return{name:pe,url:`kernel.js?${zr()}`,type:"worker",startMessage:`${pe}-started`,enabled:!0}}(()=>p(void 0,null,function*(){yield new $t(window,ue(location.search).originHost).start()}))();})();
//]]></script></head><body></body></html>